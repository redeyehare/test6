var Godot=(()=>{var _scriptDir=typeof document!="undefined"&&document.currentScript?document.currentScript.src:0[0];return function(Godot={}){var Module=typeof Godot!="undefined"?Godot:{};Module.ready=new Promise((resolve,reject)=>{readyPromiseResolve=resolve,readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(status,toThrow)=>{throw toThrow},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="";function locateFile(path){return Module.locateFile?Module.locateFile(path,scriptDirectory):scriptDirectory+path}(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:typeof document!="undefined"&&document.currentScript&&(scriptDirectory=document.currentScript.src),_scriptDir&&(scriptDirectory=_scriptDir),scriptDirectory.indexOf("blob:")!==0?scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):scriptDirectory="",read_=url=>{var xhr=new XMLHttpRequest;return xhr.open("GET",url,!1),xhr.send(null),xhr.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=url=>{var xhr=new XMLHttpRequest;return xhr.open("GET",url,!1),xhr.responseType="arraybuffer",xhr.send(null),new Uint8Array(xhr.response)}),readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.responseType="arraybuffer",xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()},xhr.onerror=onerror,xhr.send(null)},setWindowTitle=title=>document.title=title),out=Module.print||console.log.bind(console),err=Module.printErr||console.error.bind(console),Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit),Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!1;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1;function assert(condition,text){condition||abort(text)}function updateMemoryViews(){var b=wasmMemory.buffer;Module.HEAP8=HEAP8=new Int8Array(b),Module.HEAP16=HEAP16=new Int16Array(b),Module.HEAP32=HEAP32=new Int32Array(b),Module.HEAPU8=HEAPU8=new Uint8Array(b),Module.HEAPU16=HEAPU16=new Uint16Array(b),Module.HEAPU32=HEAPU32=new Uint32Array(b),Module.HEAPF32=HEAPF32=new Float32Array(b),Module.HEAPF64=HEAPF64=new Float64Array(b)}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1,runtimeKeepaliveCounter=0;function keepRuntimeAlive(){return noExitRuntime||runtimeKeepaliveCounter>0}function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,!Module.noFSInit&&!FS.init.initialized&&FS.init(),FS.ignorePermissions=!1,TTY.init(),SOCKFS.root=FS.mount(SOCKFS,{},null),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){___funcs_on_exit(),callRuntimeCallbacks(__ATEXIT__),FS.quit(),TTY.shutdown(),IDBFS.quit(),runtimeExited=!0}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(id){return id}function addRunDependency(){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var callback=dependenciesFulfilled;dependenciesFulfilled=null,callback()}}function abort(what){Module.onAbort&&Module.onAbort(what),what="Aborted("+what+")",err(what),ABORT=!0,EXITSTATUS=1,what+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(what);throw readyPromiseReject(e),e}var dataURIPrefix="data:application/octet-stream;base64,";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}wasmBinaryFile="godot.javascript.opt.debug.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(file);throw"both async and sync fetching of the wasm failed"}catch(err){abort(err)}}function getBinaryPromise(binaryFile){return!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&typeof fetch=="function"?fetch(binaryFile,{credentials:"same-origin"}).then(response=>{if(!response.ok)throw"failed to load wasm binary file at '"+binaryFile+"'";return response.arrayBuffer()}).catch(()=>getBinary(binaryFile)):Promise.resolve().then(()=>getBinary(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(instance=>instance).then(receiver,reason=>{err("failed to asynchronously prepare wasm: "+reason),abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){return!binary&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(binaryFile)&&typeof fetch=="function"?fetch(binaryFile,{credentials:"same-origin"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){return err("wasm streaming compile failed: "+reason),err("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(binaryFile,imports,callback)})}):instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={a:wasmImports};function receiveInstance(instance){var exports=instance.exports;return Module.asm=exports,wasmMemory=Module.asm.nk,updateMemoryViews(),wasmTable=Module.asm.Ak,addOnInit(Module.asm.ok),removeRunDependency("wasm-instantiate"),exports}addRunDependency("wasm-instantiate");function receiveInstantiationResult(result){receiveInstance(result.instance)}if(Module.instantiateWasm)try{return Module.instantiateWasm(info,receiveInstance)}catch(e){err("Module.instantiateWasm callback failed with error: "+e),readyPromiseReject(e)}return instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject),{}}function ExitStatus(status){this.name="ExitStatus",this.message="Program terminated with exit("+status+")",this.status=status}function callRuntimeCallbacks(callbacks){for(;callbacks.length>0;)callbacks.shift()(Module)}function getValue(ptr,type="i8"){switch(type.endsWith("*")&&(type="*"),type){case"i1":return HEAP8[ptr>>0];case"i8":return HEAP8[ptr>>0];case"i16":return HEAP16[ptr>>1];case"i32":return HEAP32[ptr>>2];case"i64":return HEAP32[ptr>>2];case"float":return HEAPF32[ptr>>2];case"double":return HEAPF64[ptr>>3];case"*":return HEAPU32[ptr>>2];default:abort(`invalid type for getValue: ${type}`)}}function setValue(ptr,value,type="i8"){switch(type.endsWith("*")&&(type="*"),type){case"i1":HEAP8[ptr>>0]=value;break;case"i8":HEAP8[ptr>>0]=value;break;case"i16":HEAP16[ptr>>1]=value;break;case"i32":HEAP32[ptr>>2]=value;break;case"i64":tempI64=[value>>>0,(tempDouble=value,+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[ptr>>2]=tempI64[0],HEAP32[ptr+4>>2]=tempI64[1];break;case"float":HEAPF32[ptr>>2]=value;break;case"double":HEAPF64[ptr>>3]=value;break;case"*":HEAPU32[ptr>>2]=value;break;default:abort(`invalid type for setValue: ${type}`)}}function getWasmTableEntry(funcPtr){return wasmTable.get(funcPtr)}function ___call_sighandler(fp,sig){getWasmTableEntry(fp)(sig)}var dlopenMissingError="To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html";function ___dlsym(){abort(dlopenMissingError)}var PATH={isAbs:path=>path.charAt(0)==="/",splitPath:filename=>{var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:(parts,allowAboveRoot)=>{for(up=0,i=parts.length-1;i>=0;i--){var up,i,last=parts[i];last==="."?parts.splice(i,1):last===".."?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up;up--)parts.unshift("..");return parts},normalize:path=>{var isAbsolute=PATH.isAbs(path),trailingSlash=path.substr(-1)==="/";return path=PATH.normalizeArray(path.split("/").filter(p=>!!p),!isAbsolute).join("/"),!path&&!isAbsolute&&(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},dirname:path=>{var result=PATH.splitPath(path),root=result[0],dir=result[1];return!root&&!dir?".":(dir&&(dir=dir.substr(0,dir.length-1)),root+dir)},basename:path=>{if(path==="/")return"/";path=PATH.normalize(path),path=path.replace(/\/$/,"");var lastSlash=path.lastIndexOf("/");return lastSlash===-1?path:path.substr(lastSlash+1)},join:function(){var paths=Array.prototype.slice.call(arguments);return PATH.normalize(paths.join("/"))},join2:(l,r)=>PATH.normalize(l+"/"+r)};function initRandomFill(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return view=>crypto.getRandomValues(view);abort("initRandomDevice")}function randomFill(view){return(randomFill=initRandomFill())(view)}var PATH_FS={resolve:function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if(typeof path!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!path)return"";resolvedPath=path+"/"+resolvedPath,resolvedAbsolute=PATH.isAbs(path)}return resolvedPath=PATH.normalizeArray(resolvedPath.split("/").filter(p=>!!p),!resolvedAbsolute).join("/"),(resolvedAbsolute?"/":"")+resolvedPath||"."},relative:(from,to)=>{from=PATH_FS.resolve(from).substr(1),to=PATH_FS.resolve(to).substr(1);function trim(arr){for(var end,start=0;start<arr.length;start++)if(arr[start]!=="")break;for(end=arr.length-1;end>=0;end--)if(arr[end]!=="")break;return start>end?[]:arr.slice(start,end-start+1)}for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;i<length;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}for(var outputParts=[],i=samePartsLength;i<fromParts.length;i++)outputParts.push("..");return outputParts=outputParts.concat(toParts.slice(samePartsLength)),outputParts.join("/")}};function lengthBytesUTF8(str){for(var c,len=0,i=0;i<str.length;++i)c=str.charCodeAt(i),c<=127?len++:c<=2047?len+=2:c>=55296&&c<=57343?(len+=4,++i):len+=3;return len}function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;for(var u,u1,startIdx=outIdx,endIdx=outIdx+maxBytesToWrite-1,i=0;i<str.length;++i)if(u=str.charCodeAt(i),u>=55296&&u<=57343&&(u1=str.charCodeAt(++i),u=65536+((u&1023)<<10)|u1&1023),u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6,heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12,heap[outIdx++]=128|u>>6&63,heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18,heap[outIdx++]=128|u>>12&63,heap[outIdx++]=128|u>>6&63,heap[outIdx++]=128|u&63}return heap[outIdx]=0,outIdx-startIdx}function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1,u8array=new Array(len),numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);return dontAddNull&&(u8array.length=numBytesWritten),u8array}var UTF8Decoder=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):0[0];function UTF8ArrayToString(heapOrArray,idx,maxBytesToRead){for(var str,u0,u1,u2,ch,endIdx=idx+maxBytesToRead,endPtr=idx;heapOrArray[endPtr]&&!(endPtr>=endIdx);)++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder)return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr));for(str="";idx<endPtr;){if(u0=heapOrArray[idx++],!(u0&128)){str+=String.fromCharCode(u0);continue}if(u1=heapOrArray[idx++]&63,(u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}u2=heapOrArray[idx++]&63,(u0&240)==224?u0=(u0&15)<<12|u1<<6|u2:u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63,u0<65536?str+=String.fromCharCode(u0):(ch=u0-65536,str+=String.fromCharCode(55296|ch>>10,56320|ch&1023))}return str}TTY={ttys:[],init:function(){},shutdown:function(){},register:function(dev,ops){TTY.ttys[dev]={input:[],output:[],ops},FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open:function(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty)throw new FS.ErrnoError(43);stream.tty=tty,stream.seekable=!1},close:function(stream){stream.tty.ops.fsync(stream.tty)},fsync:function(stream){stream.tty.ops.fsync(stream.tty)},read:function(stream,buffer,offset,length){if(!stream.tty||!stream.tty.ops.get_char)throw new FS.ErrnoError(60);for(var result,bytesRead=0,i=0;i<length;i++){try{result=stream.tty.ops.get_char(stream.tty)}catch{throw new FS.ErrnoError(29)}if(result===0[0]&&bytesRead===0)throw new FS.ErrnoError(6);if(result==null)break;bytesRead++,buffer[offset+i]=result}return bytesRead&&(stream.node.timestamp=Date.now()),bytesRead},write:function(stream,buffer,offset,length){if(!stream.tty||!stream.tty.ops.put_char)throw new FS.ErrnoError(60);try{for(var i=0;i<length;i++)stream.tty.ops.put_char(stream.tty,buffer[offset+i])}catch{throw new FS.ErrnoError(29)}return length&&(stream.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(tty){if(!tty.input.length){var result=null;if(typeof window!="undefined"&&typeof window.prompt=="function"?(result=window.prompt("Input: "),result!==null&&(result+=`
`)):typeof readline=="function"&&(result=readline(),result!==null&&(result+=`
`)),!result)return null;tty.input=intArrayFromString(result,!0)}return tty.input.shift()},put_char:function(tty,val){val===null||val===10?(out(UTF8ArrayToString(tty.output,0)),tty.output=[]):val!=0&&tty.output.push(val)},fsync:function(tty){tty.output&&tty.output.length>0&&(out(UTF8ArrayToString(tty.output,0)),tty.output=[])}},default_tty1_ops:{put_char:function(tty,val){val===null||val===10?(err(UTF8ArrayToString(tty.output,0)),tty.output=[]):val!=0&&tty.output.push(val)},fsync:function(tty){tty.output&&tty.output.length>0&&(err(UTF8ArrayToString(tty.output,0)),tty.output=[])}}};function zeroMemory(address,size){return HEAPU8.fill(0,address,address+size),address}function mmapAlloc(){abort()}var MEMFS={ops_table:null,mount:function(){return MEMFS.createNode(null,"/",16384|511,0)},createNode:function(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode))throw new FS.ErrnoError(63);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var node=FS.createNode(parent,name,mode,dev);return FS.isDir(node.mode)?(node.node_ops=MEMFS.ops_table.dir.node,node.stream_ops=MEMFS.ops_table.dir.stream,node.contents={}):FS.isFile(node.mode)?(node.node_ops=MEMFS.ops_table.file.node,node.stream_ops=MEMFS.ops_table.file.stream,node.usedBytes=0,node.contents=null):FS.isLink(node.mode)?(node.node_ops=MEMFS.ops_table.link.node,node.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(node.mode)&&(node.node_ops=MEMFS.ops_table.chrdev.node,node.stream_ops=MEMFS.ops_table.chrdev.stream),node.timestamp=Date.now(),parent&&(parent.contents[name]=node,parent.timestamp=node.timestamp),node},getFileDataAsTypedArray:function(node){return node.contents?node.contents.subarray?node.contents.subarray(0,node.usedBytes):new Uint8Array(node.contents):new Uint8Array(0)},expandFileStorage:function(node,newCapacity){var prevCapacity=node.contents?node.contents.length:0;if(prevCapacity>=newCapacity)return;var CAPACITY_DOUBLING_MAX=1024*1024;newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<CAPACITY_DOUBLING_MAX?2:1.125)>>>0),prevCapacity!=0&&(newCapacity=Math.max(newCapacity,256));var oldContents=node.contents;node.contents=new Uint8Array(newCapacity),node.usedBytes>0&&node.contents.set(oldContents.subarray(0,node.usedBytes),0)},resizeFileStorage:function(node,newSize){if(node.usedBytes==newSize)return;if(newSize==0)node.contents=null,node.usedBytes=0;else{var oldContents=node.contents;node.contents=new Uint8Array(newSize),oldContents&&node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes))),node.usedBytes=newSize}},node_ops:{getattr:function(node){var attr={};return attr.dev=FS.isChrdev(node.mode)?node.id:1,attr.ino=node.id,attr.mode=node.mode,attr.nlink=1,attr.uid=0,attr.gid=0,attr.rdev=node.rdev,FS.isDir(node.mode)?attr.size=4096:FS.isFile(node.mode)?attr.size=node.usedBytes:FS.isLink(node.mode)?attr.size=node.link.length:attr.size=0,attr.atime=new Date(node.timestamp),attr.mtime=new Date(node.timestamp),attr.ctime=new Date(node.timestamp),attr.blksize=4096,attr.blocks=Math.ceil(attr.size/attr.blksize),attr},setattr:function(node,attr){attr.mode!==0[0]&&(node.mode=attr.mode),attr.timestamp!==0[0]&&(node.timestamp=attr.timestamp),attr.size!==0[0]&&MEMFS.resizeFileStorage(node,attr.size)},lookup:function(){throw FS.genericErrors[44]},mknod:function(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename:function(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node,i;try{new_node=FS.lookupNode(new_dir,new_name)}catch{}if(new_node)for(i in new_node.contents)throw new FS.ErrnoError(55)}delete old_node.parent.contents[old_node.name],old_node.parent.timestamp=Date.now(),old_node.name=new_name,new_dir.contents[new_name]=old_node,new_dir.timestamp=old_node.parent.timestamp,old_node.parent=new_dir},unlink:function(parent,name){delete parent.contents[name],parent.timestamp=Date.now()},rmdir:function(parent,name){var i,node=FS.lookupNode(parent,name);for(i in node.contents)throw new FS.ErrnoError(55);delete parent.contents[name],parent.timestamp=Date.now()},readdir:function(node){var key,entries=[".",".."];for(key in node.contents){if(!node.contents.hasOwnProperty(key))continue;entries.push(key)}return entries},symlink:function(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,511|40960,0);return node.link=oldpath,node},readlink:function(node){if(!FS.isLink(node.mode))throw new FS.ErrnoError(28);return node.link}},stream_ops:{read:function(stream,buffer,offset,length,position){var i,contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);if(size>8&&contents.subarray)buffer.set(contents.subarray(position,position+size),offset);else for(i=0;i<size;i++)buffer[offset+i]=contents[position+i];return size},write:function(stream,buffer,offset,length,position,canOwn){if(buffer.buffer===HEAP8.buffer&&(canOwn=!1),!length)return 0;var i,node=stream.node;if(node.timestamp=Date.now(),buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn)return node.contents=buffer.subarray(offset,offset+length),node.usedBytes=length,length;if(node.usedBytes===0&&position===0)return node.contents=buffer.slice(offset,offset+length),node.usedBytes=length,length;if(position+length<=node.usedBytes)return node.contents.set(buffer.subarray(offset,offset+length),position),length}if(MEMFS.expandFileStorage(node,position+length),node.contents.subarray&&buffer.subarray)node.contents.set(buffer.subarray(offset,offset+length),position);else for(i=0;i<length;i++)node.contents[position+i]=buffer[offset+i];return node.usedBytes=Math.max(node.usedBytes,position+length),length},llseek:function(stream,offset,whence){var position=offset;if(whence===1?position+=stream.position:whence===2&&FS.isFile(stream.node.mode)&&(position+=stream.node.usedBytes),position<0)throw new FS.ErrnoError(28);return position},allocate:function(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length),stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap:function(stream,length,position,prot,flags){if(!FS.isFile(stream.node.mode))throw new FS.ErrnoError(43);var ptr,allocated,contents=stream.node.contents;if(!(flags&2)&&contents.buffer===HEAP8.buffer)allocated=!1,ptr=contents.byteOffset;else{if((position>0||position+length<contents.length)&&(contents.subarray?contents=contents.subarray(position,position+length):contents=Array.prototype.slice.call(contents,position,position+length)),allocated=!0,ptr=mmapAlloc(length),!ptr)throw new FS.ErrnoError(48);HEAP8.set(contents,ptr)}return{ptr,allocated}},msync:function(stream,buffer,offset,length){return MEMFS.stream_ops.write(stream,buffer,0,length,offset,!1),0}}};function asyncLoad(url,onload,onerror,noRunDep){var dep=noRunDep?"":getUniqueRunDependency(`al ${url}`);readAsync(url,arrayBuffer=>{assert(arrayBuffer,`Loading data file "${url}" failed (no arrayBuffer).`),onload(new Uint8Array(arrayBuffer)),dep&&removeRunDependency(dep)},event=>{if(onerror)onerror();else throw`Loading data file "${url}" failed.`}),dep&&addRunDependency(dep)}var preloadPlugins=Module.preloadPlugins||[];function FS_handledByPreloadPlugin(byteArray,fullname,finish,onerror){typeof Browser!="undefined"&&Browser.init();var handled=!1;return preloadPlugins.forEach(function(plugin){if(handled)return;plugin.canHandle(fullname)&&(plugin.handle(byteArray,fullname,finish,onerror),handled=!0)}),handled}function FS_createPreloadedFile(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish){var fullname=name?PATH_FS.resolve(PATH.join2(parent,name)):parent,dep=getUniqueRunDependency(`cp ${fullname}`);function processData(byteArray){function finish(byteArray){preFinish&&preFinish(),dontCreateFile||FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn),onload&&onload(),removeRunDependency(dep)}if(FS_handledByPreloadPlugin(byteArray,fullname,finish,()=>{onerror&&onerror(),removeRunDependency(dep)}))return;finish(byteArray)}addRunDependency(dep),typeof url=="string"?asyncLoad(url,byteArray=>processData(byteArray),onerror):processData(url)}function FS_modeStringToFlags(str){var flagModes={r:0,"r+":2,w:512|64|1,"w+":512|64|2,a:1024|64|1,"a+":1024|64|2},flags=flagModes[str];if(typeof flags=="undefined")throw new Error(`Unknown file open mode: ${str}`);return flags}function FS_getMode(canRead,canWrite){var mode=0;return canRead&&(mode|=292|73),canWrite&&(mode|=146),mode}var IDBFS={dbs:{},indexedDB:()=>{if(typeof indexedDB!="undefined")return indexedDB;var ret=null;return typeof window=="object"&&(ret=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(ret,"IDBFS used, but indexedDB not supported"),ret},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(){return MEMFS.mount.apply(null,arguments)},syncfs:(mount,populate,callback)=>{IDBFS.getLocalSet(mount,(err,local)=>{if(err)return callback(err);IDBFS.getRemoteSet(mount,(err,remote)=>{if(err)return callback(err);var src=populate?remote:local,dst=populate?local:remote;IDBFS.reconcile(src,dst,callback)})})},quit:()=>{Object.values(IDBFS.dbs).forEach(value=>value.close()),IDBFS.dbs={}},getDB:(name,callback)=>{var req,db=IDBFS.dbs[name];if(db)return callback(null,db);try{req=IDBFS.indexedDB().open(name,IDBFS.DB_VERSION)}catch(e){return callback(e)}if(!req)return callback("Unable to connect to IndexedDB");req.onupgradeneeded=e=>{var fileStore,db=e.target.result,transaction=e.target.transaction;db.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?fileStore=transaction.objectStore(IDBFS.DB_STORE_NAME):fileStore=db.createObjectStore(IDBFS.DB_STORE_NAME),fileStore.indexNames.contains("timestamp")||fileStore.createIndex("timestamp","timestamp",{unique:!1})},req.onsuccess=()=>{db=req.result,IDBFS.dbs[name]=db,callback(null,db)},req.onerror=e=>{callback(this.error),e.preventDefault()}},getLocalSet:(mount,callback)=>{var stat,entries={};function isRealDir(p){return p!=="."&&p!==".."}function toAbsolute(root){return p=>PATH.join2(root,p)}for(var check=FS.readdir(mount.mountpoint).filter(isRealDir).map(toAbsolute(mount.mountpoint));check.length;){var path=check.pop();try{stat=FS.stat(path)}catch(e){return callback(e)}FS.isDir(stat.mode)&&check.push.apply(check,FS.readdir(path).filter(isRealDir).map(toAbsolute(path))),entries[path]={timestamp:stat.mtime}}return callback(null,{type:"local",entries})},getRemoteSet:(mount,callback)=>{var entries={};IDBFS.getDB(mount.mountpoint,(err,db)=>{if(err)return callback(err);try{var transaction=db.transaction([IDBFS.DB_STORE_NAME],"readonly");transaction.onerror=e=>{callback(this.error),e.preventDefault()};var store=transaction.objectStore(IDBFS.DB_STORE_NAME),index=store.index("timestamp");index.openKeyCursor().onsuccess=event=>{var cursor=event.target.result;if(!cursor)return callback(null,{type:"remote",db,entries});entries[cursor.primaryKey]={timestamp:cursor.key},cursor.continue()}}catch(e){return callback(e)}})},loadLocalEntry:(path,callback)=>{try{var stat,node,lookup=FS.lookupPath(path);node=lookup.node,stat=FS.stat(path)}catch(e){return callback(e)}return FS.isDir(stat.mode)?callback(null,{timestamp:stat.mtime,mode:stat.mode}):FS.isFile(stat.mode)?(node.contents=MEMFS.getFileDataAsTypedArray(node),callback(null,{timestamp:stat.mtime,mode:stat.mode,contents:node.contents})):callback(new Error("node type not supported"))},storeLocalEntry:(path,entry,callback)=>{try{if(FS.isDir(entry.mode))FS.mkdirTree(path,entry.mode);else if(FS.isFile(entry.mode))FS.writeFile(path,entry.contents,{canOwn:!0});else return callback(new Error("node type not supported"));FS.chmod(path,entry.mode),FS.utime(path,entry.timestamp,entry.timestamp)}catch(e){return callback(e)}callback(null)},removeLocalEntry:(path,callback)=>{try{var stat=FS.stat(path);FS.isDir(stat.mode)?FS.rmdir(path):FS.isFile(stat.mode)&&FS.unlink(path)}catch(e){return callback(e)}callback(null)},loadRemoteEntry:(store,path,callback)=>{var req=store.get(path);req.onsuccess=event=>{callback(null,event.target.result)},req.onerror=e=>{callback(this.error),e.preventDefault()}},storeRemoteEntry:(store,path,entry,callback)=>{try{var req=store.put(entry,path)}catch(e){callback(e);return}req.onsuccess=()=>{callback(null)},req.onerror=e=>{callback(this.error),e.preventDefault()}},removeRemoteEntry:(store,path,callback)=>{var req=store.delete(path);req.onsuccess=()=>{callback(null)},req.onerror=e=>{callback(this.error),e.preventDefault()}},reconcile:(src,dst,callback)=>{var total=0,create=[];Object.keys(src.entries).forEach(function(key){var e=src.entries[key],e2=dst.entries[key];(!e2||e.timestamp.getTime()!=e2.timestamp.getTime())&&(create.push(key),total++)});var remove=[];if(Object.keys(dst.entries).forEach(function(key){src.entries[key]||(remove.push(key),total++)}),!total)return callback(null);var errored=!1,db=src.type==="remote"?src.db:dst.db,transaction=db.transaction([IDBFS.DB_STORE_NAME],"readwrite"),store=transaction.objectStore(IDBFS.DB_STORE_NAME);function done(err){if(err&&!errored)return errored=!0,callback(err)}transaction.onerror=e=>{done(this.error),e.preventDefault()},transaction.oncomplete=e=>{errored||callback(null)},create.sort().forEach(path=>{dst.type==="local"?IDBFS.loadRemoteEntry(store,path,(err,entry)=>{if(err)return done(err);IDBFS.storeLocalEntry(path,entry,done)}):IDBFS.loadLocalEntry(path,(err,entry)=>{if(err)return done(err);IDBFS.storeRemoteEntry(store,path,entry,done)})}),remove.sort().reverse().forEach(path=>{dst.type==="local"?IDBFS.removeLocalEntry(path,done):IDBFS.removeRemoteEntry(store,path,done)})}},FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(path,opts={})=>{if(path=PATH_FS.resolve(path),!path)return{path:"",node:null};var defaults={follow_mount:!0,recurse_count:0};if(opts=Object.assign(defaults,opts),opts.recurse_count>8)throw new FS.ErrnoError(32);for(var parts=path.split("/").filter(p=>!!p),current=FS.root,current_path="/",i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent)break;if(current=FS.lookupNode(current,parts[i]),current_path=PATH.join2(current_path,parts[i]),FS.isMountpoint(current)&&(!islast||islast&&opts.follow_mount)&&(current=current.mounted.root),!islast||opts.follow)for(var count=0;FS.isLink(current.mode);){var link=FS.readlink(current_path);current_path=PATH_FS.resolve(PATH.dirname(current_path),link);var lookup=FS.lookupPath(current_path,{recurse_count:opts.recurse_count+1});if(current=lookup.node,count++>40)throw new FS.ErrnoError(32)}}return{path:current_path,node:current}},getPath:node=>{for(;!0;){if(FS.isRoot(node)){var path,mount=node.mount.mountpoint;return path?mount[mount.length-1]!=="/"?`${mount}/${path}`:mount+path:mount}path=path?`${node.name}/${path}`:node.name,node=node.parent}},hashName:(parentid,name)=>{for(var hash=0,i=0;i<name.length;i++)hash=(hash<<5)-hash+name.charCodeAt(i)|0;return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode:node=>{var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash],FS.nameTable[hash]=node},hashRemoveNode:node=>{var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node)FS.nameTable[hash]=node.name_next;else for(var current=FS.nameTable[hash];current;){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}},lookupNode:(parent,name)=>{var errCode=FS.mayLookup(parent);if(errCode)throw new FS.ErrnoError(errCode,parent);for(var hash=FS.hashName(parent.id,name),node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name)return node}return FS.lookup(parent,name)},createNode:(parent,name,mode,rdev)=>{var node=new FS.FSNode(parent,name,mode,rdev);return FS.hashAddNode(node),node},destroyNode:node=>{FS.hashRemoveNode(node)},isRoot:node=>node===node.parent,isMountpoint:node=>!!node.mounted,isFile:mode=>(mode&61440)===32768,isDir:mode=>(mode&61440)===16384,isLink:mode=>(mode&61440)===40960,isChrdev:mode=>(mode&61440)===8192,isBlkdev:mode=>(mode&61440)===24576,isFIFO:mode=>(mode&61440)===4096,isSocket:mode=>(mode&49152)===49152,flagsToPermissionString:flag=>{var perms=["r","w","rw"][flag&3];return flag&512&&(perms+="w"),perms},nodePermissions:(node,perms)=>FS.ignorePermissions?0:perms.includes("r")&&!(node.mode&292)?2:perms.includes("w")&&!(node.mode&146)?2:perms.includes("x")&&!(node.mode&73)?2:0,mayLookup:dir=>{var errCode=FS.nodePermissions(dir,"x");return errCode?errCode:dir.node_ops.lookup?0:2},mayCreate:(dir,name)=>{try{var node=FS.lookupNode(dir,name);return 20}catch{}return FS.nodePermissions(dir,"wx")},mayDelete:(dir,name,isdir)=>{try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var node,errCode=FS.nodePermissions(dir,"wx");if(errCode)return errCode;if(isdir){{if(!FS.isDir(node.mode))return 54;if(FS.isRoot(node)||FS.getPath(node)===FS.cwd())return 10}}else if(FS.isDir(node.mode))return 31;return 0},mayOpen:(node,flags)=>node?FS.isLink(node.mode)?32:FS.isDir(node.mode)&&(FS.flagsToPermissionString(flags)!=="r"||flags&512)?31:FS.nodePermissions(node,FS.flagsToPermissionString(flags)):44,MAX_OPEN_FDS:4096,nextfd:(fd_start=0,fd_end=FS.MAX_OPEN_FDS)=>{for(var fd=fd_start;fd<=fd_end;fd++)if(!FS.streams[fd])return fd;throw new FS.ErrnoError(33)},getStream:fd=>FS.streams[fd],createStream:(stream,fd_start,fd_end)=>{FS.FSStream||(FS.FSStream=function(){this.shared={}},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(val){this.node=val}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(val){this.shared.flags=val}},position:{get:function(){return this.shared.position},set:function(val){this.shared.position=val}}})),stream=Object.assign(new FS.FSStream,stream);var fd=FS.nextfd(fd_start,fd_end);return stream.fd=fd,FS.streams[fd]=stream,stream},closeStream:fd=>{FS.streams[fd]=null},chrdev_stream_ops:{open:stream=>{var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops,stream.stream_ops.open&&stream.stream_ops.open(stream)},llseek:()=>{throw new FS.ErrnoError(70)}},major:dev=>dev>>8,minor:dev=>dev&255,makedev:(ma,mi)=>ma<<8|mi,registerDevice:(dev,ops)=>{FS.devices[dev]={stream_ops:ops}},getDevice:dev=>FS.devices[dev],getMounts:mount=>{for(var m,mounts=[],check=[mount];check.length;)m=check.pop(),mounts.push(m),check.push.apply(check,m.mounts);return mounts},syncfs:(populate,callback)=>{typeof populate=="function"&&(callback=populate,populate=!1),FS.syncFSRequests++,FS.syncFSRequests>1&&err(`warning: ${FS.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var mounts=FS.getMounts(FS.root.mount),completed=0;function doCallback(errCode){return FS.syncFSRequests--,callback(errCode)}function done(errCode){if(errCode){if(!done.errored)return done.errored=!0,doCallback(errCode);return}++completed>=mounts.length&&doCallback(null)}mounts.forEach(mount=>{if(!mount.type.syncfs)return done(null);mount.type.syncfs(mount,populate,done)})},mount:(type,opts,mountpoint)=>{var root=mountpoint==="/",pseudo=!mountpoint;if(root&&FS.root)throw new FS.ErrnoError(10);if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:!1});if(mountpoint=lookup.path,node=lookup.node,FS.isMountpoint(node))throw new FS.ErrnoError(10);if(!FS.isDir(node.mode))throw new FS.ErrnoError(54)}var node,mount={type,opts,mountpoint,mounts:[]},mountRoot=type.mount(mount);return mountRoot.mount=mount,mount.root=mountRoot,root?FS.root=mountRoot:node&&(node.mounted=mount,node.mount&&node.mount.mounts.push(mount)),mountRoot},unmount:mountpoint=>{var idx,lookup=FS.lookupPath(mountpoint,{follow_mount:!1});if(!FS.isMountpoint(lookup.node))throw new FS.ErrnoError(28);var node=lookup.node,mount=node.mounted,mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach(hash=>{for(var current=FS.nameTable[hash];current;){var next=current.name_next;mounts.includes(current.mount)&&FS.destroyNode(current),current=next}}),node.mounted=null,idx=node.mount.mounts.indexOf(mount),node.mount.mounts.splice(idx,1)},lookup:(parent,name)=>parent.node_ops.lookup(parent,name),mknod:(path,mode,dev)=>{var lookup=FS.lookupPath(path,{parent:!0}),parent=lookup.node,name=PATH.basename(path);if(!name||name==="."||name==="..")throw new FS.ErrnoError(28);var errCode=FS.mayCreate(parent,name);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.mknod)throw new FS.ErrnoError(63);return parent.node_ops.mknod(parent,name,mode,dev)},create:(path,mode)=>(mode=mode!==0[0]?mode:438,mode&=4095,mode|=32768,FS.mknod(path,mode,0)),mkdir:(path,mode)=>(mode=mode!==0[0]?mode:511,mode&=511|512,mode|=16384,FS.mknod(path,mode,0)),mkdirTree:(path,mode)=>{for(var dirs=path.split("/"),d="",i=0;i<dirs.length;++i){if(!dirs[i])continue;d+="/"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(e.errno!=20)throw e}}},mkdev:(path,mode,dev)=>(typeof dev=="undefined"&&(dev=mode,mode=438),mode|=8192,FS.mknod(path,mode,dev)),symlink:(oldpath,newpath)=>{if(!PATH_FS.resolve(oldpath))throw new FS.ErrnoError(44);var lookup=FS.lookupPath(newpath,{parent:!0}),parent=lookup.node;if(!parent)throw new FS.ErrnoError(44);var newname=PATH.basename(newpath),errCode=FS.mayCreate(parent,newname);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.symlink)throw new FS.ErrnoError(63);return parent.node_ops.symlink(parent,newname,oldpath)},rename:(old_path,new_path)=>{var new_node,old_dirname=PATH.dirname(old_path),new_dirname=PATH.dirname(new_path),old_name=PATH.basename(old_path),new_name=PATH.basename(new_path),lookup=FS.lookupPath(old_path,{parent:!0}),old_dir=lookup.node,lookup=FS.lookupPath(new_path,{parent:!0}),new_dir=lookup.node;if(!old_dir||!new_dir)throw new FS.ErrnoError(44);if(old_dir.mount!==new_dir.mount)throw new FS.ErrnoError(75);var old_node=FS.lookupNode(old_dir,old_name),relative=PATH_FS.relative(old_path,new_dirname);if(relative.charAt(0)!==".")throw new FS.ErrnoError(28);if(relative=PATH_FS.relative(new_path,old_dirname),relative.charAt(0)!==".")throw new FS.ErrnoError(55);try{new_node=FS.lookupNode(new_dir,new_name)}catch{}if(old_node===new_node)return;var isdir=FS.isDir(old_node.mode),errCode=FS.mayDelete(old_dir,old_name,isdir);if(errCode)throw new FS.ErrnoError(errCode);if(errCode=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name),errCode)throw new FS.ErrnoError(errCode);if(!old_dir.node_ops.rename)throw new FS.ErrnoError(63);if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node))throw new FS.ErrnoError(10);if(new_dir!==old_dir&&(errCode=FS.nodePermissions(old_dir,"w"),errCode))throw new FS.ErrnoError(errCode);FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}},rmdir:path=>{var lookup=FS.lookupPath(path,{parent:!0}),parent=lookup.node,name=PATH.basename(path),node=FS.lookupNode(parent,name),errCode=FS.mayDelete(parent,name,!0);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.rmdir)throw new FS.ErrnoError(63);if(FS.isMountpoint(node))throw new FS.ErrnoError(10);parent.node_ops.rmdir(parent,name),FS.destroyNode(node)},readdir:path=>{var lookup=FS.lookupPath(path,{follow:!0}),node=lookup.node;if(!node.node_ops.readdir)throw new FS.ErrnoError(54);return node.node_ops.readdir(node)},unlink:path=>{var lookup=FS.lookupPath(path,{parent:!0}),parent=lookup.node;if(!parent)throw new FS.ErrnoError(44);var name=PATH.basename(path),node=FS.lookupNode(parent,name),errCode=FS.mayDelete(parent,name,!1);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.unlink)throw new FS.ErrnoError(63);if(FS.isMountpoint(node))throw new FS.ErrnoError(10);parent.node_ops.unlink(parent,name),FS.destroyNode(node)},readlink:path=>{var lookup=FS.lookupPath(path),link=lookup.node;if(!link)throw new FS.ErrnoError(44);if(!link.node_ops.readlink)throw new FS.ErrnoError(28);return PATH_FS.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat:(path,dontFollow)=>{var lookup=FS.lookupPath(path,{follow:!dontFollow}),node=lookup.node;if(!node)throw new FS.ErrnoError(44);if(!node.node_ops.getattr)throw new FS.ErrnoError(63);return node.node_ops.getattr(node)},lstat:path=>FS.stat(path,!0),chmod:(path,mode,dontFollow)=>{if(typeof path=="string"){var node,lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else node=path;if(!node.node_ops.setattr)throw new FS.ErrnoError(63);node.node_ops.setattr(node,{mode:mode&4095|node.mode&~4095,timestamp:Date.now()})},lchmod:(path,mode)=>{FS.chmod(path,mode,!0)},fchmod:(fd,mode)=>{var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);FS.chmod(stream.node,mode)},chown:(path,uid,gid,dontFollow)=>{if(typeof path=="string"){var node,lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else node=path;if(!node.node_ops.setattr)throw new FS.ErrnoError(63);node.node_ops.setattr(node,{timestamp:Date.now()})},lchown:(path,uid,gid)=>{FS.chown(path,uid,gid,!0)},fchown:(fd,uid,gid)=>{var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);FS.chown(stream.node,uid,gid)},truncate:(path,len)=>{if(len<0)throw new FS.ErrnoError(28);if(typeof path=="string"){var lookup=FS.lookupPath(path,{follow:!0});node=lookup.node}else node=path;if(!node.node_ops.setattr)throw new FS.ErrnoError(63);if(FS.isDir(node.mode))throw new FS.ErrnoError(31);if(!FS.isFile(node.mode))throw new FS.ErrnoError(28);var node,errCode=FS.nodePermissions(node,"w");if(errCode)throw new FS.ErrnoError(errCode);node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate:(fd,len)=>{var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);if((stream.flags&2097155)===0)throw new FS.ErrnoError(28);FS.truncate(stream.node,len)},utime:(path,atime,mtime)=>{var lookup=FS.lookupPath(path,{follow:!0}),node=lookup.node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open:(path,flags,mode)=>{if(path==="")throw new FS.ErrnoError(44);if(flags=typeof flags=="string"?FS_modeStringToFlags(flags):flags,mode=typeof mode=="undefined"?438:mode,flags&64?mode=mode&4095|32768:mode=0,typeof path=="object")node=path;else{path=PATH.normalize(path);try{var lookup=FS.lookupPath(path,{follow:!(flags&131072)});node=lookup.node}catch{}}var node,created=!1;if(flags&64)if(node){if(flags&128)throw new FS.ErrnoError(20)}else node=FS.mknod(path,mode,0),created=!0;if(!node)throw new FS.ErrnoError(44);if(FS.isChrdev(node.mode)&&(flags&=~512),flags&65536&&!FS.isDir(node.mode))throw new FS.ErrnoError(54);if(!created){var errCode=FS.mayOpen(node,flags);if(errCode)throw new FS.ErrnoError(errCode)}flags&512&&!created&&FS.truncate(node,0),flags&=~(128|512|131072);var stream=FS.createStream({node,path:FS.getPath(node),flags,seekable:!0,position:0,stream_ops:node.stream_ops,ungotten:[],error:!1});return stream.stream_ops.open&&stream.stream_ops.open(stream),Module.logReadFiles&&!(flags&1)&&(FS.readFiles||(FS.readFiles={}),path in FS.readFiles||(FS.readFiles[path]=1)),stream},close:stream=>{if(FS.isClosed(stream))throw new FS.ErrnoError(8);stream.getdents&&(stream.getdents=null);try{stream.stream_ops.close&&stream.stream_ops.close(stream)}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed:stream=>stream.fd===null,llseek:(stream,offset,whence)=>{if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(!stream.seekable||!stream.stream_ops.llseek)throw new FS.ErrnoError(70);if(whence!=0&&whence!=1&&whence!=2)throw new FS.ErrnoError(28);return stream.position=stream.stream_ops.llseek(stream,offset,whence),stream.ungotten=[],stream.position},read:(stream,buffer,offset,length,position)=>{if(length<0||position<0)throw new FS.ErrnoError(28);if(FS.isClosed(stream))throw new FS.ErrnoError(8);if((stream.flags&2097155)===1)throw new FS.ErrnoError(8);if(FS.isDir(stream.node.mode))throw new FS.ErrnoError(31);if(!stream.stream_ops.read)throw new FS.ErrnoError(28);var seeking=typeof position!="undefined";if(seeking){if(!stream.seekable)throw new FS.ErrnoError(70)}else position=stream.position;var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);return seeking||(stream.position+=bytesRead),bytesRead},write:(stream,buffer,offset,length,position,canOwn)=>{if(length<0||position<0)throw new FS.ErrnoError(28);if(FS.isClosed(stream))throw new FS.ErrnoError(8);if((stream.flags&2097155)===0)throw new FS.ErrnoError(8);if(FS.isDir(stream.node.mode))throw new FS.ErrnoError(31);if(!stream.stream_ops.write)throw new FS.ErrnoError(28);stream.seekable&&stream.flags&1024&&FS.llseek(stream,0,2);var seeking=typeof position!="undefined";if(seeking){if(!stream.seekable)throw new FS.ErrnoError(70)}else position=stream.position;var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);return seeking||(stream.position+=bytesWritten),bytesWritten},allocate:(stream,offset,length)=>{if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(offset<0||length<=0)throw new FS.ErrnoError(28);if((stream.flags&2097155)===0)throw new FS.ErrnoError(8);if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode))throw new FS.ErrnoError(43);if(!stream.stream_ops.allocate)throw new FS.ErrnoError(138);stream.stream_ops.allocate(stream,offset,length)},mmap:(stream,length,position,prot,flags)=>{if((prot&2)!==0&&(flags&2)===0&&(stream.flags&2097155)!==2)throw new FS.ErrnoError(2);if((stream.flags&2097155)===1)throw new FS.ErrnoError(2);if(!stream.stream_ops.mmap)throw new FS.ErrnoError(43);return stream.stream_ops.mmap(stream,length,position,prot,flags)},msync:(stream,buffer,offset,length,mmapFlags)=>stream.stream_ops.msync?stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags):0,munmap:stream=>0,ioctl:(stream,cmd,arg)=>{if(!stream.stream_ops.ioctl)throw new FS.ErrnoError(59);return stream.stream_ops.ioctl(stream,cmd,arg)},readFile:(path,opts={})=>{if(opts.flags=opts.flags||0,opts.encoding=opts.encoding||"binary",opts.encoding!=="utf8"&&opts.encoding!=="binary")throw new Error(`Invalid encoding type "${opts.encoding}"`);var ret,stream=FS.open(path,opts.flags),stat=FS.stat(path),length=stat.size,buf=new Uint8Array(length);return FS.read(stream,buf,0,length,0),opts.encoding==="utf8"?ret=UTF8ArrayToString(buf,0):opts.encoding==="binary"&&(ret=buf),FS.close(stream),ret},writeFile:(path,data,opts={})=>{opts.flags=opts.flags||577;var stream=FS.open(path,opts.flags,opts.mode);if(typeof data=="string"){var buf=new Uint8Array(lengthBytesUTF8(data)+1),actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,0[0],opts.canOwn)}else if(ArrayBuffer.isView(data))FS.write(stream,data,0,data.byteLength,0[0],opts.canOwn);else throw new Error("Unsupported data type");FS.close(stream)},cwd:()=>FS.currentPath,chdir:path=>{var lookup=FS.lookupPath(path,{follow:!0});if(lookup.node===null)throw new FS.ErrnoError(44);if(!FS.isDir(lookup.node.mode))throw new FS.ErrnoError(54);var errCode=FS.nodePermissions(lookup.node,"x");if(errCode)throw new FS.ErrnoError(errCode);FS.currentPath=lookup.path},createDefaultDirectories:()=>{FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:()=>{FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:()=>0,write:(stream,buffer,offset,length)=>length}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0));var randomBuffer=new Uint8Array(1024),randomLeft=0,randomByte=()=>(randomLeft===0&&(randomLeft=randomFill(randomBuffer).byteLength),randomBuffer[--randomLeft]);FS.createDevice("/dev","random",randomByte),FS.createDevice("/dev","urandom",randomByte),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{FS.mkdir("/proc");var proc_self=FS.mkdir("/proc/self");FS.mkdir("/proc/self/fd"),FS.mount({mount:()=>{var node=FS.createNode(proc_self,"fd",16384|511,73);return node.node_ops={lookup:(parent,name)=>{var ret,fd=+name,stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);return ret={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>stream.path}},ret.parent=ret,ret}},node}},{},"/proc/self/fd")},createStandardStreams:()=>{Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr");var stdin=FS.open("/dev/stdin",0),stdout=FS.open("/dev/stdout",1),stderr=FS.open("/dev/stderr",1)},ensureErrnoError:()=>{if(FS.ErrnoError)return;FS.ErrnoError=function(errno,node){this.name="ErrnoError",this.node=node,this.setErrno=function(errno){this.errno=errno},this.setErrno(errno),this.message="FS error"},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[44].forEach(code=>{FS.genericErrors[code]=new FS.ErrnoError(code),FS.genericErrors[code].stack="<generic error, no stack>"})},staticInit:()=>{FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS,IDBFS}},init:(input,output,error)=>{FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=input||Module.stdin,Module.stdout=output||Module.stdout,Module.stderr=error||Module.stderr,FS.createStandardStreams()},quit:()=>{FS.init.initialized=!1,_fflush(0);for(i=0;i<FS.streams.length;i++){var i,stream=FS.streams[i];if(!stream)continue;FS.close(stream)}},findObject:(path,dontResolveLastLink)=>{var ret=FS.analyzePath(path,dontResolveLastLink);return ret.exists?ret.object:null},analyzePath:(path,dontResolveLastLink)=>{try{var ret,lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});path=lookup.path}catch{}ret={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:!0});ret.parentExists=!0,ret.parentPath=lookup.path,ret.parentObject=lookup.node,ret.name=PATH.basename(path),lookup=FS.lookupPath(path,{follow:!dontResolveLastLink}),ret.exists=!0,ret.path=lookup.path,ret.object=lookup.node,ret.name=lookup.node.name,ret.isRoot=lookup.path==="/"}catch(e){ret.error=e.errno}return ret},createPath:(parent,path)=>{parent=typeof parent=="string"?parent:FS.getPath(parent);for(var parts=path.split("/").reverse();parts.length;){var part=parts.pop();if(!part)continue;var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch{}parent=current}return current},createFile:(parent,name,properties,canRead,canWrite)=>{var path=PATH.join2(typeof parent=="string"?parent:FS.getPath(parent),name),mode=FS_getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile:(parent,name,data,canRead,canWrite,canOwn)=>{var path=name;parent&&(parent=typeof parent=="string"?parent:FS.getPath(parent),path=name?PATH.join2(parent,name):parent);var mode=FS_getMode(canRead,canWrite),node=FS.create(path,mode);if(data){if(typeof data=="string"){for(var arr=new Array(data.length),i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,mode|146);var stream=FS.open(node,577);FS.write(stream,data,0,data.length,0,canOwn),FS.close(stream),FS.chmod(node,mode)}return node},createDevice:(parent,name,input,output)=>{var dev,path=PATH.join2(typeof parent=="string"?parent:FS.getPath(parent),name),mode=FS_getMode(!!input,!!output);return FS.createDevice.major||(FS.createDevice.major=64),dev=FS.makedev(FS.createDevice.major++,0),FS.registerDevice(dev,{open:stream=>{stream.seekable=!1},close:stream=>{output&&output.buffer&&output.buffer.length&&output(10)},read:(stream,buffer,offset,length)=>{for(var result,bytesRead=0,i=0;i<length;i++){try{result=input()}catch{throw new FS.ErrnoError(29)}if(result===0[0]&&bytesRead===0)throw new FS.ErrnoError(6);if(result==null)break;bytesRead++,buffer[offset+i]=result}return bytesRead&&(stream.node.timestamp=Date.now()),bytesRead},write:(stream,buffer,offset,length)=>{for(var i=0;i<length;i++)try{output(buffer[offset+i])}catch{throw new FS.ErrnoError(29)}return length&&(stream.node.timestamp=Date.now()),i}}),FS.mkdev(path,mode,dev)},forceLoadFile:obj=>{if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return!0;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(read_)try{obj.contents=intArrayFromString(read_(obj.url),!0),obj.usedBytes=obj.contents.length}catch{throw new FS.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(parent,name,url,canRead,canWrite)=>{function LazyUint8Array(){this.lengthKnown=!1,this.chunks=[]}if(LazyUint8Array.prototype.get=function(idx){if(idx>this.length-1||idx<0)return 0[0];var chunkOffset=idx%this.chunkSize,chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]},LazyUint8Array.prototype.setDataGetter=function(getter){this.getter=getter},LazyUint8Array.prototype.cacheLength=function(){if(xhr=new XMLHttpRequest,xhr.open("HEAD",url,!1),xhr.send(null),!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error("Couldn't load "+url+". Status: "+xhr.status);var xhr,header,datalength=+xhr.getResponseHeader("Content-length"),hasByteServing=(header=xhr.getResponseHeader("Accept-Ranges"))&&header==="bytes",usesGzip=(header=xhr.getResponseHeader("Content-Encoding"))&&header==="gzip",chunkSize=1024*1024;hasByteServing||(chunkSize=datalength);var doXHR=(from,to)=>{if(from>to)throw new Error("invalid range ("+from+", "+to+") or no bytes requested!");if(to>datalength-1)throw new Error("only "+datalength+" bytes available! programmer error!");var xhr=new XMLHttpRequest;if(xhr.open("GET",url,!1),datalength!==chunkSize&&xhr.setRequestHeader("Range","bytes="+from+"-"+to),xhr.responseType="arraybuffer",xhr.overrideMimeType&&xhr.overrideMimeType("text/plain; charset=x-user-defined"),xhr.send(null),!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error("Couldn't load "+url+". Status: "+xhr.status);return xhr.response!==0[0]?new Uint8Array(xhr.response||[]):intArrayFromString(xhr.responseText||"",!0)},lazyArray=this;lazyArray.setDataGetter(chunkNum=>{var start=chunkNum*chunkSize,end=(chunkNum+1)*chunkSize-1,end=Math.min(end,datalength-1);if(typeof lazyArray.chunks[chunkNum]=="undefined"&&(lazyArray.chunks[chunkNum]=doXHR(start,end)),typeof lazyArray.chunks[chunkNum]=="undefined")throw new Error("doXHR failed!");return lazyArray.chunks[chunkNum]}),(usesGzip||!datalength)&&(chunkSize=datalength=1,datalength=this.getter(0).length,chunkSize=datalength,out("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=datalength,this._chunkSize=chunkSize,this.lengthKnown=!0},typeof XMLHttpRequest!="undefined"){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var properties={isDevice:!1,contents:lazyArray}}else var properties={isDevice:!1,url};var node=FS.createFile(parent,name,properties,canRead,canWrite);properties.contents?node.contents=properties.contents:properties.url&&(node.contents=null,node.url=properties.url),Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={},keys=Object.keys(node.stream_ops);keys.forEach(key=>{var fn=node.stream_ops[key];stream_ops[key]=function(){return FS.forceLoadFile(node),fn.apply(null,arguments)}});function writeChunks(stream,buffer,offset,length,position){var i,contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);if(contents.slice)for(i=0;i<size;i++)buffer[offset+i]=contents[position+i];else for(i=0;i<size;i++)buffer[offset+i]=contents.get(position+i);return size}return stream_ops.read=(stream,buffer,offset,length,position)=>(FS.forceLoadFile(node),writeChunks(stream,buffer,offset,length,position)),stream_ops.mmap=(stream,length,position)=>{FS.forceLoadFile(node);var ptr=mmapAlloc(length);if(!ptr)throw new FS.ErrnoError(48);return writeChunks(stream,HEAP8,ptr,length,position),{ptr,allocated:!0}},node.stream_ops=stream_ops,node}};function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(dirfd,path,allowEmpty){if(PATH.isAbs(path))return path;if(dirfd===-100)dir=FS.cwd();else{var dir,dirstream=SYSCALLS.getStreamFromFD(dirfd);dir=dirstream.path}if(path.length==0){if(!allowEmpty)throw new FS.ErrnoError(44);return dir}return PATH.join2(dir,path)},doStat:function(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}HEAP32[buf>>2]=stat.dev,HEAP32[buf+8>>2]=stat.ino,HEAP32[buf+12>>2]=stat.mode,HEAPU32[buf+16>>2]=stat.nlink,HEAP32[buf+20>>2]=stat.uid,HEAP32[buf+24>>2]=stat.gid,HEAP32[buf+28>>2]=stat.rdev,tempI64=[stat.size>>>0,(tempDouble=stat.size,+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+40>>2]=tempI64[0],HEAP32[buf+44>>2]=tempI64[1],HEAP32[buf+48>>2]=4096,HEAP32[buf+52>>2]=stat.blocks;var atime=stat.atime.getTime(),mtime=stat.mtime.getTime(),ctime=stat.ctime.getTime();return tempI64=[Math.floor(atime/1e3)>>>0,(tempDouble=Math.floor(atime/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+56>>2]=tempI64[0],HEAP32[buf+60>>2]=tempI64[1],HEAPU32[buf+64>>2]=atime%1e3*1e3,tempI64=[Math.floor(mtime/1e3)>>>0,(tempDouble=Math.floor(mtime/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+72>>2]=tempI64[0],HEAP32[buf+76>>2]=tempI64[1],HEAPU32[buf+80>>2]=mtime%1e3*1e3,tempI64=[Math.floor(ctime/1e3)>>>0,(tempDouble=Math.floor(ctime/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+88>>2]=tempI64[0],HEAP32[buf+92>>2]=tempI64[1],HEAPU32[buf+96>>2]=ctime%1e3*1e3,tempI64=[stat.ino>>>0,(tempDouble=stat.ino,+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+104>>2]=tempI64[0],HEAP32[buf+108>>2]=tempI64[1],0},doMsync:function(addr,stream,len,flags,offset){if(!FS.isFile(stream.node.mode))throw new FS.ErrnoError(43);if(flags&2)return 0;var buffer=HEAPU8.slice(addr,addr+len);FS.msync(stream,buffer,offset,len,flags)},varargs:0[0],get:function(){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(ptr){var ret=UTF8ToString(ptr);return ret},getStreamFromFD:function(fd){var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);return stream}};function ___syscall__newselect(nfds,readfds,writefds,exceptfds){try{for(var total=0,srcReadLow=readfds?HEAP32[readfds>>2]:0,srcReadHigh=readfds?HEAP32[readfds+4>>2]:0,srcWriteLow=writefds?HEAP32[writefds>>2]:0,srcWriteHigh=writefds?HEAP32[writefds+4>>2]:0,srcExceptLow=exceptfds?HEAP32[exceptfds>>2]:0,srcExceptHigh=exceptfds?HEAP32[exceptfds+4>>2]:0,dstReadLow=0,dstReadHigh=0,dstWriteLow=0,dstWriteHigh=0,dstExceptLow=0,dstExceptHigh=0,allLow=(readfds?HEAP32[readfds>>2]:0)|(writefds?HEAP32[writefds>>2]:0)|(exceptfds?HEAP32[exceptfds>>2]:0),allHigh=(readfds?HEAP32[readfds+4>>2]:0)|(writefds?HEAP32[writefds+4>>2]:0)|(exceptfds?HEAP32[exceptfds+4>>2]:0),check=function(fd,low,high,val){return fd<32?low&val:high&val},fd=0;fd<nfds;fd++){var mask=1<<fd%32;if(!check(fd,allLow,allHigh,mask))continue;var stream=SYSCALLS.getStreamFromFD(fd),flags=SYSCALLS.DEFAULT_POLLMASK;stream.stream_ops.poll&&(flags=stream.stream_ops.poll(stream)),flags&1&&check(fd,srcReadLow,srcReadHigh,mask)&&(fd<32?dstReadLow=dstReadLow|mask:dstReadHigh=dstReadHigh|mask,total++),flags&4&&check(fd,srcWriteLow,srcWriteHigh,mask)&&(fd<32?dstWriteLow=dstWriteLow|mask:dstWriteHigh=dstWriteHigh|mask,total++),flags&2&&check(fd,srcExceptLow,srcExceptHigh,mask)&&(fd<32?dstExceptLow=dstExceptLow|mask:dstExceptHigh=dstExceptHigh|mask,total++)}return readfds&&(HEAP32[readfds>>2]=dstReadLow,HEAP32[readfds+4>>2]=dstReadHigh),writefds&&(HEAP32[writefds>>2]=dstWriteLow,HEAP32[writefds+4>>2]=dstWriteHigh),exceptfds&&(HEAP32[exceptfds>>2]=dstExceptLow,HEAP32[exceptfds+4>>2]=dstExceptHigh),total}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}var SOCKFS={mount:function(){return Module.websocket=Module.websocket&&"object"==typeof Module.websocket?Module.websocket:{},Module.websocket._callbacks={},Module.websocket.on=function(event,callback){return"function"==typeof callback&&(this._callbacks[event]=callback),this},Module.websocket.emit=function(event,param){"function"==typeof this._callbacks[event]&&this._callbacks[event].call(this,param)},FS.createNode(null,"/",16384|511,0)},createSocket:function(family,type,protocol){type&=~526336;var streaming=type==1;if(streaming&&protocol&&protocol!=6)throw new FS.ErrnoError(66);var sock={family,type,protocol,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:SOCKFS.websocket_sock_ops},name=SOCKFS.nextname(),node=FS.createNode(SOCKFS.root,name,49152,0);node.sock=sock;var stream=FS.createStream({path:name,node,flags:2,seekable:!1,stream_ops:SOCKFS.stream_ops});return sock.stream=stream,sock},getSocket:function(fd){var stream=FS.getStream(fd);return!stream||!FS.isSocket(stream.node.mode)?null:stream.node.sock},stream_ops:{poll:function(stream){var sock=stream.node.sock;return sock.sock_ops.poll(sock)},ioctl:function(stream,request,varargs){var sock=stream.node.sock;return sock.sock_ops.ioctl(sock,request,varargs)},read:function(stream,buffer,offset,length){var sock=stream.node.sock,msg=sock.sock_ops.recvmsg(sock,length);return msg?(buffer.set(msg.buffer,offset),msg.buffer.length):0},write:function(stream,buffer,offset,length){var sock=stream.node.sock;return sock.sock_ops.sendmsg(sock,buffer,offset,length)},close:function(stream){var sock=stream.node.sock;sock.sock_ops.close(sock)}},nextname:function(){return SOCKFS.nextname.current||(SOCKFS.nextname.current=0),"socket["+SOCKFS.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(sock,addr,port){if(typeof addr=="object"&&(ws=addr,addr=null,port=null),ws)if(ws._socket)addr=ws._socket.remoteAddress,port=ws._socket.remotePort;else{var result=/ws[s]?:\/\/([^:]+):(\d+)/.exec(ws.url);if(!result)throw new Error("WebSocket URL must be in the format ws(s)://address:port");addr=result[1],port=parseInt(result[2],10)}else try{var ws,WebSocketConstructor,runtimeConfig=Module.websocket&&"object"==typeof Module.websocket,url="ws:#".replace("#","//");if(runtimeConfig&&"string"==typeof Module.websocket.url&&(url=Module.websocket.url),url==="ws://"||url==="wss://"){var parts=addr.split("/");url=url+parts[0]+":"+port+"/"+parts.slice(1).join("/")}var subProtocols="binary";runtimeConfig&&"string"==typeof Module.websocket.subprotocol&&(subProtocols=Module.websocket.subprotocol);var opts=0[0];subProtocols!=="null"&&(subProtocols=subProtocols.replace(/^ +| +$/g,"").split(/ *, */),opts=subProtocols),runtimeConfig&&null===Module.websocket.subprotocol&&(subProtocols="null",opts=0[0]),WebSocketConstructor=WebSocket,ws=new WebSocketConstructor(url,opts),ws.binaryType="arraybuffer"}catch{throw new FS.ErrnoError(23)}var peer={addr,port,socket:ws,dgram_send_queue:[]};return SOCKFS.websocket_sock_ops.addPeer(sock,peer),SOCKFS.websocket_sock_ops.handlePeerEvents(sock,peer),sock.type===2&&typeof sock.sport!="undefined"&&peer.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(sock.sport&65280)>>8,sock.sport&255])),peer},getPeer:function(sock,addr,port){return sock.peers[addr+":"+port]},addPeer:function(sock,peer){sock.peers[peer.addr+":"+peer.port]=peer},removePeer:function(sock,peer){delete sock.peers[peer.addr+":"+peer.port]},handlePeerEvents:function(sock,peer){var first=!0,handleOpen=function(){Module.websocket.emit("open",sock.stream.fd);try{for(var queued=peer.dgram_send_queue.shift();queued;)peer.socket.send(queued),queued=peer.dgram_send_queue.shift()}catch{peer.socket.close()}};function handleMessage(data){if(typeof data=="string"){var encoder=new TextEncoder;data=encoder.encode(data)}else{if(assert(data.byteLength!==0[0]),data.byteLength==0)return;data=new Uint8Array(data)}var wasfirst=first;if(first=!1,wasfirst&&data.length===10&&data[0]===255&&data[1]===255&&data[2]===255&&data[3]===255&&data[4]==="p".charCodeAt(0)&&data[5]==="o".charCodeAt(0)&&data[6]==="r".charCodeAt(0)&&data[7]==="t".charCodeAt(0)){var newport=data[8]<<8|data[9];SOCKFS.websocket_sock_ops.removePeer(sock,peer),peer.port=newport,SOCKFS.websocket_sock_ops.addPeer(sock,peer);return}sock.recv_queue.push({addr:peer.addr,port:peer.port,data}),Module.websocket.emit("message",sock.stream.fd)}ENVIRONMENT_IS_NODE?(peer.socket.on("open",handleOpen),peer.socket.on("message",function(data,isBinary){if(!isBinary)return;handleMessage(new Uint8Array(data).buffer)}),peer.socket.on("close",function(){Module.websocket.emit("close",sock.stream.fd)}),peer.socket.on("error",function(){sock.error=14,Module.websocket.emit("error",[sock.stream.fd,sock.error,"ECONNREFUSED: Connection refused"])})):(peer.socket.onopen=handleOpen,peer.socket.onclose=function(){Module.websocket.emit("close",sock.stream.fd)},peer.socket.onmessage=function(event){handleMessage(event.data)},peer.socket.onerror=function(){sock.error=14,Module.websocket.emit("error",[sock.stream.fd,sock.error,"ECONNREFUSED: Connection refused"])})},poll:function(sock){if(sock.type===1&&sock.server)return sock.pending.length?64|1:0;var mask=0,dest=sock.type===1?SOCKFS.websocket_sock_ops.getPeer(sock,sock.daddr,sock.dport):null;return(sock.recv_queue.length||!dest||dest&&dest.socket.readyState===dest.socket.CLOSING||dest&&dest.socket.readyState===dest.socket.CLOSED)&&(mask|=64|1),(!dest||dest&&dest.socket.readyState===dest.socket.OPEN)&&(mask|=4),(dest&&dest.socket.readyState===dest.socket.CLOSING||dest&&dest.socket.readyState===dest.socket.CLOSED)&&(mask|=16),mask},ioctl:function(sock,request,arg){switch(request){case 21531:var bytes=0;return sock.recv_queue.length&&(bytes=sock.recv_queue[0].data.length),HEAP32[arg>>2]=bytes,0;default:return 28}},close:function(sock){if(sock.server){try{sock.server.close()}catch{}sock.server=null}for(var peers=Object.keys(sock.peers),i=0;i<peers.length;i++){var peer=sock.peers[peers[i]];try{peer.socket.close()}catch{}SOCKFS.websocket_sock_ops.removePeer(sock,peer)}return 0},bind:function(sock,addr,port){if(typeof sock.saddr!="undefined"||typeof sock.sport!="undefined")throw new FS.ErrnoError(28);if(sock.saddr=addr,sock.sport=port,sock.type===2){sock.server&&(sock.server.close(),sock.server=null);try{sock.sock_ops.listen(sock,0)}catch(e){if(e.name!=="ErrnoError")throw e;if(e.errno!==138)throw e}}},connect:function(sock,addr,port){if(sock.server)throw new FS.ErrnoError(138);if(typeof sock.daddr!="undefined"&&typeof sock.dport!="undefined"){var dest=SOCKFS.websocket_sock_ops.getPeer(sock,sock.daddr,sock.dport);if(dest)throw dest.socket.readyState===dest.socket.CONNECTING?new FS.ErrnoError(7):new FS.ErrnoError(30)}var peer=SOCKFS.websocket_sock_ops.createPeer(sock,addr,port);throw sock.daddr=peer.addr,sock.dport=peer.port,new FS.ErrnoError(26)},listen:function(){if(!ENVIRONMENT_IS_NODE)throw new FS.ErrnoError(138)},accept:function(listensock){if(!listensock.server||!listensock.pending.length)throw new FS.ErrnoError(28);var newsock=listensock.pending.shift();return newsock.stream.flags=listensock.stream.flags,newsock},getname:function(sock,peer){var addr,port;if(peer){if(sock.daddr===0[0]||sock.dport===0[0])throw new FS.ErrnoError(53);addr=sock.daddr,port=sock.dport}else addr=sock.saddr||0,port=sock.sport||0;return{addr,port}},sendmsg:function(sock,buffer,offset,length,addr,port){if(sock.type===2){if((addr===0[0]||port===0[0])&&(addr=sock.daddr,port=sock.dport),addr===0[0]||port===0[0])throw new FS.ErrnoError(17)}else addr=sock.daddr,port=sock.dport;var data,dest=SOCKFS.websocket_sock_ops.getPeer(sock,addr,port);if(sock.type===1){if(!dest||dest.socket.readyState===dest.socket.CLOSING||dest.socket.readyState===dest.socket.CLOSED)throw new FS.ErrnoError(53);if(dest.socket.readyState===dest.socket.CONNECTING)throw new FS.ErrnoError(6)}if(ArrayBuffer.isView(buffer)&&(offset+=buffer.byteOffset,buffer=buffer.buffer),data=buffer.slice(offset,offset+length),sock.type===2&&(!dest||dest.socket.readyState!==dest.socket.OPEN))return(!dest||dest.socket.readyState===dest.socket.CLOSING||dest.socket.readyState===dest.socket.CLOSED)&&(dest=SOCKFS.websocket_sock_ops.createPeer(sock,addr,port)),dest.dgram_send_queue.push(data),length;try{return dest.socket.send(data),length}catch{throw new FS.ErrnoError(28)}},recvmsg:function(sock,length){if(sock.type===1&&sock.server)throw new FS.ErrnoError(53);var queued=sock.recv_queue.shift();if(!queued){if(sock.type===1){var dest=SOCKFS.websocket_sock_ops.getPeer(sock,sock.daddr,sock.dport);if(!dest)throw new FS.ErrnoError(53);if(dest.socket.readyState===dest.socket.CLOSING||dest.socket.readyState===dest.socket.CLOSED)return null;throw new FS.ErrnoError(6)}throw new FS.ErrnoError(6)}var queuedLength=queued.data.byteLength||queued.data.length,queuedOffset=queued.data.byteOffset||0,queuedBuffer=queued.data.buffer||queued.data,bytesRead=Math.min(length,queuedLength),res={buffer:new Uint8Array(queuedBuffer,queuedOffset,bytesRead),addr:queued.addr,port:queued.port};if(sock.type===1&&bytesRead<queuedLength){var bytesRemaining=queuedLength-bytesRead;queued.data=new Uint8Array(queuedBuffer,queuedOffset+bytesRead,bytesRemaining),sock.recv_queue.unshift(queued)}return res}}};function getSocketFromFD(fd){var socket=SOCKFS.getSocket(fd);if(!socket)throw new FS.ErrnoError(8);return socket}function setErrNo(value){return HEAP32[___errno_location()>>2]=value,value}function inetPton4(str){for(b=str.split("."),i=0;i<4;i++){var i,b,tmp=+b[i];if(tmp!=tmp)return null;b[i]=tmp}return(b[0]|b[1]<<8|b[2]<<16|b[3]<<24)>>>0}function jstoi_q(str){return parseInt(str)}function inetPton6(str){var words,w,offset,z,valid6regx=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,parts=[];if(!valid6regx.test(str))return null;if(str==="::")return[0,0,0,0,0,0,0,0];str.startsWith("::")?str=str.replace("::","Z:"):str=str.replace("::",":Z:"),str.indexOf(".")>0?(str=str.replace(new RegExp("[.]","g"),":"),words=str.split(":"),words[words.length-4]=jstoi_q(words[words.length-4])+jstoi_q(words[words.length-3])*256,words[words.length-3]=jstoi_q(words[words.length-2])+jstoi_q(words[words.length-1])*256,words=words.slice(0,words.length-2)):words=str.split(":"),offset=0,z=0;for(w=0;w<words.length;w++)if(typeof words[w]=="string")if(words[w]==="Z"){for(z=0;z<8-words.length+1;z++)parts[w+z]=0;offset=z-1}else parts[w+offset]=_htons(parseInt(words[w],16));else parts[w+offset]=words[w];return[parts[1]<<16|parts[0],parts[3]<<16|parts[2],parts[5]<<16|parts[4],parts[7]<<16|parts[6]]}function writeSockaddr(sa,family,addr,port,addrlen){switch(family){case 2:addr=inetPton4(addr),zeroMemory(sa,16),addrlen&&(HEAP32[addrlen>>2]=16),HEAP16[sa>>1]=family,HEAP32[sa+4>>2]=addr,HEAP16[sa+2>>1]=_htons(port);break;case 10:addr=inetPton6(addr),zeroMemory(sa,28),addrlen&&(HEAP32[addrlen>>2]=28),HEAP32[sa>>2]=family,HEAP32[sa+8>>2]=addr[0],HEAP32[sa+12>>2]=addr[1],HEAP32[sa+16>>2]=addr[2],HEAP32[sa+20>>2]=addr[3],HEAP16[sa+2>>1]=_htons(port);break;default:return 5}return 0}DNS={address_map:{id:1,addrs:{},names:{}},lookup_name:function(name){var addr,id,res=inetPton4(name);return res!==null?name:(res=inetPton6(name),res!==null?name:(DNS.address_map.addrs[name]?addr=DNS.address_map.addrs[name]:(id=DNS.address_map.id++,assert(id<65535,"exceeded max address mappings of 65535"),addr="172.29."+(id&255)+"."+(id&65280),DNS.address_map.names[addr]=name,DNS.address_map.addrs[name]=addr),addr))},lookup_addr:function(addr){return DNS.address_map.names[addr]?DNS.address_map.names[addr]:null}};function ___syscall_accept4(fd,addr,addrlen){try{var sock=getSocketFromFD(fd),newsock=sock.sock_ops.accept(sock);if(addr)var errno=writeSockaddr(addr,newsock.family,DNS.lookup_name(newsock.daddr),newsock.dport,addrlen);return newsock.stream.fd}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function inetNtop4(addr){return(addr&255)+"."+(addr>>8&255)+"."+(addr>>16&255)+"."+(addr>>24&255)}function inetNtop6(ints){var str="",word=0,longest=0,lastzero=0,zstart=0,len=0,i=0,parts=[ints[0]&65535,ints[0]>>16,ints[1]&65535,ints[1]>>16,ints[2]&65535,ints[2]>>16,ints[3]&65535,ints[3]>>16],hasipv4=!0,v4part="";for(i=0;i<5;i++)if(parts[i]!==0){hasipv4=!1;break}if(hasipv4){if(v4part=inetNtop4(parts[6]|parts[7]<<16),parts[5]===-1)return str="::ffff:",str+=v4part,str;if(parts[5]===0)return str="::",v4part==="0.0.0.0"&&(v4part=""),v4part==="0.0.0.1"&&(v4part="1"),str+=v4part,str}for(word=0;word<8;word++)parts[word]===0&&(word-lastzero>1&&(len=0),lastzero=word,len++),len>longest&&(longest=len,zstart=word-longest+1);for(word=0;word<8;word++){if(longest>1&&parts[word]===0&&word>=zstart&&word<zstart+longest){word===zstart&&(str+=":",zstart===0&&(str+=":"));continue}str+=(+_ntohs(parts[word]&65535)).toString(16),str+=word<7?":":""}return str}function readSockaddr(sa,salen){var addr,family=HEAP16[sa>>1],port=_ntohs(HEAPU16[sa+2>>1]);switch(family){case 2:if(salen!==16)return{errno:28};addr=HEAP32[sa+4>>2],addr=inetNtop4(addr);break;case 10:if(salen!==28)return{errno:28};addr=[HEAP32[sa+8>>2],HEAP32[sa+12>>2],HEAP32[sa+16>>2],HEAP32[sa+20>>2]],addr=inetNtop6(addr);break;default:return{errno:5}}return{family,addr,port}}function getSocketAddress(addrp,addrlen,allowNull){if(allowNull&&addrp===0)return null;var info=readSockaddr(addrp,addrlen);if(info.errno)throw new FS.ErrnoError(info.errno);return info.addr=DNS.lookup_addr(info.addr)||info.addr,info}function ___syscall_bind(fd,addr,addrlen){try{var sock=getSocketFromFD(fd),info=getSocketAddress(addr,addrlen);return sock.sock_ops.bind(sock,info.addr,info.port),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_chdir(path){try{return path=SYSCALLS.getStr(path),FS.chdir(path),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_chmod(path,mode){try{return path=SYSCALLS.getStr(path),FS.chmod(path,mode),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_connect(fd,addr,addrlen){try{var sock=getSocketFromFD(fd),info=getSocketAddress(addr,addrlen);return sock.sock_ops.connect(sock,info.addr,info.port),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_faccessat(dirfd,path,amode){try{if(path=SYSCALLS.getStr(path),path=SYSCALLS.calculateAt(dirfd,path),amode&~7)return-28;var lookup=FS.lookupPath(path,{follow:!0}),node=lookup.node;if(!node)return-44;var perms="";return amode&4&&(perms+="r"),amode&2&&(perms+="w"),amode&1&&(perms+="x"),perms&&FS.nodePermissions(node,perms)?-2:0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_fcntl64(fd,cmd,varargs){SYSCALLS.varargs=varargs;try{var arg,newStream,stream=SYSCALLS.getStreamFromFD(fd);switch(cmd){case 0:return arg=SYSCALLS.get(),arg<0?-28:(newStream=FS.createStream(stream,arg),newStream.fd);case 1:case 2:return 0;case 3:return stream.flags;case 4:return arg=SYSCALLS.get(),stream.flags|=arg,0;case 5:{var arg=SYSCALLS.get(),offset=0;return HEAP16[arg+offset>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return setErrNo(28),-1;default:return-28}}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function ___syscall_getcwd(buf,size){try{if(size===0)return-28;var cwd=FS.cwd(),cwdLengthInBytes=lengthBytesUTF8(cwd)+1;return size<cwdLengthInBytes?-68:(stringToUTF8(cwd,buf,size),cwdLengthInBytes)}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_getdents64(fd,dirp,count){try{var stream=SYSCALLS.getStreamFromFD(fd);stream.getdents||(stream.getdents=FS.readdir(stream.path));for(var id,type,struct_size=280,pos=0,off=FS.llseek(stream,0,1),idx=Math.floor(off/struct_size);idx<stream.getdents.length&&pos+struct_size<=count;){var name=stream.getdents[idx];if(name===".")id=stream.node.id,type=4;else if(name===".."){var lookup=FS.lookupPath(stream.path,{parent:!0});id=lookup.node.id,type=4}else{var child=FS.lookupNode(stream.node,name);id=child.id,type=FS.isChrdev(child.mode)?2:FS.isDir(child.mode)?4:FS.isLink(child.mode)?10:8}tempI64=[id>>>0,(tempDouble=id,+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[dirp+pos>>2]=tempI64[0],HEAP32[dirp+pos+4>>2]=tempI64[1],tempI64=[(idx+1)*struct_size>>>0,(tempDouble=(idx+1)*struct_size,+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[dirp+pos+8>>2]=tempI64[0],HEAP32[dirp+pos+12>>2]=tempI64[1],HEAP16[dirp+pos+16>>1]=280,HEAP8[dirp+pos+18>>0]=type,stringToUTF8(name,dirp+pos+19,256),pos+=struct_size,idx+=1}return FS.llseek(stream,idx*struct_size,0),pos}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_getsockname(fd,addr,addrlen){try{var sock=getSocketFromFD(fd),errno=writeSockaddr(addr,sock.family,DNS.lookup_name(sock.saddr||"0.0.0.0"),sock.sport,addrlen);return 0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_getsockopt(fd,level,optname,optval,optlen){try{var sock=getSocketFromFD(fd);return level===1&&optname===4?(HEAP32[optval>>2]=sock.error,HEAP32[optlen>>2]=4,sock.error=null,0):-50}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_ioctl(fd,op,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(op){case 21509:case 21505:return stream.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return stream.tty?0:-59;case 21519:{if(!stream.tty)return-59;var argp=SYSCALLS.get();return HEAP32[argp>>2]=0,0}case 21520:return stream.tty?-28:-59;case 21531:{var argp=SYSCALLS.get();return FS.ioctl(stream,op,argp)}case 21523:return stream.tty?0:-59;case 21524:return stream.tty?0:-59;default:return-28}}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_listen(fd,backlog){try{var sock=getSocketFromFD(fd);return sock.sock_ops.listen(sock,backlog),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_lstat64(path,buf){try{return path=SYSCALLS.getStr(path),SYSCALLS.doStat(FS.lstat,path,buf)}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_mkdirat(dirfd,path,mode){try{return path=SYSCALLS.getStr(path),path=SYSCALLS.calculateAt(dirfd,path),path=PATH.normalize(path),path[path.length-1]==="/"&&(path=path.substr(0,path.length-1)),FS.mkdir(path,mode,0),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_newfstatat(dirfd,path,buf,flags){try{path=SYSCALLS.getStr(path);var nofollow=flags&256,allowEmpty=flags&4096;return flags=flags&~6400,path=SYSCALLS.calculateAt(dirfd,path,allowEmpty),SYSCALLS.doStat(nofollow?FS.lstat:FS.stat,path,buf)}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_openat(dirfd,path,flags,varargs){SYSCALLS.varargs=varargs;try{path=SYSCALLS.getStr(path),path=SYSCALLS.calculateAt(dirfd,path);var mode=varargs?SYSCALLS.get():0;return FS.open(path,flags,mode).fd}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_poll(fds,nfds){try{for(var nonzero=0,i=0;i<nfds;i++){var pollfd=fds+8*i,fd=HEAP32[pollfd>>2],events=HEAP16[pollfd+4>>1],mask=32,stream=FS.getStream(fd);stream&&(mask=SYSCALLS.DEFAULT_POLLMASK,stream.stream_ops.poll&&(mask=stream.stream_ops.poll(stream))),mask&=events|8|16,mask&&nonzero++,HEAP16[pollfd+6>>1]=mask}return nonzero}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_readlinkat(dirfd,path,buf,bufsize){try{if(path=SYSCALLS.getStr(path),path=SYSCALLS.calculateAt(dirfd,path),bufsize<=0)return-28;var ret=FS.readlink(path),len=Math.min(bufsize,lengthBytesUTF8(ret)),endChar=HEAP8[buf+len];return stringToUTF8(ret,buf,bufsize+1),HEAP8[buf+len]=endChar,len}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_recvfrom(fd,buf,len,flags,addr,addrlen){try{var sock=getSocketFromFD(fd),msg=sock.sock_ops.recvmsg(sock,len);if(!msg)return 0;if(addr)var errno=writeSockaddr(addr,sock.family,DNS.lookup_name(msg.addr),msg.port,addrlen);return HEAPU8.set(msg.buffer,buf),msg.buffer.byteLength}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_renameat(olddirfd,oldpath,newdirfd,newpath){try{return oldpath=SYSCALLS.getStr(oldpath),newpath=SYSCALLS.getStr(newpath),oldpath=SYSCALLS.calculateAt(olddirfd,oldpath),newpath=SYSCALLS.calculateAt(newdirfd,newpath),FS.rename(oldpath,newpath),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_rmdir(path){try{return path=SYSCALLS.getStr(path),FS.rmdir(path),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_sendto(fd,message,length,flags,addr,addr_len){try{var sock=getSocketFromFD(fd),dest=getSocketAddress(addr,addr_len,!0);return dest?sock.sock_ops.sendmsg(sock,HEAP8,message,length,dest.addr,dest.port):FS.write(sock.stream,HEAP8,message,length)}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_socket(domain,type,protocol){try{var sock=SOCKFS.createSocket(domain,type,protocol);return sock.stream.fd}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_stat64(path,buf){try{return path=SYSCALLS.getStr(path),SYSCALLS.doStat(FS.stat,path,buf)}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_statfs64(path,size,buf){try{return path=SYSCALLS.getStr(path),HEAP32[buf+4>>2]=4096,HEAP32[buf+40>>2]=4096,HEAP32[buf+8>>2]=1e6,HEAP32[buf+12>>2]=5e5,HEAP32[buf+16>>2]=5e5,HEAP32[buf+20>>2]=FS.nextInode,HEAP32[buf+24>>2]=1e6,HEAP32[buf+28>>2]=42,HEAP32[buf+44>>2]=2,HEAP32[buf+36>>2]=255,0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_symlink(target,linkpath){try{return target=SYSCALLS.getStr(target),linkpath=SYSCALLS.getStr(linkpath),FS.symlink(target,linkpath),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}function ___syscall_unlinkat(dirfd,path,flags){try{return path=SYSCALLS.getStr(path),path=SYSCALLS.calculateAt(dirfd,path),flags===0?FS.unlink(path):flags===512?FS.rmdir(path):abort("Invalid flags passed to unlinkat"),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return-e.errno}}var nowIsMonotonic=!0;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function __emscripten_throw_longjmp(){throw 1/0}function readI53FromI64(ptr){return HEAPU32[ptr>>2]+HEAP32[ptr+4>>2]*4294967296}function __gmtime_js(time,tmPtr){var date=new Date(readI53FromI64(time)*1e3);HEAP32[tmPtr>>2]=date.getUTCSeconds(),HEAP32[tmPtr+4>>2]=date.getUTCMinutes(),HEAP32[tmPtr+8>>2]=date.getUTCHours(),HEAP32[tmPtr+12>>2]=date.getUTCDate(),HEAP32[tmPtr+16>>2]=date.getUTCMonth(),HEAP32[tmPtr+20>>2]=date.getUTCFullYear()-1900,HEAP32[tmPtr+24>>2]=date.getUTCDay();var start=Date.UTC(date.getUTCFullYear(),0,1,0,0,0,0),yday=(date.getTime()-start)/(1e3*60*60*24)|0;HEAP32[tmPtr+28>>2]=yday}function isLeapYear(year){return year%4===0&&(year%100!==0||year%400===0)}var MONTH_DAYS_LEAP_CUMULATIVE=[0,31,60,91,121,152,182,213,244,274,305,335],MONTH_DAYS_REGULAR_CUMULATIVE=[0,31,59,90,120,151,181,212,243,273,304,334];function ydayFromDate(date){var leap=isLeapYear(date.getFullYear()),monthDaysCumulative=leap?MONTH_DAYS_LEAP_CUMULATIVE:MONTH_DAYS_REGULAR_CUMULATIVE,yday=monthDaysCumulative[date.getMonth()]+date.getDate()-1;return yday}function __localtime_js(time,tmPtr){var date=new Date(readI53FromI64(time)*1e3);HEAP32[tmPtr>>2]=date.getSeconds(),HEAP32[tmPtr+4>>2]=date.getMinutes(),HEAP32[tmPtr+8>>2]=date.getHours(),HEAP32[tmPtr+12>>2]=date.getDate(),HEAP32[tmPtr+16>>2]=date.getMonth(),HEAP32[tmPtr+20>>2]=date.getFullYear()-1900,HEAP32[tmPtr+24>>2]=date.getDay();var yday=ydayFromDate(date)|0;HEAP32[tmPtr+28>>2]=yday,HEAP32[tmPtr+36>>2]=-(date.getTimezoneOffset()*60);var start=new Date(date.getFullYear(),0,1),summerOffset=new Date(date.getFullYear(),6,1).getTimezoneOffset(),winterOffset=start.getTimezoneOffset(),dst=(summerOffset!=winterOffset&&date.getTimezoneOffset()==Math.min(winterOffset,summerOffset))|0;HEAP32[tmPtr+32>>2]=dst}function stringToNewUTF8(str){var size=lengthBytesUTF8(str)+1,ret=_malloc(size);return ret&&stringToUTF8(str,ret,size),ret}function __tzset_js(timezone,daylight,tzname){var currentYear=(new Date).getFullYear(),winter=new Date(currentYear,0,1),summer=new Date(currentYear,6,1),winterOffset=winter.getTimezoneOffset(),summerOffset=summer.getTimezoneOffset(),stdTimezoneOffset=Math.max(winterOffset,summerOffset);HEAPU32[timezone>>2]=stdTimezoneOffset*60,HEAP32[daylight>>2]=+(winterOffset!=summerOffset);function extractZone(date){var match=date.toTimeString().match(/\(([A-Za-z ]+)\)$/);return match?match[1]:"GMT"}var winterName=extractZone(winter),summerName=extractZone(summer),winterNamePtr=stringToNewUTF8(winterName),summerNamePtr=stringToNewUTF8(summerName);summerOffset<winterOffset?(HEAPU32[tzname>>2]=winterNamePtr,HEAPU32[tzname+4>>2]=summerNamePtr):(HEAPU32[tzname>>2]=summerNamePtr,HEAPU32[tzname+4>>2]=winterNamePtr)}function _abort(){abort("")}function _dlopen(){abort(dlopenMissingError)}function runtimeKeepalivePush(){runtimeKeepaliveCounter+=1}function _emscripten_set_main_loop_timing(mode,value){if(Browser.mainLoop.timingMode=mode,Browser.mainLoop.timingValue=value,!Browser.mainLoop.func)return 1;if(Browser.mainLoop.running||(runtimeKeepalivePush(),Browser.mainLoop.running=!0),mode==0)Browser.mainLoop.scheduler=function(){var timeUntilNextTick=Math.max(0,Browser.mainLoop.tickStartTime+value-_emscripten_get_now())|0;setTimeout(Browser.mainLoop.runner,timeUntilNextTick)},Browser.mainLoop.method="timeout";else if(mode==1)Browser.mainLoop.scheduler=function(){Browser.requestAnimationFrame(Browser.mainLoop.runner)},Browser.mainLoop.method="rAF";else if(mode==2){if(typeof setImmediate=="undefined"){var setImmediates=[],emscriptenMainLoopMessageId="setimmediate",Browser_setImmediate_messageHandler=event=>{(event.data===emscriptenMainLoopMessageId||event.data.target===emscriptenMainLoopMessageId)&&(event.stopPropagation(),setImmediates.shift()())};addEventListener("message",Browser_setImmediate_messageHandler,!0),setImmediate=function(func){setImmediates.push(func),ENVIRONMENT_IS_WORKER?(Module.setImmediates===0[0]&&(Module.setImmediates=[]),Module.setImmediates.push(func),postMessage({target:emscriptenMainLoopMessageId})):postMessage(emscriptenMainLoopMessageId,"*")}}Browser.mainLoop.scheduler=function(){setImmediate(Browser.mainLoop.runner)},Browser.mainLoop.method="immediate"}return 0}_emscripten_get_now=()=>performance.now();function webgl_enable_ANGLE_instanced_arrays(ctx){var ext=ctx.getExtension("ANGLE_instanced_arrays");if(ext)return ctx.vertexAttribDivisor=function(index,divisor){ext.vertexAttribDivisorANGLE(index,divisor)},ctx.drawArraysInstanced=function(mode,first,count,primcount){ext.drawArraysInstancedANGLE(mode,first,count,primcount)},ctx.drawElementsInstanced=function(mode,count,type,indices,primcount){ext.drawElementsInstancedANGLE(mode,count,type,indices,primcount)},1}function webgl_enable_OES_vertex_array_object(ctx){var ext=ctx.getExtension("OES_vertex_array_object");if(ext)return ctx.createVertexArray=function(){return ext.createVertexArrayOES()},ctx.deleteVertexArray=function(vao){ext.deleteVertexArrayOES(vao)},ctx.bindVertexArray=function(vao){ext.bindVertexArrayOES(vao)},ctx.isVertexArray=function(vao){return ext.isVertexArrayOES(vao)},1}function webgl_enable_WEBGL_draw_buffers(ctx){var ext=ctx.getExtension("WEBGL_draw_buffers");if(ext)return ctx.drawBuffers=function(n,bufs){ext.drawBuffersWEBGL(n,bufs)},1}function webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(ctx){return!!(ctx.dibvbi=ctx.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"))}function webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(ctx){return!!(ctx.mdibvbi=ctx.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"))}function webgl_enable_WEBGL_multi_draw(ctx){return!!(ctx.multiDrawWebgl=ctx.getExtension("WEBGL_multi_draw"))}GL={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function(errorCode){GL.lastError||(GL.lastError=errorCode)},getNewId:function(table){for(var ret=GL.counter++,i=table.length;i<ret;i++)table[i]=null;return ret},getSource:function(shader,count,string,length){for(var len,source="",i=0;i<count;++i)len=length?HEAP32[length+i*4>>2]:-1,source+=UTF8ToString(HEAP32[string+i*4>>2],len<0?0[0]:len);return source},createContext:function(canvas,webGLContextAttributes){if(webGLContextAttributes.renderViaOffscreenBackBuffer&&(webGLContextAttributes.preserveDrawingBuffer=!0),!canvas.getContextSafariWebGL2Fixed){canvas.getContextSafariWebGL2Fixed=canvas.getContext;function fixedGetContext(ver,attrs){var gl=canvas.getContextSafariWebGL2Fixed(ver,attrs);return ver=="webgl"==gl instanceof WebGLRenderingContext?gl:null}canvas.getContext=fixedGetContext}if(ctx=webGLContextAttributes.majorVersion>1?canvas.getContext("webgl2",webGLContextAttributes):canvas.getContext("webgl",webGLContextAttributes),!ctx)return 0;var ctx,handle=GL.registerContext(ctx,webGLContextAttributes);return handle},enableOffscreenFramebufferAttributes:function(webGLContextAttributes){webGLContextAttributes.renderViaOffscreenBackBuffer=!0,webGLContextAttributes.preserveDrawingBuffer=!0},createOffscreenFramebuffer:function(context){gl=context.GLctx,fbo=gl.createFramebuffer(),gl.bindFramebuffer(36160,fbo),context.defaultFbo=fbo,context.defaultFboForbidBlitFramebuffer=!1,gl.getContextAttributes().antialias&&(context.defaultFboForbidBlitFramebuffer=!0),context.defaultColorTarget=gl.createTexture(),context.defaultDepthTarget=gl.createRenderbuffer(),GL.resizeOffscreenFramebuffer(context),gl.bindTexture(3553,context.defaultColorTarget),gl.texParameteri(3553,10241,9728),gl.texParameteri(3553,10240,9728),gl.texParameteri(3553,10242,33071),gl.texParameteri(3553,10243,33071),gl.texImage2D(3553,0,6408,gl.canvas.width,gl.canvas.height,0,6408,5121,null),gl.framebufferTexture2D(36160,36064,3553,context.defaultColorTarget,0),gl.bindTexture(3553,null);var gl,fbo,depthTarget=gl.createRenderbuffer();gl.bindRenderbuffer(36161,context.defaultDepthTarget),gl.renderbufferStorage(36161,33189,gl.canvas.width,gl.canvas.height),gl.framebufferRenderbuffer(36160,36096,36161,context.defaultDepthTarget),gl.bindRenderbuffer(36161,null);var vertices=[-1,-1,-1,1,1,-1,1,1],vb=gl.createBuffer();gl.bindBuffer(34962,vb),gl.bufferData(34962,new Float32Array(vertices),35044),gl.bindBuffer(34962,null),context.blitVB=vb;var vsCode="attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }",vs=gl.createShader(35633);gl.shaderSource(vs,vsCode),gl.compileShader(vs);var fsCode="varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }",fs=gl.createShader(35632);gl.shaderSource(fs,fsCode),gl.compileShader(fs);var blitProgram=gl.createProgram();gl.attachShader(blitProgram,vs),gl.attachShader(blitProgram,fs),gl.linkProgram(blitProgram),context.blitProgram=blitProgram,context.blitPosLoc=gl.getAttribLocation(blitProgram,"pos"),gl.useProgram(blitProgram),gl.uniform1i(gl.getUniformLocation(blitProgram,"sampler"),0),gl.useProgram(null),context.defaultVao=0[0],gl.createVertexArray&&(context.defaultVao=gl.createVertexArray(),gl.bindVertexArray(context.defaultVao),gl.enableVertexAttribArray(context.blitPosLoc),gl.bindVertexArray(null))},resizeOffscreenFramebuffer:function(context){if(gl=context.GLctx,context.defaultColorTarget){var prevTextureBinding=gl.getParameter(32873);gl.bindTexture(3553,context.defaultColorTarget),gl.texImage2D(3553,0,6408,gl.drawingBufferWidth,gl.drawingBufferHeight,0,6408,5121,null),gl.bindTexture(3553,prevTextureBinding)}if(context.defaultDepthTarget){var gl,prevRenderBufferBinding=gl.getParameter(36007);gl.bindRenderbuffer(36161,context.defaultDepthTarget),gl.renderbufferStorage(36161,33189,gl.drawingBufferWidth,gl.drawingBufferHeight),gl.bindRenderbuffer(36161,prevRenderBufferBinding)}},blitOffscreenFramebuffer:function(context){var gl=context.GLctx,prevScissorTest=gl.getParameter(3089);prevScissorTest&&gl.disable(3089);var prevFbo=gl.getParameter(36006);if(gl.blitFramebuffer&&!context.defaultFboForbidBlitFramebuffer)gl.bindFramebuffer(36008,context.defaultFbo),gl.bindFramebuffer(36009,null),gl.blitFramebuffer(0,0,gl.canvas.width,gl.canvas.height,0,0,gl.canvas.width,gl.canvas.height,16384,9728);else{gl.bindFramebuffer(36160,null);var prevProgram=gl.getParameter(35725);gl.useProgram(context.blitProgram);var prevVB=gl.getParameter(34964);gl.bindBuffer(34962,context.blitVB);var prevActiveTexture=gl.getParameter(34016);gl.activeTexture(33984);var prevTextureBinding=gl.getParameter(32873);gl.bindTexture(3553,context.defaultColorTarget);var prevBlend=gl.getParameter(3042);prevBlend&&gl.disable(3042);var prevCullFace=gl.getParameter(2884);prevCullFace&&gl.disable(2884);var prevDepthTest=gl.getParameter(2929);prevDepthTest&&gl.disable(2929);var prevStencilTest=gl.getParameter(2960);prevStencilTest&&gl.disable(2960);function draw(){gl.vertexAttribPointer(context.blitPosLoc,2,5126,!1,0,0),gl.drawArrays(5,0,4)}if(context.defaultVao){var prevVAO=gl.getParameter(34229);gl.bindVertexArray(context.defaultVao),draw(),gl.bindVertexArray(prevVAO)}else{for(var prevVertexAttribPointer={buffer:gl.getVertexAttrib(context.blitPosLoc,34975),size:gl.getVertexAttrib(context.blitPosLoc,34339),stride:gl.getVertexAttrib(context.blitPosLoc,34340),type:gl.getVertexAttrib(context.blitPosLoc,34341),normalized:gl.getVertexAttrib(context.blitPosLoc,34922),pointer:gl.getVertexAttribOffset(context.blitPosLoc,34373)},maxVertexAttribs=gl.getParameter(34921),prevVertexAttribEnables=[],i=0;i<maxVertexAttribs;++i){var prevEnabled=gl.getVertexAttrib(i,34338),wantEnabled=i==context.blitPosLoc;prevEnabled&&!wantEnabled&&gl.disableVertexAttribArray(i),!prevEnabled&&wantEnabled&&gl.enableVertexAttribArray(i),prevVertexAttribEnables[i]=prevEnabled}draw();for(i=0;i<maxVertexAttribs;++i){var prevEnabled=prevVertexAttribEnables[i],nowEnabled=i==context.blitPosLoc;prevEnabled&&!nowEnabled&&gl.enableVertexAttribArray(i),!prevEnabled&&nowEnabled&&gl.disableVertexAttribArray(i)}gl.bindBuffer(34962,prevVertexAttribPointer.buffer),gl.vertexAttribPointer(context.blitPosLoc,prevVertexAttribPointer.size,prevVertexAttribPointer.type,prevVertexAttribPointer.normalized,prevVertexAttribPointer.stride,prevVertexAttribPointer.offset)}prevStencilTest&&gl.enable(2960),prevDepthTest&&gl.enable(2929),prevCullFace&&gl.enable(2884),prevBlend&&gl.enable(3042),gl.bindTexture(3553,prevTextureBinding),gl.activeTexture(prevActiveTexture),gl.bindBuffer(34962,prevVB),gl.useProgram(prevProgram)}gl.bindFramebuffer(36160,prevFbo),prevScissorTest&&gl.enable(3089)},registerContext:function(ctx,webGLContextAttributes){var handle=GL.getNewId(GL.contexts),context={handle,attributes:webGLContextAttributes,version:webGLContextAttributes.majorVersion,GLctx:ctx};return ctx.canvas&&(ctx.canvas.GLctxObject=context),GL.contexts[handle]=context,(typeof webGLContextAttributes.enableExtensionsByDefault=="undefined"||webGLContextAttributes.enableExtensionsByDefault)&&GL.initExtensions(context),webGLContextAttributes.renderViaOffscreenBackBuffer&&GL.createOffscreenFramebuffer(context),handle},makeContextCurrent:function(contextHandle){return GL.currentContext=GL.contexts[contextHandle],Module.ctx=GLctx=GL.currentContext&&GL.currentContext.GLctx,!contextHandle||!!GLctx},getContext:function(contextHandle){return GL.contexts[contextHandle]},deleteContext:function(contextHandle){GL.currentContext===GL.contexts[contextHandle]&&(GL.currentContext=null),typeof JSEvents=="object"&&JSEvents.removeAllHandlersOnTarget(GL.contexts[contextHandle].GLctx.canvas),GL.contexts[contextHandle]&&GL.contexts[contextHandle].GLctx.canvas&&(GL.contexts[contextHandle].GLctx.canvas.GLctxObject=0[0]),GL.contexts[contextHandle]=null},initExtensions:function(context){if(context||(context=GL.currentContext),context.initExtensionsDone)return;context.initExtensionsDone=!0;var GLctx=context.GLctx;webgl_enable_ANGLE_instanced_arrays(GLctx),webgl_enable_OES_vertex_array_object(GLctx),webgl_enable_WEBGL_draw_buffers(GLctx),webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(GLctx),webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(GLctx),context.version>=2&&(GLctx.disjointTimerQueryExt=GLctx.getExtension("EXT_disjoint_timer_query_webgl2")),(context.version<2||!GLctx.disjointTimerQueryExt)&&(GLctx.disjointTimerQueryExt=GLctx.getExtension("EXT_disjoint_timer_query")),webgl_enable_WEBGL_multi_draw(GLctx);var exts=GLctx.getSupportedExtensions()||[];exts.forEach(function(ext){!ext.includes("lose_context")&&!ext.includes("debug")&&GLctx.getExtension(ext)})}};function _emscripten_webgl_do_commit_frame(){return!GL.currentContext||!GL.currentContext.GLctx?-3:GL.currentContext.defaultFbo?(GL.blitOffscreenFramebuffer(GL.currentContext),0):GL.currentContext.attributes.explicitSwapControl?0:-3}var _emscripten_webgl_commit_frame=_emscripten_webgl_do_commit_frame;function _proc_exit(code){EXITSTATUS=code,keepRuntimeAlive()||(Module.onExit&&Module.onExit(code),ABORT=!0),quit_(code,new ExitStatus(code))}function exitJS(status){EXITSTATUS=status,keepRuntimeAlive()||exitRuntime(),_proc_exit(status)}var _exit=exitJS;function handleException(e){if(e instanceof ExitStatus||e=="unwind")return EXITSTATUS;quit_(1,e)}function maybeExit(){if(runtimeExited)return;if(!keepRuntimeAlive())try{_exit(EXITSTATUS)}catch(e){handleException(e)}}function runtimeKeepalivePop(){runtimeKeepaliveCounter-=1}function setMainLoop(browserIterationFunc,fps,simulateInfiniteLoop,arg,noSetTiming){assert(!Browser.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Browser.mainLoop.func=browserIterationFunc,Browser.mainLoop.arg=arg;var thisMainLoopId=Browser.mainLoop.currentlyRunningMainloop;function checkIsRunning(){return!(thisMainLoopId<Browser.mainLoop.currentlyRunningMainloop)||(runtimeKeepalivePop(),maybeExit(),!1)}if(Browser.mainLoop.running=!1,Browser.mainLoop.runner=function(){if(ABORT)return;if(Browser.mainLoop.queue.length>0){var start=Date.now(),blocker=Browser.mainLoop.queue.shift();if(blocker.func(blocker.arg),Browser.mainLoop.remainingBlockers){var remaining=Browser.mainLoop.remainingBlockers,next=remaining%1==0?remaining-1:Math.floor(remaining);blocker.counted?Browser.mainLoop.remainingBlockers=next:(next=next+.5,Browser.mainLoop.remainingBlockers=(8*remaining+next)/9)}if(out('main loop blocker "'+blocker.name+'" took '+(Date.now()-start)+" ms"),Browser.mainLoop.updateStatus(),!checkIsRunning())return;setTimeout(Browser.mainLoop.runner,0);return}if(!checkIsRunning())return;if(Browser.mainLoop.currentFrameNumber=Browser.mainLoop.currentFrameNumber+1|0,Browser.mainLoop.timingMode==1&&Browser.mainLoop.timingValue>1&&Browser.mainLoop.currentFrameNumber%Browser.mainLoop.timingValue!=0){Browser.mainLoop.scheduler();return}if(Browser.mainLoop.timingMode==0&&(Browser.mainLoop.tickStartTime=_emscripten_get_now()),Browser.mainLoop.runIter(browserIterationFunc),!checkIsRunning())return;typeof SDL=="object"&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Browser.mainLoop.scheduler()},noSetTiming||(fps&&fps>0?_emscripten_set_main_loop_timing(0,1e3/fps):_emscripten_set_main_loop_timing(1,1),Browser.mainLoop.scheduler()),simulateInfiniteLoop)throw"unwind"}function callUserCallback(func){if(runtimeExited||ABORT)return;try{func(),maybeExit()}catch(e){handleException(e)}}function safeSetTimeout(func,timeout){return runtimeKeepalivePush(),setTimeout(()=>{runtimeKeepalivePop(),callUserCallback(func)},timeout)}var Browser={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Browser.mainLoop.scheduler=null,Browser.mainLoop.currentlyRunningMainloop++},resume:function(){Browser.mainLoop.currentlyRunningMainloop++;var timingMode=Browser.mainLoop.timingMode,timingValue=Browser.mainLoop.timingValue,func=Browser.mainLoop.func;Browser.mainLoop.func=null,setMainLoop(func,0,!1,Browser.mainLoop.arg,!0),_emscripten_set_main_loop_timing(timingMode,timingValue),Browser.mainLoop.scheduler()},updateStatus:function(){if(Module.setStatus){var message=Module.statusMessage||"Please wait...",remaining=Browser.mainLoop.remainingBlockers,expected=Browser.mainLoop.expectedBlockers;remaining?remaining<expected?Module.setStatus(message+" ("+(expected-remaining)+"/"+expected+")"):Module.setStatus(message):Module.setStatus("")}},runIter:function(func){if(ABORT)return;if(Module.preMainLoop){var preRet=Module.preMainLoop();if(preRet===!1)return}callUserCallback(func),Module.postMainLoop&&Module.postMainLoop()}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(Browser.initted)return;Browser.initted=!0;var imagePlugin={};imagePlugin.canHandle=function(name){return!Module.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(name)},imagePlugin.handle=function(byteArray,name,onload,onerror){b=new Blob([byteArray],{type:Browser.getMimetype(name)}),b.size!==byteArray.length&&(b=new Blob([new Uint8Array(byteArray).buffer],{type:Browser.getMimetype(name)}));var b,url=URL.createObjectURL(b),img=new Image;img.onload=()=>{assert(img.complete,"Image "+name+" could not be decoded");var ctx,canvas=document.createElement("canvas");canvas.width=img.width,canvas.height=img.height,ctx=canvas.getContext("2d"),ctx.drawImage(img,0,0),preloadedImages[name]=canvas,URL.revokeObjectURL(url),onload&&onload(byteArray)},img.onerror=event=>{out("Image "+url+" could not be decoded"),onerror&&onerror()},img.src=url},preloadPlugins.push(imagePlugin);var audioPlugin={};audioPlugin.canHandle=function(name){return!Module.noAudioDecoding&&name.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},audioPlugin.handle=function(byteArray,name,onload){var done=!1;function finish(audio){if(done)return;done=!0,preloadedAudios[name]=audio,onload&&onload(byteArray)}var b=new Blob([byteArray],{type:Browser.getMimetype(name)}),url=URL.createObjectURL(b),audio=new Audio;audio.addEventListener("canplaythrough",()=>finish(audio),!1),audio.onerror=function(){if(done)return;err("warning: browser could not fully decode audio "+name+", trying slower base64 approach");function encode64(data){for(var BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",PAD="=",ret="",leftchar=0,leftbits=0,i=0;i<data.length;i++)for(leftchar=leftchar<<8|data[i],leftbits+=8;leftbits>=6;){var curr=leftchar>>leftbits-6&63;leftbits-=6,ret+=BASE[curr]}return leftbits==2?(ret+=BASE[(leftchar&3)<<4],ret+=PAD+PAD):leftbits==4&&(ret+=BASE[(leftchar&15)<<2],ret+=PAD),ret}audio.src="data:audio/x-"+name.substr(-3)+";base64,"+encode64(byteArray),finish(audio)},audio.src=url,safeSetTimeout(()=>{finish(audio)},1e4)},preloadPlugins.push(audioPlugin);function pointerLockChange(){Browser.pointerLock=document.pointerLockElement===Module.canvas||document.mozPointerLockElement===Module.canvas||document.webkitPointerLockElement===Module.canvas||document.msPointerLockElement===Module.canvas}var canvas=Module.canvas;canvas&&(canvas.requestPointerLock=canvas.requestPointerLock||canvas.mozRequestPointerLock||canvas.webkitRequestPointerLock||canvas.msRequestPointerLock||(()=>{}),canvas.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),canvas.exitPointerLock=canvas.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",pointerLockChange,!1),document.addEventListener("mozpointerlockchange",pointerLockChange,!1),document.addEventListener("webkitpointerlockchange",pointerLockChange,!1),document.addEventListener("mspointerlockchange",pointerLockChange,!1),Module.elementPointerLock&&canvas.addEventListener("click",ev=>{!Browser.pointerLock&&Module.canvas.requestPointerLock&&(Module.canvas.requestPointerLock(),ev.preventDefault())},!1))},createContext:function(canvas,useWebGL,setInModule,webGLContextAttributes){if(useWebGL&&Module.ctx&&canvas==Module.canvas)return Module.ctx;if(useWebGL){var ctx,contextHandle,attribute,contextAttributes={antialias:!1,alpha:!1,majorVersion:typeof WebGL2RenderingContext!="undefined"?2:1};if(webGLContextAttributes)for(attribute in webGLContextAttributes)contextAttributes[attribute]=webGLContextAttributes[attribute];typeof GL!="undefined"&&(contextHandle=GL.createContext(canvas,contextAttributes),contextHandle&&(ctx=GL.getContext(contextHandle).GLctx))}else ctx=canvas.getContext("2d");return ctx?(setInModule&&(useWebGL||assert(typeof GLctx=="undefined","cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),Module.ctx=ctx,useWebGL&&GL.makeContextCurrent(contextHandle),Module.useWebGL=useWebGL,Browser.moduleContextCreatedCallbacks.forEach(callback=>callback()),Browser.init()),ctx):null},destroyContext:function(){},fullscreenHandlersInstalled:!1,lockPointer:0[0],resizeCanvas:0[0],requestFullscreen:function(lockPointer,resizeCanvas){Browser.lockPointer=lockPointer,Browser.resizeCanvas=resizeCanvas,typeof Browser.lockPointer=="undefined"&&(Browser.lockPointer=!0),typeof Browser.resizeCanvas=="undefined"&&(Browser.resizeCanvas=!1);var canvas=Module.canvas;function fullscreenChange(){Browser.isFullscreen=!1;var canvasContainer=canvas.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===canvasContainer?(canvas.exitFullscreen=Browser.exitFullscreen,Browser.lockPointer&&canvas.requestPointerLock(),Browser.isFullscreen=!0,Browser.resizeCanvas?Browser.setFullscreenCanvasSize():Browser.updateCanvasDimensions(canvas)):(canvasContainer.parentNode.insertBefore(canvas,canvasContainer),canvasContainer.parentNode.removeChild(canvasContainer),Browser.resizeCanvas?Browser.setWindowedCanvasSize():Browser.updateCanvasDimensions(canvas)),Module.onFullScreen&&Module.onFullScreen(Browser.isFullscreen),Module.onFullscreen&&Module.onFullscreen(Browser.isFullscreen)}Browser.fullscreenHandlersInstalled||(Browser.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",fullscreenChange,!1),document.addEventListener("mozfullscreenchange",fullscreenChange,!1),document.addEventListener("webkitfullscreenchange",fullscreenChange,!1),document.addEventListener("MSFullscreenChange",fullscreenChange,!1));var canvasContainer=document.createElement("div");canvas.parentNode.insertBefore(canvasContainer,canvas),canvasContainer.appendChild(canvas),canvasContainer.requestFullscreen=canvasContainer.requestFullscreen||canvasContainer.mozRequestFullScreen||canvasContainer.msRequestFullscreen||(canvasContainer.webkitRequestFullscreen?()=>canvasContainer.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(canvasContainer.webkitRequestFullScreen?()=>canvasContainer.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),canvasContainer.requestFullscreen()},exitFullscreen:function(){if(!Browser.isFullscreen)return!1;var CFS=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||(()=>{});return CFS.apply(document,[]),!0},nextRAF:0,fakeRequestAnimationFrame:function(func){if(now=Date.now(),Browser.nextRAF===0)Browser.nextRAF=now+1e3/60;else for(;now+2>=Browser.nextRAF;)Browser.nextRAF+=1e3/60;var now,delay=Math.max(Browser.nextRAF-now,0);setTimeout(func,delay)},requestAnimationFrame:function(func){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(func);return}var RAF=Browser.fakeRequestAnimationFrame;RAF(func)},safeSetTimeout:function(func,timeout){return safeSetTimeout(func,timeout)},safeRequestAnimationFrame:function(func){return runtimeKeepalivePush(),Browser.requestAnimationFrame(()=>{runtimeKeepalivePop(),callUserCallback(func)})},getMimetype:function(name){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[name.substr(name.lastIndexOf(".")+1)]},getUserMedia:function(func){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(func)},getMovementX:function(event){return event.movementX||event.mozMovementX||event.webkitMovementX||0},getMovementY:function(event){return event.movementY||event.mozMovementY||event.webkitMovementY||0},getMouseWheelDelta:function(event){var delta=0;switch(event.type){case"DOMMouseScroll":delta=event.detail/3;break;case"mousewheel":delta=event.wheelDelta/120;break;case"wheel":switch(delta=event.deltaY,event.deltaMode){case 0:delta/=100;break;case 1:delta/=3;break;case 2:delta*=80;break;default:throw"unrecognized mouse wheel delta mode: "+event.deltaMode}break;default:throw"unrecognized mouse wheel event: "+event.type}return delta},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(event){if(Browser.pointerLock)event.type!="mousemove"&&"mozMovementX"in event?Browser.mouseMovementX=Browser.mouseMovementY=0:(Browser.mouseMovementX=Browser.getMovementX(event),Browser.mouseMovementY=Browser.getMovementY(event)),typeof SDL!="undefined"?(Browser.mouseX=SDL.mouseX+Browser.mouseMovementX,Browser.mouseY=SDL.mouseY+Browser.mouseMovementY):(Browser.mouseX+=Browser.mouseMovementX,Browser.mouseY+=Browser.mouseMovementY);else{var rect=Module.canvas.getBoundingClientRect(),cw=Module.canvas.width,ch=Module.canvas.height,scrollX=typeof window.scrollX!="undefined"?window.scrollX:window.pageXOffset,scrollY=typeof window.scrollY!="undefined"?window.scrollY:window.pageYOffset;if(event.type==="touchstart"||event.type==="touchend"||event.type==="touchmove"){var touch=event.touch;if(touch===0[0])return;var y,x,adjustedX=touch.pageX-(scrollX+rect.left),adjustedY=touch.pageY-(scrollY+rect.top),adjustedX=adjustedX*(cw/rect.width),adjustedY=adjustedY*(ch/rect.height),coords={x:adjustedX,y:adjustedY};if(event.type==="touchstart")Browser.lastTouches[touch.identifier]=coords,Browser.touches[touch.identifier]=coords;else if(event.type==="touchend"||event.type==="touchmove"){var last=Browser.touches[touch.identifier];last||(last=coords),Browser.lastTouches[touch.identifier]=last,Browser.touches[touch.identifier]=coords}return}x=event.pageX-(scrollX+rect.left),y=event.pageY-(scrollY+rect.top),x=x*(cw/rect.width),y=y*(ch/rect.height),Browser.mouseMovementX=x-Browser.mouseX,Browser.mouseMovementY=y-Browser.mouseY,Browser.mouseX=x,Browser.mouseY=y}},resizeListeners:[],updateResizeListeners:function(){var canvas=Module.canvas;Browser.resizeListeners.forEach(listener=>listener(canvas.width,canvas.height))},setCanvasSize:function(width,height,noUpdates){var canvas=Module.canvas;Browser.updateCanvasDimensions(canvas,width,height),noUpdates||Browser.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if(typeof SDL!="undefined"){var flags=HEAPU32[SDL.screen>>2],flags=flags|8388608;HEAP32[SDL.screen>>2]=flags}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},setWindowedCanvasSize:function(){if(typeof SDL!="undefined"){var flags=HEAPU32[SDL.screen>>2],flags=flags&~8388608;HEAP32[SDL.screen>>2]=flags}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},updateCanvasDimensions:function(canvas,wNative,hNative){if(wNative&&hNative?(canvas.widthNative=wNative,canvas.heightNative=hNative):(wNative=canvas.widthNative,hNative=canvas.heightNative),w=wNative,h=hNative,Module.forcedAspectRatio&&Module.forcedAspectRatio>0&&(w/h<Module.forcedAspectRatio?w=Math.round(h*Module.forcedAspectRatio):h=Math.round(w/Module.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===canvas.parentNode&&typeof screen!="undefined"){var h,w,factor=Math.min(screen.width/w,screen.height/h);w=Math.round(w*factor),h=Math.round(h*factor)}Browser.resizeCanvas?(canvas.width!=w&&(canvas.width=w),canvas.height!=h&&(canvas.height=h),typeof canvas.style!="undefined"&&(canvas.style.removeProperty("width"),canvas.style.removeProperty("height"))):(canvas.width!=wNative&&(canvas.width=wNative),canvas.height!=hNative&&(canvas.height=hNative),typeof canvas.style!="undefined"&&(w!=wNative||h!=hNative?(canvas.style.setProperty("width",w+"px","important"),canvas.style.setProperty("height",h+"px","important")):(canvas.style.removeProperty("width"),canvas.style.removeProperty("height"))))}};function _emscripten_cancel_main_loop(){Browser.mainLoop.pause(),Browser.mainLoop.func=null}function _emscripten_date_now(){return Date.now()}function _emscripten_force_exit(status){noExitRuntime=!1,runtimeKeepaliveCounter=0,_exit(status)}function _glActiveTexture(x0){GLctx.activeTexture(x0)}var _emscripten_glActiveTexture=_glActiveTexture;function _glAttachShader(program,shader){GLctx.attachShader(GL.programs[program],GL.shaders[shader])}var _emscripten_glAttachShader=_glAttachShader;function _glBeginQuery(target,id){GLctx.beginQuery(target,GL.queries[id])}var _emscripten_glBeginQuery=_glBeginQuery;function _glBeginQueryEXT(target,id){GLctx.disjointTimerQueryExt.beginQueryEXT(target,GL.queries[id])}var _emscripten_glBeginQueryEXT=_glBeginQueryEXT;function _glBeginTransformFeedback(x0){GLctx.beginTransformFeedback(x0)}var _emscripten_glBeginTransformFeedback=_glBeginTransformFeedback;function _glBindAttribLocation(program,index,name){GLctx.bindAttribLocation(GL.programs[program],index,UTF8ToString(name))}var _emscripten_glBindAttribLocation=_glBindAttribLocation;function _glBindBuffer(target,buffer){target==35051?GLctx.currentPixelPackBufferBinding=buffer:target==35052&&(GLctx.currentPixelUnpackBufferBinding=buffer),GLctx.bindBuffer(target,GL.buffers[buffer])}var _emscripten_glBindBuffer=_glBindBuffer;function _glBindBufferBase(target,index,buffer){GLctx.bindBufferBase(target,index,GL.buffers[buffer])}var _emscripten_glBindBufferBase=_glBindBufferBase;function _glBindBufferRange(target,index,buffer,offset,ptrsize){GLctx.bindBufferRange(target,index,GL.buffers[buffer],offset,ptrsize)}var _emscripten_glBindBufferRange=_glBindBufferRange;function _glBindFramebuffer(target,framebuffer){GLctx.bindFramebuffer(target,framebuffer?GL.framebuffers[framebuffer]:GL.currentContext.defaultFbo)}var _emscripten_glBindFramebuffer=_glBindFramebuffer;function _glBindRenderbuffer(target,renderbuffer){GLctx.bindRenderbuffer(target,GL.renderbuffers[renderbuffer])}var _emscripten_glBindRenderbuffer=_glBindRenderbuffer;function _glBindSampler(unit,sampler){GLctx.bindSampler(unit,GL.samplers[sampler])}var _emscripten_glBindSampler=_glBindSampler;function _glBindTexture(target,texture){GLctx.bindTexture(target,GL.textures[texture])}var _emscripten_glBindTexture=_glBindTexture;function _glBindTransformFeedback(target,id){GLctx.bindTransformFeedback(target,GL.transformFeedbacks[id])}var _emscripten_glBindTransformFeedback=_glBindTransformFeedback;function _glBindVertexArray(vao){GLctx.bindVertexArray(GL.vaos[vao])}var _emscripten_glBindVertexArray=_glBindVertexArray,_glBindVertexArrayOES=_glBindVertexArray,_emscripten_glBindVertexArrayOES=_glBindVertexArrayOES;function _glBlendColor(x0,x1,x2,x3){GLctx.blendColor(x0,x1,x2,x3)}var _emscripten_glBlendColor=_glBlendColor;function _glBlendEquation(x0){GLctx.blendEquation(x0)}var _emscripten_glBlendEquation=_glBlendEquation;function _glBlendEquationSeparate(x0,x1){GLctx.blendEquationSeparate(x0,x1)}var _emscripten_glBlendEquationSeparate=_glBlendEquationSeparate;function _glBlendFunc(x0,x1){GLctx.blendFunc(x0,x1)}var _emscripten_glBlendFunc=_glBlendFunc;function _glBlendFuncSeparate(x0,x1,x2,x3){GLctx.blendFuncSeparate(x0,x1,x2,x3)}var _emscripten_glBlendFuncSeparate=_glBlendFuncSeparate;function _glBlitFramebuffer(x0,x1,x2,x3,x4,x5,x6,x7,x8,x9){GLctx.blitFramebuffer(x0,x1,x2,x3,x4,x5,x6,x7,x8,x9)}var _emscripten_glBlitFramebuffer=_glBlitFramebuffer;function _glBufferData(target,size,data,usage){GL.currentContext.version>=2?data&&size?GLctx.bufferData(target,HEAPU8,usage,data,size):GLctx.bufferData(target,size,usage):GLctx.bufferData(target,data?HEAPU8.subarray(data,data+size):size,usage)}var _emscripten_glBufferData=_glBufferData;function _glBufferSubData(target,offset,size,data){if(GL.currentContext.version>=2){size&&GLctx.bufferSubData(target,offset,HEAPU8,data,size);return}GLctx.bufferSubData(target,offset,HEAPU8.subarray(data,data+size))}var _emscripten_glBufferSubData=_glBufferSubData;function _glCheckFramebufferStatus(x0){return GLctx.checkFramebufferStatus(x0)}var _emscripten_glCheckFramebufferStatus=_glCheckFramebufferStatus;function _glClear(x0){GLctx.clear(x0)}var _emscripten_glClear=_glClear;function _glClearBufferfi(x0,x1,x2,x3){GLctx.clearBufferfi(x0,x1,x2,x3)}var _emscripten_glClearBufferfi=_glClearBufferfi;function _glClearBufferfv(buffer,drawbuffer,value){GLctx.clearBufferfv(buffer,drawbuffer,HEAPF32,value>>2)}var _emscripten_glClearBufferfv=_glClearBufferfv;function _glClearBufferiv(buffer,drawbuffer,value){GLctx.clearBufferiv(buffer,drawbuffer,HEAP32,value>>2)}var _emscripten_glClearBufferiv=_glClearBufferiv;function _glClearBufferuiv(buffer,drawbuffer,value){GLctx.clearBufferuiv(buffer,drawbuffer,HEAPU32,value>>2)}var _emscripten_glClearBufferuiv=_glClearBufferuiv;function _glClearColor(x0,x1,x2,x3){GLctx.clearColor(x0,x1,x2,x3)}var _emscripten_glClearColor=_glClearColor;function _glClearDepthf(x0){GLctx.clearDepth(x0)}var _emscripten_glClearDepthf=_glClearDepthf;function _glClearStencil(x0){GLctx.clearStencil(x0)}var _emscripten_glClearStencil=_glClearStencil;function convertI32PairToI53(lo,hi){return(lo>>>0)+hi*4294967296}function _glClientWaitSync(sync,flags,timeout_low,timeout_high){var timeout=convertI32PairToI53(timeout_low,timeout_high);return GLctx.clientWaitSync(GL.syncs[sync],flags,timeout)}var _emscripten_glClientWaitSync=_glClientWaitSync;function _glColorMask(red,green,blue,alpha){GLctx.colorMask(!!red,!!green,!!blue,!!alpha)}var _emscripten_glColorMask=_glColorMask;function _glCompileShader(shader){GLctx.compileShader(GL.shaders[shader])}var _emscripten_glCompileShader=_glCompileShader;function _glCompressedTexImage2D(target,level,internalFormat,width,height,border,imageSize,data){if(GL.currentContext.version>=2){GLctx.currentPixelUnpackBufferBinding||!imageSize?GLctx.compressedTexImage2D(target,level,internalFormat,width,height,border,imageSize,data):GLctx.compressedTexImage2D(target,level,internalFormat,width,height,border,HEAPU8,data,imageSize);return}GLctx.compressedTexImage2D(target,level,internalFormat,width,height,border,data?HEAPU8.subarray(data,data+imageSize):null)}var _emscripten_glCompressedTexImage2D=_glCompressedTexImage2D;function _glCompressedTexImage3D(target,level,internalFormat,width,height,depth,border,imageSize,data){GLctx.currentPixelUnpackBufferBinding?GLctx.compressedTexImage3D(target,level,internalFormat,width,height,depth,border,imageSize,data):GLctx.compressedTexImage3D(target,level,internalFormat,width,height,depth,border,HEAPU8,data,imageSize)}var _emscripten_glCompressedTexImage3D=_glCompressedTexImage3D;function _glCompressedTexSubImage2D(target,level,xoffset,yoffset,width,height,format,imageSize,data){if(GL.currentContext.version>=2){GLctx.currentPixelUnpackBufferBinding||!imageSize?GLctx.compressedTexSubImage2D(target,level,xoffset,yoffset,width,height,format,imageSize,data):GLctx.compressedTexSubImage2D(target,level,xoffset,yoffset,width,height,format,HEAPU8,data,imageSize);return}GLctx.compressedTexSubImage2D(target,level,xoffset,yoffset,width,height,format,data?HEAPU8.subarray(data,data+imageSize):null)}var _emscripten_glCompressedTexSubImage2D=_glCompressedTexSubImage2D;function _glCompressedTexSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,imageSize,data){GLctx.currentPixelUnpackBufferBinding?GLctx.compressedTexSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,imageSize,data):GLctx.compressedTexSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,HEAPU8,data,imageSize)}var _emscripten_glCompressedTexSubImage3D=_glCompressedTexSubImage3D;function _glCopyBufferSubData(x0,x1,x2,x3,x4){GLctx.copyBufferSubData(x0,x1,x2,x3,x4)}var _emscripten_glCopyBufferSubData=_glCopyBufferSubData;function _glCopyTexImage2D(x0,x1,x2,x3,x4,x5,x6,x7){GLctx.copyTexImage2D(x0,x1,x2,x3,x4,x5,x6,x7)}var _emscripten_glCopyTexImage2D=_glCopyTexImage2D;function _glCopyTexSubImage2D(x0,x1,x2,x3,x4,x5,x6,x7){GLctx.copyTexSubImage2D(x0,x1,x2,x3,x4,x5,x6,x7)}var _emscripten_glCopyTexSubImage2D=_glCopyTexSubImage2D;function _glCopyTexSubImage3D(x0,x1,x2,x3,x4,x5,x6,x7,x8){GLctx.copyTexSubImage3D(x0,x1,x2,x3,x4,x5,x6,x7,x8)}var _emscripten_glCopyTexSubImage3D=_glCopyTexSubImage3D;function _glCreateProgram(){var id=GL.getNewId(GL.programs),program=GLctx.createProgram();return program.name=id,program.maxUniformLength=program.maxAttributeLength=program.maxUniformBlockNameLength=0,program.uniformIdCounter=1,GL.programs[id]=program,id}var _emscripten_glCreateProgram=_glCreateProgram;function _glCreateShader(shaderType){var id=GL.getNewId(GL.shaders);return GL.shaders[id]=GLctx.createShader(shaderType),id}var _emscripten_glCreateShader=_glCreateShader;function _glCullFace(x0){GLctx.cullFace(x0)}var _emscripten_glCullFace=_glCullFace;function _glDeleteBuffers(n,buffers){for(i=0;i<n;i++){var i,id=HEAP32[buffers+i*4>>2],buffer=GL.buffers[id];if(!buffer)continue;GLctx.deleteBuffer(buffer),buffer.name=0,GL.buffers[id]=null,id==GLctx.currentPixelPackBufferBinding&&(GLctx.currentPixelPackBufferBinding=0),id==GLctx.currentPixelUnpackBufferBinding&&(GLctx.currentPixelUnpackBufferBinding=0)}}var _emscripten_glDeleteBuffers=_glDeleteBuffers;function _glDeleteFramebuffers(n,framebuffers){for(i=0;i<n;++i){var i,id=HEAP32[framebuffers+i*4>>2],framebuffer=GL.framebuffers[id];if(!framebuffer)continue;GLctx.deleteFramebuffer(framebuffer),framebuffer.name=0,GL.framebuffers[id]=null}}var _emscripten_glDeleteFramebuffers=_glDeleteFramebuffers;function _glDeleteProgram(id){if(!id)return;var program=GL.programs[id];if(!program){GL.recordError(1281);return}GLctx.deleteProgram(program),program.name=0,GL.programs[id]=null}var _emscripten_glDeleteProgram=_glDeleteProgram;function _glDeleteQueries(n,ids){for(i=0;i<n;i++){var i,id=HEAP32[ids+i*4>>2],query=GL.queries[id];if(!query)continue;GLctx.deleteQuery(query),GL.queries[id]=null}}var _emscripten_glDeleteQueries=_glDeleteQueries;function _glDeleteQueriesEXT(n,ids){for(i=0;i<n;i++){var i,id=HEAP32[ids+i*4>>2],query=GL.queries[id];if(!query)continue;GLctx.disjointTimerQueryExt.deleteQueryEXT(query),GL.queries[id]=null}}var _emscripten_glDeleteQueriesEXT=_glDeleteQueriesEXT;function _glDeleteRenderbuffers(n,renderbuffers){for(i=0;i<n;i++){var i,id=HEAP32[renderbuffers+i*4>>2],renderbuffer=GL.renderbuffers[id];if(!renderbuffer)continue;GLctx.deleteRenderbuffer(renderbuffer),renderbuffer.name=0,GL.renderbuffers[id]=null}}var _emscripten_glDeleteRenderbuffers=_glDeleteRenderbuffers;function _glDeleteSamplers(n,samplers){for(i=0;i<n;i++){var i,id=HEAP32[samplers+i*4>>2],sampler=GL.samplers[id];if(!sampler)continue;GLctx.deleteSampler(sampler),sampler.name=0,GL.samplers[id]=null}}var _emscripten_glDeleteSamplers=_glDeleteSamplers;function _glDeleteShader(id){if(!id)return;var shader=GL.shaders[id];if(!shader){GL.recordError(1281);return}GLctx.deleteShader(shader),GL.shaders[id]=null}var _emscripten_glDeleteShader=_glDeleteShader;function _glDeleteSync(id){if(!id)return;var sync=GL.syncs[id];if(!sync){GL.recordError(1281);return}GLctx.deleteSync(sync),sync.name=0,GL.syncs[id]=null}var _emscripten_glDeleteSync=_glDeleteSync;function _glDeleteTextures(n,textures){for(i=0;i<n;i++){var i,id=HEAP32[textures+i*4>>2],texture=GL.textures[id];if(!texture)continue;GLctx.deleteTexture(texture),texture.name=0,GL.textures[id]=null}}var _emscripten_glDeleteTextures=_glDeleteTextures;function _glDeleteTransformFeedbacks(n,ids){for(i=0;i<n;i++){var i,id=HEAP32[ids+i*4>>2],transformFeedback=GL.transformFeedbacks[id];if(!transformFeedback)continue;GLctx.deleteTransformFeedback(transformFeedback),transformFeedback.name=0,GL.transformFeedbacks[id]=null}}var _emscripten_glDeleteTransformFeedbacks=_glDeleteTransformFeedbacks;function _glDeleteVertexArrays(n,vaos){for(i=0;i<n;i++){var i,id=HEAP32[vaos+i*4>>2];GLctx.deleteVertexArray(GL.vaos[id]),GL.vaos[id]=null}}var _emscripten_glDeleteVertexArrays=_glDeleteVertexArrays,_glDeleteVertexArraysOES=_glDeleteVertexArrays,_emscripten_glDeleteVertexArraysOES=_glDeleteVertexArraysOES;function _glDepthFunc(x0){GLctx.depthFunc(x0)}var _emscripten_glDepthFunc=_glDepthFunc;function _glDepthMask(flag){GLctx.depthMask(!!flag)}var _emscripten_glDepthMask=_glDepthMask;function _glDepthRangef(x0,x1){GLctx.depthRange(x0,x1)}var _emscripten_glDepthRangef=_glDepthRangef;function _glDetachShader(program,shader){GLctx.detachShader(GL.programs[program],GL.shaders[shader])}var _emscripten_glDetachShader=_glDetachShader;function _glDisable(x0){GLctx.disable(x0)}var _emscripten_glDisable=_glDisable;function _glDisableVertexAttribArray(index){GLctx.disableVertexAttribArray(index)}var _emscripten_glDisableVertexAttribArray=_glDisableVertexAttribArray;function _glDrawArrays(mode,first,count){GLctx.drawArrays(mode,first,count)}var _emscripten_glDrawArrays=_glDrawArrays;function _glDrawArraysInstanced(mode,first,count,primcount){GLctx.drawArraysInstanced(mode,first,count,primcount)}var _emscripten_glDrawArraysInstanced=_glDrawArraysInstanced,_glDrawArraysInstancedANGLE=_glDrawArraysInstanced,_emscripten_glDrawArraysInstancedANGLE=_glDrawArraysInstancedANGLE,_glDrawArraysInstancedARB=_glDrawArraysInstanced,_emscripten_glDrawArraysInstancedARB=_glDrawArraysInstancedARB,_glDrawArraysInstancedEXT=_glDrawArraysInstanced,_emscripten_glDrawArraysInstancedEXT=_glDrawArraysInstancedEXT,_glDrawArraysInstancedNV=_glDrawArraysInstanced,_emscripten_glDrawArraysInstancedNV=_glDrawArraysInstancedNV,tempFixedLengthArray=[];function _glDrawBuffers(n,bufs){for(var bufArray=tempFixedLengthArray[n],i=0;i<n;i++)bufArray[i]=HEAP32[bufs+i*4>>2];GLctx.drawBuffers(bufArray)}var _emscripten_glDrawBuffers=_glDrawBuffers,_glDrawBuffersEXT=_glDrawBuffers,_emscripten_glDrawBuffersEXT=_glDrawBuffersEXT,_glDrawBuffersWEBGL=_glDrawBuffers,_emscripten_glDrawBuffersWEBGL=_glDrawBuffersWEBGL;function _glDrawElements(mode,count,type,indices){GLctx.drawElements(mode,count,type,indices)}var _emscripten_glDrawElements=_glDrawElements;function _glDrawElementsInstanced(mode,count,type,indices,primcount){GLctx.drawElementsInstanced(mode,count,type,indices,primcount)}var _emscripten_glDrawElementsInstanced=_glDrawElementsInstanced,_glDrawElementsInstancedANGLE=_glDrawElementsInstanced,_emscripten_glDrawElementsInstancedANGLE=_glDrawElementsInstancedANGLE,_glDrawElementsInstancedARB=_glDrawElementsInstanced,_emscripten_glDrawElementsInstancedARB=_glDrawElementsInstancedARB,_glDrawElementsInstancedEXT=_glDrawElementsInstanced,_emscripten_glDrawElementsInstancedEXT=_glDrawElementsInstancedEXT,_glDrawElementsInstancedNV=_glDrawElementsInstanced,_emscripten_glDrawElementsInstancedNV=_glDrawElementsInstancedNV;function _glDrawRangeElements(mode,start,end,count,type,indices){_glDrawElements(mode,count,type,indices)}var _emscripten_glDrawRangeElements=_glDrawRangeElements;function _glEnable(x0){GLctx.enable(x0)}var _emscripten_glEnable=_glEnable;function _glEnableVertexAttribArray(index){GLctx.enableVertexAttribArray(index)}var _emscripten_glEnableVertexAttribArray=_glEnableVertexAttribArray;function _glEndQuery(x0){GLctx.endQuery(x0)}var _emscripten_glEndQuery=_glEndQuery;function _glEndQueryEXT(target){GLctx.disjointTimerQueryExt.endQueryEXT(target)}var _emscripten_glEndQueryEXT=_glEndQueryEXT;function _glEndTransformFeedback(){GLctx.endTransformFeedback()}var _emscripten_glEndTransformFeedback=_glEndTransformFeedback;function _glFenceSync(condition,flags){var id,sync=GLctx.fenceSync(condition,flags);return sync?(id=GL.getNewId(GL.syncs),sync.name=id,GL.syncs[id]=sync,id):0}var _emscripten_glFenceSync=_glFenceSync;function _glFinish(){GLctx.finish()}var _emscripten_glFinish=_glFinish;function _glFlush(){GLctx.flush()}var _emscripten_glFlush=_glFlush;function _glFramebufferRenderbuffer(target,attachment,renderbuffertarget,renderbuffer){GLctx.framebufferRenderbuffer(target,attachment,renderbuffertarget,GL.renderbuffers[renderbuffer])}var _emscripten_glFramebufferRenderbuffer=_glFramebufferRenderbuffer;function _glFramebufferTexture2D(target,attachment,textarget,texture,level){GLctx.framebufferTexture2D(target,attachment,textarget,GL.textures[texture],level)}var _emscripten_glFramebufferTexture2D=_glFramebufferTexture2D;function _glFramebufferTextureLayer(target,attachment,texture,level,layer){GLctx.framebufferTextureLayer(target,attachment,GL.textures[texture],level,layer)}var _emscripten_glFramebufferTextureLayer=_glFramebufferTextureLayer;function _glFrontFace(x0){GLctx.frontFace(x0)}var _emscripten_glFrontFace=_glFrontFace;function __glGenObject(n,buffers,createFunction,objectTable){for(i=0;i<n;i++){var i,buffer=GLctx[createFunction](),id=buffer&&GL.getNewId(objectTable);buffer?(buffer.name=id,objectTable[id]=buffer):GL.recordError(1282),HEAP32[buffers+i*4>>2]=id}}function _glGenBuffers(n,buffers){__glGenObject(n,buffers,"createBuffer",GL.buffers)}var _emscripten_glGenBuffers=_glGenBuffers;function _glGenFramebuffers(n,ids){__glGenObject(n,ids,"createFramebuffer",GL.framebuffers)}var _emscripten_glGenFramebuffers=_glGenFramebuffers;function _glGenQueries(n,ids){__glGenObject(n,ids,"createQuery",GL.queries)}var _emscripten_glGenQueries=_glGenQueries;function _glGenQueriesEXT(n,ids){for(i=0;i<n;i++){var i,id,query=GLctx.disjointTimerQueryExt.createQueryEXT();if(!query){for(GL.recordError(1282);i<n;)HEAP32[ids+i++*4>>2]=0;return}id=GL.getNewId(GL.queries),query.name=id,GL.queries[id]=query,HEAP32[ids+i*4>>2]=id}}var _emscripten_glGenQueriesEXT=_glGenQueriesEXT;function _glGenRenderbuffers(n,renderbuffers){__glGenObject(n,renderbuffers,"createRenderbuffer",GL.renderbuffers)}var _emscripten_glGenRenderbuffers=_glGenRenderbuffers;function _glGenSamplers(n,samplers){__glGenObject(n,samplers,"createSampler",GL.samplers)}var _emscripten_glGenSamplers=_glGenSamplers;function _glGenTextures(n,textures){__glGenObject(n,textures,"createTexture",GL.textures)}var _emscripten_glGenTextures=_glGenTextures;function _glGenTransformFeedbacks(n,ids){__glGenObject(n,ids,"createTransformFeedback",GL.transformFeedbacks)}var _emscripten_glGenTransformFeedbacks=_glGenTransformFeedbacks;function _glGenVertexArrays(n,arrays){__glGenObject(n,arrays,"createVertexArray",GL.vaos)}var _emscripten_glGenVertexArrays=_glGenVertexArrays,_glGenVertexArraysOES=_glGenVertexArrays,_emscripten_glGenVertexArraysOES=_glGenVertexArraysOES;function _glGenerateMipmap(x0){GLctx.generateMipmap(x0)}var _emscripten_glGenerateMipmap=_glGenerateMipmap;function __glGetActiveAttribOrUniform(funcName,program,index,bufSize,length,size,type,name){program=GL.programs[program];var info=GLctx[funcName](program,index);if(info){var numBytesWrittenExclNull=name&&stringToUTF8(info.name,name,bufSize);length&&(HEAP32[length>>2]=numBytesWrittenExclNull),size&&(HEAP32[size>>2]=info.size),type&&(HEAP32[type>>2]=info.type)}}function _glGetActiveAttrib(program,index,bufSize,length,size,type,name){__glGetActiveAttribOrUniform("getActiveAttrib",program,index,bufSize,length,size,type,name)}var _emscripten_glGetActiveAttrib=_glGetActiveAttrib;function _glGetActiveUniform(program,index,bufSize,length,size,type,name){__glGetActiveAttribOrUniform("getActiveUniform",program,index,bufSize,length,size,type,name)}var _emscripten_glGetActiveUniform=_glGetActiveUniform;function _glGetActiveUniformBlockName(program,uniformBlockIndex,bufSize,length,uniformBlockName){program=GL.programs[program];var result=GLctx.getActiveUniformBlockName(program,uniformBlockIndex);if(!result)return;if(uniformBlockName&&bufSize>0){var numBytesWrittenExclNull=stringToUTF8(result,uniformBlockName,bufSize);length&&(HEAP32[length>>2]=numBytesWrittenExclNull)}else length&&(HEAP32[length>>2]=0)}var _emscripten_glGetActiveUniformBlockName=_glGetActiveUniformBlockName;function _glGetActiveUniformBlockiv(program,uniformBlockIndex,pname,params){if(!params){GL.recordError(1281);return}if(program=GL.programs[program],pname==35393){var name=GLctx.getActiveUniformBlockName(program,uniformBlockIndex);HEAP32[params>>2]=name.length+1;return}var i,result=GLctx.getActiveUniformBlockParameter(program,uniformBlockIndex,pname);if(result===null)return;if(pname==35395)for(i=0;i<result.length;i++)HEAP32[params+i*4>>2]=result[i];else HEAP32[params>>2]=result}var _emscripten_glGetActiveUniformBlockiv=_glGetActiveUniformBlockiv;function _glGetActiveUniformsiv(program,uniformCount,uniformIndices,pname,params){if(!params){GL.recordError(1281);return}if(uniformCount>0&&uniformIndices==0){GL.recordError(1281);return}program=GL.programs[program];for(ids=[],i=0;i<uniformCount;i++)ids.push(HEAP32[uniformIndices+i*4>>2]);var ids,i,len,result=GLctx.getActiveUniforms(program,ids,pname);if(!result)return;for(len=result.length,i=0;i<len;i++)HEAP32[params+i*4>>2]=result[i]}var _emscripten_glGetActiveUniformsiv=_glGetActiveUniformsiv;function _glGetAttachedShaders(program,maxCount,count,shaders){var i,id,result=GLctx.getAttachedShaders(GL.programs[program]),len=result.length;len>maxCount&&(len=maxCount),HEAP32[count>>2]=len;for(i=0;i<len;++i)id=GL.shaders.indexOf(result[i]),HEAP32[shaders+i*4>>2]=id}var _emscripten_glGetAttachedShaders=_glGetAttachedShaders;function _glGetAttribLocation(program,name){return GLctx.getAttribLocation(GL.programs[program],UTF8ToString(name))}var _emscripten_glGetAttribLocation=_glGetAttribLocation;function writeI53ToI64(ptr,num){HEAPU32[ptr>>2]=num,HEAPU32[ptr+4>>2]=(num-HEAPU32[ptr>>2])/4294967296}function emscriptenWebGLGet(name_,p,type){if(!p){GL.recordError(1281);return}switch(ret=0[0],name_){case 36346:ret=1;break;case 36344:type!=0&&type!=1&&GL.recordError(1280);return;case 34814:case 36345:ret=0;break;case 34466:var ret,i,formats=GLctx.getParameter(34467);ret=formats?formats.length:0;break;case 33309:if(GL.currentContext.version<2){GL.recordError(1282);return}var exts=GLctx.getSupportedExtensions()||[];ret=2*exts.length;break;case 33307:case 33308:if(GL.currentContext.version<2){GL.recordError(1280);return}ret=name_==33307?3:0;break}if(ret===0[0]){var result=GLctx.getParameter(name_);switch(typeof result){case"number":ret=result;break;case"boolean":ret=result?1:0;break;case"string":GL.recordError(1280);return;case"object":if(result===null)switch(name_){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:{ret=0;break}default:{GL.recordError(1280);return}}else if(result instanceof Float32Array||result instanceof Uint32Array||result instanceof Int32Array||result instanceof Array){for(i=0;i<result.length;++i)switch(type){case 0:HEAP32[p+i*4>>2]=result[i];break;case 2:HEAPF32[p+i*4>>2]=result[i];break;case 4:HEAP8[p+i>>0]=result[i]?1:0;break}return}else try{ret=result.name|0}catch(e){GL.recordError(1280),err("GL_INVALID_ENUM in glGet"+type+"v: Unknown object returned from WebGL getParameter("+name_+")! (error: "+e+")");return}break;default:GL.recordError(1280),err("GL_INVALID_ENUM in glGet"+type+"v: Native code calling glGet"+type+"v("+name_+") and it returns "+result+" of type "+typeof result+"!");return}}switch(type){case 1:writeI53ToI64(p,ret);break;case 0:HEAP32[p>>2]=ret;break;case 2:HEAPF32[p>>2]=ret;break;case 4:HEAP8[p>>0]=ret?1:0;break}}function _glGetBooleanv(name_,p){emscriptenWebGLGet(name_,p,4)}var _emscripten_glGetBooleanv=_glGetBooleanv;function _glGetBufferParameteri64v(target,value,data){if(!data){GL.recordError(1281);return}writeI53ToI64(data,GLctx.getBufferParameter(target,value))}var _emscripten_glGetBufferParameteri64v=_glGetBufferParameteri64v;function _glGetBufferParameteriv(target,value,data){if(!data){GL.recordError(1281);return}HEAP32[data>>2]=GLctx.getBufferParameter(target,value)}var _emscripten_glGetBufferParameteriv=_glGetBufferParameteriv;function _glGetError(){var error=GLctx.getError()||GL.lastError;return GL.lastError=0,error}var _emscripten_glGetError=_glGetError;function _glGetFloatv(name_,p){emscriptenWebGLGet(name_,p,2)}var _emscripten_glGetFloatv=_glGetFloatv;function _glGetFragDataLocation(program,name){return GLctx.getFragDataLocation(GL.programs[program],UTF8ToString(name))}var _emscripten_glGetFragDataLocation=_glGetFragDataLocation;function _glGetFramebufferAttachmentParameteriv(target,attachment,pname,params){var result=GLctx.getFramebufferAttachmentParameter(target,attachment,pname);(result instanceof WebGLRenderbuffer||result instanceof WebGLTexture)&&(result=result.name|0),HEAP32[params>>2]=result}var readyPromiseResolve,readyPromiseReject,read_,readAsync,readBinary,setWindowTitle,out,err,wasmBinary,wasmMemory,EXITSTATUS,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,wasmTable,wasmBinaryFile,tempDouble,tempI64,TTY,DNS,_emscripten_get_now,GL,ENV,GLctx,calledRun,_emscripten_glGetFramebufferAttachmentParameteriv=_glGetFramebufferAttachmentParameteriv;function emscriptenWebGLGetIndexed(target,index,data,type){if(!data){GL.recordError(1281);return}var ret,result=GLctx.getIndexedParameter(target,index);switch(typeof result){case"boolean":ret=result?1:0;break;case"number":ret=result;break;case"object":if(result===null)switch(target){case 35983:case 35368:ret=0;break;default:{GL.recordError(1280);return}}else if(result instanceof WebGLBuffer)ret=result.name|0;else{GL.recordError(1280);return}break;default:GL.recordError(1280);return}switch(type){case 1:writeI53ToI64(data,ret);break;case 0:HEAP32[data>>2]=ret;break;case 2:HEAPF32[data>>2]=ret;break;case 4:HEAP8[data>>0]=ret?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+type}}function _glGetInteger64i_v(target,index,data){emscriptenWebGLGetIndexed(target,index,data,1)}var _emscripten_glGetInteger64i_v=_glGetInteger64i_v;function _glGetInteger64v(name_,p){emscriptenWebGLGet(name_,p,1)}var _emscripten_glGetInteger64v=_glGetInteger64v;function _glGetIntegeri_v(target,index,data){emscriptenWebGLGetIndexed(target,index,data,0)}var _emscripten_glGetIntegeri_v=_glGetIntegeri_v;function _glGetIntegerv(name_,p){emscriptenWebGLGet(name_,p,0)}var _emscripten_glGetIntegerv=_glGetIntegerv;function _glGetInternalformativ(target,internalformat,pname,bufSize,params){if(bufSize<0){GL.recordError(1281);return}if(!params){GL.recordError(1281);return}var i,ret=GLctx.getInternalformatParameter(target,internalformat,pname);if(ret===null)return;for(i=0;i<ret.length&&i<bufSize;++i)HEAP32[params+i*4>>2]=ret[i]}var _emscripten_glGetInternalformativ=_glGetInternalformativ;function _glGetProgramBinary(){GL.recordError(1282)}var _emscripten_glGetProgramBinary=_glGetProgramBinary;function _glGetProgramInfoLog(program,maxLength,length,infoLog){log=GLctx.getProgramInfoLog(GL.programs[program]),log===null&&(log="(unknown error)");var log,numBytesWrittenExclNull=maxLength>0&&infoLog?stringToUTF8(log,infoLog,maxLength):0;length&&(HEAP32[length>>2]=numBytesWrittenExclNull)}var _emscripten_glGetProgramInfoLog=_glGetProgramInfoLog;function _glGetProgramiv(program,pname,p){if(!p){GL.recordError(1281);return}if(program>=GL.counter){GL.recordError(1281);return}if(program=GL.programs[program],pname==35716){var i,log=GLctx.getProgramInfoLog(program);log===null&&(log="(unknown error)"),HEAP32[p>>2]=log.length+1}else if(pname==35719){if(!program.maxUniformLength)for(i=0;i<GLctx.getProgramParameter(program,35718);++i)program.maxUniformLength=Math.max(program.maxUniformLength,GLctx.getActiveUniform(program,i).name.length+1);HEAP32[p>>2]=program.maxUniformLength}else if(pname==35722){if(!program.maxAttributeLength)for(i=0;i<GLctx.getProgramParameter(program,35721);++i)program.maxAttributeLength=Math.max(program.maxAttributeLength,GLctx.getActiveAttrib(program,i).name.length+1);HEAP32[p>>2]=program.maxAttributeLength}else if(pname==35381){if(!program.maxUniformBlockNameLength)for(i=0;i<GLctx.getProgramParameter(program,35382);++i)program.maxUniformBlockNameLength=Math.max(program.maxUniformBlockNameLength,GLctx.getActiveUniformBlockName(program,i).length+1);HEAP32[p>>2]=program.maxUniformBlockNameLength}else HEAP32[p>>2]=GLctx.getProgramParameter(program,pname)}var _emscripten_glGetProgramiv=_glGetProgramiv;function _glGetQueryObjecti64vEXT(id,pname,params){if(!params){GL.recordError(1281);return}var param,ret,query=GL.queries[id];GL.currentContext.version<2?param=GLctx.disjointTimerQueryExt.getQueryObjectEXT(query,pname):param=GLctx.getQueryParameter(query,pname),typeof param=="boolean"?ret=param?1:0:ret=param,writeI53ToI64(params,ret)}var _emscripten_glGetQueryObjecti64vEXT=_glGetQueryObjecti64vEXT;function _glGetQueryObjectivEXT(id,pname,params){if(!params){GL.recordError(1281);return}var ret,query=GL.queries[id],param=GLctx.disjointTimerQueryExt.getQueryObjectEXT(query,pname);typeof param=="boolean"?ret=param?1:0:ret=param,HEAP32[params>>2]=ret}var _emscripten_glGetQueryObjectivEXT=_glGetQueryObjectivEXT,_glGetQueryObjectui64vEXT=_glGetQueryObjecti64vEXT,_emscripten_glGetQueryObjectui64vEXT=_glGetQueryObjectui64vEXT;function _glGetQueryObjectuiv(id,pname,params){if(!params){GL.recordError(1281);return}var ret,query=GL.queries[id],param=GLctx.getQueryParameter(query,pname);typeof param=="boolean"?ret=param?1:0:ret=param,HEAP32[params>>2]=ret}var _emscripten_glGetQueryObjectuiv=_glGetQueryObjectuiv,_glGetQueryObjectuivEXT=_glGetQueryObjectivEXT,_emscripten_glGetQueryObjectuivEXT=_glGetQueryObjectuivEXT;function _glGetQueryiv(target,pname,params){if(!params){GL.recordError(1281);return}HEAP32[params>>2]=GLctx.getQuery(target,pname)}var _emscripten_glGetQueryiv=_glGetQueryiv;function _glGetQueryivEXT(target,pname,params){if(!params){GL.recordError(1281);return}HEAP32[params>>2]=GLctx.disjointTimerQueryExt.getQueryEXT(target,pname)}var _emscripten_glGetQueryivEXT=_glGetQueryivEXT;function _glGetRenderbufferParameteriv(target,pname,params){if(!params){GL.recordError(1281);return}HEAP32[params>>2]=GLctx.getRenderbufferParameter(target,pname)}var _emscripten_glGetRenderbufferParameteriv=_glGetRenderbufferParameteriv;function _glGetSamplerParameterfv(sampler,pname,params){if(!params){GL.recordError(1281);return}HEAPF32[params>>2]=GLctx.getSamplerParameter(GL.samplers[sampler],pname)}var _emscripten_glGetSamplerParameterfv=_glGetSamplerParameterfv;function _glGetSamplerParameteriv(sampler,pname,params){if(!params){GL.recordError(1281);return}HEAP32[params>>2]=GLctx.getSamplerParameter(GL.samplers[sampler],pname)}var _emscripten_glGetSamplerParameteriv=_glGetSamplerParameteriv;function _glGetShaderInfoLog(shader,maxLength,length,infoLog){log=GLctx.getShaderInfoLog(GL.shaders[shader]),log===null&&(log="(unknown error)");var log,numBytesWrittenExclNull=maxLength>0&&infoLog?stringToUTF8(log,infoLog,maxLength):0;length&&(HEAP32[length>>2]=numBytesWrittenExclNull)}var _emscripten_glGetShaderInfoLog=_glGetShaderInfoLog;function _glGetShaderPrecisionFormat(shaderType,precisionType,range,precision){var result=GLctx.getShaderPrecisionFormat(shaderType,precisionType);HEAP32[range>>2]=result.rangeMin,HEAP32[range+4>>2]=result.rangeMax,HEAP32[precision>>2]=result.precision}var _emscripten_glGetShaderPrecisionFormat=_glGetShaderPrecisionFormat;function _glGetShaderSource(shader,bufSize,length,source){var result=GLctx.getShaderSource(GL.shaders[shader]);if(!result)return;var numBytesWrittenExclNull=bufSize>0&&source?stringToUTF8(result,source,bufSize):0;length&&(HEAP32[length>>2]=numBytesWrittenExclNull)}var _emscripten_glGetShaderSource=_glGetShaderSource;function _glGetShaderiv(shader,pname,p){if(!p){GL.recordError(1281);return}if(pname==35716){log=GLctx.getShaderInfoLog(GL.shaders[shader]),log===null&&(log="(unknown error)");var logLength=log?log.length+1:0;HEAP32[p>>2]=logLength}else if(pname==35720){var log,source=GLctx.getShaderSource(GL.shaders[shader]),sourceLength=source?source.length+1:0;HEAP32[p>>2]=sourceLength}else HEAP32[p>>2]=GLctx.getShaderParameter(GL.shaders[shader],pname)}var _emscripten_glGetShaderiv=_glGetShaderiv;function _glGetString(name_){if(ret=GL.stringCache[name_],!ret){switch(name_){case 7939:var exts=GLctx.getSupportedExtensions()||[],exts=exts.concat(exts.map(function(e){return"GL_"+e}));ret=stringToNewUTF8(exts.join(" "));break;case 7936:case 7937:case 37445:case 37446:s=GLctx.getParameter(name_),s||GL.recordError(1280),ret=s&&stringToNewUTF8(s);break;case 7938:var glVersion=GLctx.getParameter(7938);GL.currentContext.version>=2?glVersion="OpenGL ES 3.0 ("+glVersion+")":glVersion="OpenGL ES 2.0 ("+glVersion+")",ret=stringToNewUTF8(glVersion);break;case 35724:var ret,s,glslVersion=GLctx.getParameter(35724),ver_re=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,ver_num=glslVersion.match(ver_re);ver_num!==null&&(ver_num[1].length==3&&(ver_num[1]=ver_num[1]+"0"),glslVersion="OpenGL ES GLSL ES "+ver_num[1]+" ("+glslVersion+")"),ret=stringToNewUTF8(glslVersion);break;default:GL.recordError(1280)}GL.stringCache[name_]=ret}return ret}var _emscripten_glGetString=_glGetString;function _glGetStringi(name,index){if(GL.currentContext.version<2)return GL.recordError(1282),0;var stringiCache=GL.stringiCache[name];if(stringiCache)return index<0||index>=stringiCache.length?(GL.recordError(1281),0):stringiCache[index];switch(name){case 7939:var exts=GLctx.getSupportedExtensions()||[],exts=exts.concat(exts.map(function(e){return"GL_"+e})),exts=exts.map(function(e){return stringToNewUTF8(e)});return stringiCache=GL.stringiCache[name]=exts,index<0||index>=stringiCache.length?(GL.recordError(1281),0):stringiCache[index];default:return GL.recordError(1280),0}}var _emscripten_glGetStringi=_glGetStringi;function _glGetSynciv(sync,pname,bufSize,length,values){if(bufSize<0){GL.recordError(1281);return}if(!values){GL.recordError(1281);return}var ret=GLctx.getSyncParameter(GL.syncs[sync],pname);ret!==null&&(HEAP32[values>>2]=ret,length&&(HEAP32[length>>2]=1))}var _emscripten_glGetSynciv=_glGetSynciv;function _glGetTexParameterfv(target,pname,params){if(!params){GL.recordError(1281);return}HEAPF32[params>>2]=GLctx.getTexParameter(target,pname)}var _emscripten_glGetTexParameterfv=_glGetTexParameterfv;function _glGetTexParameteriv(target,pname,params){if(!params){GL.recordError(1281);return}HEAP32[params>>2]=GLctx.getTexParameter(target,pname)}var _emscripten_glGetTexParameteriv=_glGetTexParameteriv;function _glGetTransformFeedbackVarying(program,index,bufSize,length,size,type,name){program=GL.programs[program];var info=GLctx.getTransformFeedbackVarying(program,index);if(!info)return;if(name&&bufSize>0){var numBytesWrittenExclNull=stringToUTF8(info.name,name,bufSize);length&&(HEAP32[length>>2]=numBytesWrittenExclNull)}else length&&(HEAP32[length>>2]=0);size&&(HEAP32[size>>2]=info.size),type&&(HEAP32[type>>2]=info.type)}var _emscripten_glGetTransformFeedbackVarying=_glGetTransformFeedbackVarying;function _glGetUniformBlockIndex(program,uniformBlockName){return GLctx.getUniformBlockIndex(GL.programs[program],UTF8ToString(uniformBlockName))}var _emscripten_glGetUniformBlockIndex=_glGetUniformBlockIndex;function _glGetUniformIndices(program,uniformCount,uniformNames,uniformIndices){if(!uniformIndices){GL.recordError(1281);return}if(uniformCount>0&&(uniformNames==0||uniformIndices==0)){GL.recordError(1281);return}program=GL.programs[program];for(var names=[],i=0;i<uniformCount;i++)names.push(UTF8ToString(HEAP32[uniformNames+i*4>>2]));var len,result=GLctx.getUniformIndices(program,names);if(!result)return;for(len=result.length,i=0;i<len;i++)HEAP32[uniformIndices+i*4>>2]=result[i]}var _emscripten_glGetUniformIndices=_glGetUniformIndices;function webglGetLeftBracePos(name){return name.slice(-1)=="]"&&name.lastIndexOf("[")}function webglPrepareUniformLocationsBeforeFirstUse(program){var i,u,j,nm,sz,lb,id,uniformLocsById=program.uniformLocsById,uniformSizeAndIdsByName=program.uniformSizeAndIdsByName;if(!uniformLocsById){program.uniformLocsById=uniformLocsById={},program.uniformArrayNamesById={};for(i=0;i<GLctx.getProgramParameter(program,35718);++i){var u=GLctx.getActiveUniform(program,i),nm=u.name,sz=u.size,lb=webglGetLeftBracePos(nm),arrayName=lb>0?nm.slice(0,lb):nm,id=program.uniformIdCounter;program.uniformIdCounter+=sz,uniformSizeAndIdsByName[arrayName]=[sz,id];for(j=0;j<sz;++j)uniformLocsById[id]=j,program.uniformArrayNamesById[id++]=arrayName}}}function _glGetUniformLocation(program,name){if(name=UTF8ToString(name),program=GL.programs[program]){{webglPrepareUniformLocationsBeforeFirstUse(program);var uniformLocsById=program.uniformLocsById,arrayIndex=0,uniformBaseName=name,leftBrace=webglGetLeftBracePos(name);leftBrace>0&&(arrayIndex=jstoi_q(name.slice(leftBrace+1))>>>0,uniformBaseName=name.slice(0,leftBrace));var sizeAndId=program.uniformSizeAndIdsByName[uniformBaseName];if(sizeAndId&&arrayIndex<sizeAndId[0]&&(arrayIndex+=sizeAndId[1],uniformLocsById[arrayIndex]=uniformLocsById[arrayIndex]||GLctx.getUniformLocation(program,name)))return arrayIndex}}else GL.recordError(1281);return-1}var _emscripten_glGetUniformLocation=_glGetUniformLocation;function webglGetUniformLocation(location){if(p=GLctx.currentProgram,p){var p,webglLoc=p.uniformLocsById[location];return typeof webglLoc=="number"&&(p.uniformLocsById[location]=webglLoc=GLctx.getUniformLocation(p,p.uniformArrayNamesById[location]+(webglLoc>0?"["+webglLoc+"]":""))),webglLoc}GL.recordError(1282)}function emscriptenWebGLGetUniform(program,location,params,type){if(!params){GL.recordError(1281);return}program=GL.programs[program],webglPrepareUniformLocationsBeforeFirstUse(program);var i,data=GLctx.getUniform(program,webglGetUniformLocation(location));if(typeof data=="number"||typeof data=="boolean")switch(type){case 0:HEAP32[params>>2]=data;break;case 2:HEAPF32[params>>2]=data;break}else for(i=0;i<data.length;i++)switch(type){case 0:HEAP32[params+i*4>>2]=data[i];break;case 2:HEAPF32[params+i*4>>2]=data[i];break}}function _glGetUniformfv(program,location,params){emscriptenWebGLGetUniform(program,location,params,2)}var _emscripten_glGetUniformfv=_glGetUniformfv;function _glGetUniformiv(program,location,params){emscriptenWebGLGetUniform(program,location,params,0)}var _emscripten_glGetUniformiv=_glGetUniformiv;function _glGetUniformuiv(program,location,params){emscriptenWebGLGetUniform(program,location,params,0)}var _emscripten_glGetUniformuiv=_glGetUniformuiv;function emscriptenWebGLGetVertexAttrib(index,pname,params,type){if(!params){GL.recordError(1281);return}var i,data=GLctx.getVertexAttrib(index,pname);if(pname==34975)HEAP32[params>>2]=data&&data.name;else if(typeof data=="number"||typeof data=="boolean")switch(type){case 0:HEAP32[params>>2]=data;break;case 2:HEAPF32[params>>2]=data;break;case 5:HEAP32[params>>2]=Math.fround(data);break}else for(i=0;i<data.length;i++)switch(type){case 0:HEAP32[params+i*4>>2]=data[i];break;case 2:HEAPF32[params+i*4>>2]=data[i];break;case 5:HEAP32[params+i*4>>2]=Math.fround(data[i]);break}}function _glGetVertexAttribIiv(index,pname,params){emscriptenWebGLGetVertexAttrib(index,pname,params,0)}var _emscripten_glGetVertexAttribIiv=_glGetVertexAttribIiv,_glGetVertexAttribIuiv=_glGetVertexAttribIiv,_emscripten_glGetVertexAttribIuiv=_glGetVertexAttribIuiv;function _glGetVertexAttribPointerv(index,pname,pointer){if(!pointer){GL.recordError(1281);return}HEAP32[pointer>>2]=GLctx.getVertexAttribOffset(index,pname)}var _emscripten_glGetVertexAttribPointerv=_glGetVertexAttribPointerv;function _glGetVertexAttribfv(index,pname,params){emscriptenWebGLGetVertexAttrib(index,pname,params,2)}var _emscripten_glGetVertexAttribfv=_glGetVertexAttribfv;function _glGetVertexAttribiv(index,pname,params){emscriptenWebGLGetVertexAttrib(index,pname,params,5)}var _emscripten_glGetVertexAttribiv=_glGetVertexAttribiv;function _glHint(x0,x1){GLctx.hint(x0,x1)}var _emscripten_glHint=_glHint;function _glInvalidateFramebuffer(target,numAttachments,attachments){for(var list=tempFixedLengthArray[numAttachments],i=0;i<numAttachments;i++)list[i]=HEAP32[attachments+i*4>>2];GLctx.invalidateFramebuffer(target,list)}var _emscripten_glInvalidateFramebuffer=_glInvalidateFramebuffer;function _glInvalidateSubFramebuffer(target,numAttachments,attachments,x,y,width,height){for(var list=tempFixedLengthArray[numAttachments],i=0;i<numAttachments;i++)list[i]=HEAP32[attachments+i*4>>2];GLctx.invalidateSubFramebuffer(target,list,x,y,width,height)}var _emscripten_glInvalidateSubFramebuffer=_glInvalidateSubFramebuffer;function _glIsBuffer(buffer){var b=GL.buffers[buffer];return b?GLctx.isBuffer(b):0}var _emscripten_glIsBuffer=_glIsBuffer;function _glIsEnabled(x0){return GLctx.isEnabled(x0)}var _emscripten_glIsEnabled=_glIsEnabled;function _glIsFramebuffer(framebuffer){var fb=GL.framebuffers[framebuffer];return fb?GLctx.isFramebuffer(fb):0}var _emscripten_glIsFramebuffer=_glIsFramebuffer;function _glIsProgram(program){return program=GL.programs[program],program?GLctx.isProgram(program):0}var _emscripten_glIsProgram=_glIsProgram;function _glIsQuery(id){var query=GL.queries[id];return query?GLctx.isQuery(query):0}var _emscripten_glIsQuery=_glIsQuery;function _glIsQueryEXT(id){var query=GL.queries[id];return query?GLctx.disjointTimerQueryExt.isQueryEXT(query):0}var _emscripten_glIsQueryEXT=_glIsQueryEXT;function _glIsRenderbuffer(renderbuffer){var rb=GL.renderbuffers[renderbuffer];return rb?GLctx.isRenderbuffer(rb):0}var _emscripten_glIsRenderbuffer=_glIsRenderbuffer;function _glIsSampler(id){var sampler=GL.samplers[id];return sampler?GLctx.isSampler(sampler):0}var _emscripten_glIsSampler=_glIsSampler;function _glIsShader(shader){var s=GL.shaders[shader];return s?GLctx.isShader(s):0}var _emscripten_glIsShader=_glIsShader;function _glIsSync(sync){return GLctx.isSync(GL.syncs[sync])}var _emscripten_glIsSync=_glIsSync;function _glIsTexture(id){var texture=GL.textures[id];return texture?GLctx.isTexture(texture):0}var _emscripten_glIsTexture=_glIsTexture;function _glIsTransformFeedback(id){return GLctx.isTransformFeedback(GL.transformFeedbacks[id])}var _emscripten_glIsTransformFeedback=_glIsTransformFeedback;function _glIsVertexArray(array){var vao=GL.vaos[array];return vao?GLctx.isVertexArray(vao):0}var _emscripten_glIsVertexArray=_glIsVertexArray,_glIsVertexArrayOES=_glIsVertexArray,_emscripten_glIsVertexArrayOES=_glIsVertexArrayOES;function _glLineWidth(x0){GLctx.lineWidth(x0)}var _emscripten_glLineWidth=_glLineWidth;function _glLinkProgram(program){program=GL.programs[program],GLctx.linkProgram(program),program.uniformLocsById=0,program.uniformSizeAndIdsByName={}}var _emscripten_glLinkProgram=_glLinkProgram;function _glPauseTransformFeedback(){GLctx.pauseTransformFeedback()}var _emscripten_glPauseTransformFeedback=_glPauseTransformFeedback;function _glPixelStorei(pname,param){pname==3317&&(GL.unpackAlignment=param),GLctx.pixelStorei(pname,param)}var _emscripten_glPixelStorei=_glPixelStorei;function _glPolygonOffset(x0,x1){GLctx.polygonOffset(x0,x1)}var _emscripten_glPolygonOffset=_glPolygonOffset;function _glProgramBinary(){GL.recordError(1280)}var _emscripten_glProgramBinary=_glProgramBinary;function _glProgramParameteri(){GL.recordError(1280)}var _emscripten_glProgramParameteri=_glProgramParameteri;function _glQueryCounterEXT(id,target){GLctx.disjointTimerQueryExt.queryCounterEXT(GL.queries[id],target)}var _emscripten_glQueryCounterEXT=_glQueryCounterEXT;function _glReadBuffer(x0){GLctx.readBuffer(x0)}var _emscripten_glReadBuffer=_glReadBuffer;function computeUnpackAlignedImageSize(width,height,sizePerPixel,alignment){function roundedToNextMultipleOf(x,y){return x+y-1&-y}var plainRowSize=width*sizePerPixel,alignedRowSize=roundedToNextMultipleOf(plainRowSize,alignment);return height*alignedRowSize}function colorChannelsInGlTextureFormat(format){var colorChannels={5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4};return colorChannels[format-6402]||1}function heapObjectForWebGLType(type){return type-=5120,type==0?HEAP8:type==1?HEAPU8:type==2?HEAP16:type==4?HEAP32:type==6?HEAPF32:type==5||type==28922||type==28520||type==30779||type==30782?HEAPU32:HEAPU16}function heapAccessShiftForWebGLHeap(heap){return 31-Math.clz32(heap.BYTES_PER_ELEMENT)}function emscriptenWebGLGetTexPixelData(type,format,width,height,pixels){var heap=heapObjectForWebGLType(type),shift=heapAccessShiftForWebGLHeap(heap),byteSize=1<<shift,sizePerPixel=colorChannelsInGlTextureFormat(format)*byteSize,bytes=computeUnpackAlignedImageSize(width,height,sizePerPixel,GL.unpackAlignment);return heap.subarray(pixels>>shift,pixels+bytes>>shift)}function _glReadPixels(x,y,width,height,format,type,pixels){if(GL.currentContext.version>=2){if(GLctx.currentPixelPackBufferBinding)GLctx.readPixels(x,y,width,height,format,type,pixels);else{var heap=heapObjectForWebGLType(type);GLctx.readPixels(x,y,width,height,format,type,heap,pixels>>heapAccessShiftForWebGLHeap(heap))}return}var pixelData=emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,format);if(!pixelData){GL.recordError(1280);return}GLctx.readPixels(x,y,width,height,format,type,pixelData)}var _emscripten_glReadPixels=_glReadPixels;function _glReleaseShaderCompiler(){}var _emscripten_glReleaseShaderCompiler=_glReleaseShaderCompiler;function _glRenderbufferStorage(x0,x1,x2,x3){GLctx.renderbufferStorage(x0,x1,x2,x3)}var _emscripten_glRenderbufferStorage=_glRenderbufferStorage;function _glRenderbufferStorageMultisample(x0,x1,x2,x3,x4){GLctx.renderbufferStorageMultisample(x0,x1,x2,x3,x4)}var _emscripten_glRenderbufferStorageMultisample=_glRenderbufferStorageMultisample;function _glResumeTransformFeedback(){GLctx.resumeTransformFeedback()}var _emscripten_glResumeTransformFeedback=_glResumeTransformFeedback;function _glSampleCoverage(value,invert){GLctx.sampleCoverage(value,!!invert)}var _emscripten_glSampleCoverage=_glSampleCoverage;function _glSamplerParameterf(sampler,pname,param){GLctx.samplerParameterf(GL.samplers[sampler],pname,param)}var _emscripten_glSamplerParameterf=_glSamplerParameterf;function _glSamplerParameterfv(sampler,pname,params){var param=HEAPF32[params>>2];GLctx.samplerParameterf(GL.samplers[sampler],pname,param)}var _emscripten_glSamplerParameterfv=_glSamplerParameterfv;function _glSamplerParameteri(sampler,pname,param){GLctx.samplerParameteri(GL.samplers[sampler],pname,param)}var _emscripten_glSamplerParameteri=_glSamplerParameteri;function _glSamplerParameteriv(sampler,pname,params){var param=HEAP32[params>>2];GLctx.samplerParameteri(GL.samplers[sampler],pname,param)}var _emscripten_glSamplerParameteriv=_glSamplerParameteriv;function _glScissor(x0,x1,x2,x3){GLctx.scissor(x0,x1,x2,x3)}var _emscripten_glScissor=_glScissor;function _glShaderBinary(){GL.recordError(1280)}var _emscripten_glShaderBinary=_glShaderBinary;function _glShaderSource(shader,count,string,length){var source=GL.getSource(shader,count,string,length);GLctx.shaderSource(GL.shaders[shader],source)}var _emscripten_glShaderSource=_glShaderSource;function _glStencilFunc(x0,x1,x2){GLctx.stencilFunc(x0,x1,x2)}var _emscripten_glStencilFunc=_glStencilFunc;function _glStencilFuncSeparate(x0,x1,x2,x3){GLctx.stencilFuncSeparate(x0,x1,x2,x3)}var _emscripten_glStencilFuncSeparate=_glStencilFuncSeparate;function _glStencilMask(x0){GLctx.stencilMask(x0)}var _emscripten_glStencilMask=_glStencilMask;function _glStencilMaskSeparate(x0,x1){GLctx.stencilMaskSeparate(x0,x1)}var _emscripten_glStencilMaskSeparate=_glStencilMaskSeparate;function _glStencilOp(x0,x1,x2){GLctx.stencilOp(x0,x1,x2)}var _emscripten_glStencilOp=_glStencilOp;function _glStencilOpSeparate(x0,x1,x2,x3){GLctx.stencilOpSeparate(x0,x1,x2,x3)}var _emscripten_glStencilOpSeparate=_glStencilOpSeparate;function _glTexImage2D(target,level,internalFormat,width,height,border,format,type,pixels){if(GL.currentContext.version>=2){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,pixels);else if(pixels){var heap=heapObjectForWebGLType(type);GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,heap,pixels>>heapAccessShiftForWebGLHeap(heap))}else GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,null);return}GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,pixels?emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,internalFormat):null)}var _emscripten_glTexImage2D=_glTexImage2D;function _glTexImage3D(target,level,internalFormat,width,height,depth,border,format,type,pixels){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texImage3D(target,level,internalFormat,width,height,depth,border,format,type,pixels);else if(pixels){var heap=heapObjectForWebGLType(type);GLctx.texImage3D(target,level,internalFormat,width,height,depth,border,format,type,heap,pixels>>heapAccessShiftForWebGLHeap(heap))}else GLctx.texImage3D(target,level,internalFormat,width,height,depth,border,format,type,null)}var _emscripten_glTexImage3D=_glTexImage3D;function _glTexParameterf(x0,x1,x2){GLctx.texParameterf(x0,x1,x2)}var _emscripten_glTexParameterf=_glTexParameterf;function _glTexParameterfv(target,pname,params){var param=HEAPF32[params>>2];GLctx.texParameterf(target,pname,param)}var _emscripten_glTexParameterfv=_glTexParameterfv;function _glTexParameteri(x0,x1,x2){GLctx.texParameteri(x0,x1,x2)}var _emscripten_glTexParameteri=_glTexParameteri;function _glTexParameteriv(target,pname,params){var param=HEAP32[params>>2];GLctx.texParameteri(target,pname,param)}var _emscripten_glTexParameteriv=_glTexParameteriv;function _glTexStorage2D(x0,x1,x2,x3,x4){GLctx.texStorage2D(x0,x1,x2,x3,x4)}var _emscripten_glTexStorage2D=_glTexStorage2D;function _glTexStorage3D(x0,x1,x2,x3,x4,x5){GLctx.texStorage3D(x0,x1,x2,x3,x4,x5)}var _emscripten_glTexStorage3D=_glTexStorage3D;function _glTexSubImage2D(target,level,xoffset,yoffset,width,height,format,type,pixels){if(GL.currentContext.version>=2){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texSubImage2D(target,level,xoffset,yoffset,width,height,format,type,pixels);else if(pixels){var heap=heapObjectForWebGLType(type);GLctx.texSubImage2D(target,level,xoffset,yoffset,width,height,format,type,heap,pixels>>heapAccessShiftForWebGLHeap(heap))}else GLctx.texSubImage2D(target,level,xoffset,yoffset,width,height,format,type,null);return}var pixelData=null;pixels&&(pixelData=emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,0)),GLctx.texSubImage2D(target,level,xoffset,yoffset,width,height,format,type,pixelData)}var _emscripten_glTexSubImage2D=_glTexSubImage2D;function _glTexSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,type,pixels){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,type,pixels);else if(pixels){var heap=heapObjectForWebGLType(type);GLctx.texSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,type,heap,pixels>>heapAccessShiftForWebGLHeap(heap))}else GLctx.texSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,type,null)}var _emscripten_glTexSubImage3D=_glTexSubImage3D;function _glTransformFeedbackVaryings(program,count,varyings,bufferMode){program=GL.programs[program];for(var vars=[],i=0;i<count;i++)vars.push(UTF8ToString(HEAP32[varyings+i*4>>2]));GLctx.transformFeedbackVaryings(program,vars,bufferMode)}var _emscripten_glTransformFeedbackVaryings=_glTransformFeedbackVaryings;function _glUniform1f(location,v0){GLctx.uniform1f(webglGetUniformLocation(location),v0)}var _emscripten_glUniform1f=_glUniform1f,miniTempWebGLFloatBuffers=[];function _glUniform1fv(location,count,value){if(GL.currentContext.version>=2){count&&GLctx.uniform1fv(webglGetUniformLocation(location),HEAPF32,value>>2,count);return}if(count<=288)for(var view=miniTempWebGLFloatBuffers[count-1],i=0;i<count;++i)view[i]=HEAPF32[value+4*i>>2];else var view=HEAPF32.subarray(value>>2,value+count*4>>2);GLctx.uniform1fv(webglGetUniformLocation(location),view)}var _emscripten_glUniform1fv=_glUniform1fv;function _glUniform1i(location,v0){GLctx.uniform1i(webglGetUniformLocation(location),v0)}var _emscripten_glUniform1i=_glUniform1i,miniTempWebGLIntBuffers=[];function _glUniform1iv(location,count,value){if(GL.currentContext.version>=2){count&&GLctx.uniform1iv(webglGetUniformLocation(location),HEAP32,value>>2,count);return}if(count<=288)for(var view=miniTempWebGLIntBuffers[count-1],i=0;i<count;++i)view[i]=HEAP32[value+4*i>>2];else var view=HEAP32.subarray(value>>2,value+count*4>>2);GLctx.uniform1iv(webglGetUniformLocation(location),view)}var _emscripten_glUniform1iv=_glUniform1iv;function _glUniform1ui(location,v0){GLctx.uniform1ui(webglGetUniformLocation(location),v0)}var _emscripten_glUniform1ui=_glUniform1ui;function _glUniform1uiv(location,count,value){count&&GLctx.uniform1uiv(webglGetUniformLocation(location),HEAPU32,value>>2,count)}var _emscripten_glUniform1uiv=_glUniform1uiv;function _glUniform2f(location,v0,v1){GLctx.uniform2f(webglGetUniformLocation(location),v0,v1)}var _emscripten_glUniform2f=_glUniform2f;function _glUniform2fv(location,count,value){if(GL.currentContext.version>=2){count&&GLctx.uniform2fv(webglGetUniformLocation(location),HEAPF32,value>>2,count*2);return}if(count<=144)for(var view=miniTempWebGLFloatBuffers[2*count-1],i=0;i<2*count;i+=2)view[i]=HEAPF32[value+4*i>>2],view[i+1]=HEAPF32[value+(4*i+4)>>2];else var view=HEAPF32.subarray(value>>2,value+count*8>>2);GLctx.uniform2fv(webglGetUniformLocation(location),view)}var _emscripten_glUniform2fv=_glUniform2fv;function _glUniform2i(location,v0,v1){GLctx.uniform2i(webglGetUniformLocation(location),v0,v1)}var _emscripten_glUniform2i=_glUniform2i;function _glUniform2iv(location,count,value){if(GL.currentContext.version>=2){count&&GLctx.uniform2iv(webglGetUniformLocation(location),HEAP32,value>>2,count*2);return}if(count<=144)for(var view=miniTempWebGLIntBuffers[2*count-1],i=0;i<2*count;i+=2)view[i]=HEAP32[value+4*i>>2],view[i+1]=HEAP32[value+(4*i+4)>>2];else var view=HEAP32.subarray(value>>2,value+count*8>>2);GLctx.uniform2iv(webglGetUniformLocation(location),view)}var _emscripten_glUniform2iv=_glUniform2iv;function _glUniform2ui(location,v0,v1){GLctx.uniform2ui(webglGetUniformLocation(location),v0,v1)}var _emscripten_glUniform2ui=_glUniform2ui;function _glUniform2uiv(location,count,value){count&&GLctx.uniform2uiv(webglGetUniformLocation(location),HEAPU32,value>>2,count*2)}var _emscripten_glUniform2uiv=_glUniform2uiv;function _glUniform3f(location,v0,v1,v2){GLctx.uniform3f(webglGetUniformLocation(location),v0,v1,v2)}var _emscripten_glUniform3f=_glUniform3f;function _glUniform3fv(location,count,value){if(GL.currentContext.version>=2){count&&GLctx.uniform3fv(webglGetUniformLocation(location),HEAPF32,value>>2,count*3);return}if(count<=96)for(var view=miniTempWebGLFloatBuffers[3*count-1],i=0;i<3*count;i+=3)view[i]=HEAPF32[value+4*i>>2],view[i+1]=HEAPF32[value+(4*i+4)>>2],view[i+2]=HEAPF32[value+(4*i+8)>>2];else var view=HEAPF32.subarray(value>>2,value+count*12>>2);GLctx.uniform3fv(webglGetUniformLocation(location),view)}var _emscripten_glUniform3fv=_glUniform3fv;function _glUniform3i(location,v0,v1,v2){GLctx.uniform3i(webglGetUniformLocation(location),v0,v1,v2)}var _emscripten_glUniform3i=_glUniform3i;function _glUniform3iv(location,count,value){if(GL.currentContext.version>=2){count&&GLctx.uniform3iv(webglGetUniformLocation(location),HEAP32,value>>2,count*3);return}if(count<=96)for(var view=miniTempWebGLIntBuffers[3*count-1],i=0;i<3*count;i+=3)view[i]=HEAP32[value+4*i>>2],view[i+1]=HEAP32[value+(4*i+4)>>2],view[i+2]=HEAP32[value+(4*i+8)>>2];else var view=HEAP32.subarray(value>>2,value+count*12>>2);GLctx.uniform3iv(webglGetUniformLocation(location),view)}var _emscripten_glUniform3iv=_glUniform3iv;function _glUniform3ui(location,v0,v1,v2){GLctx.uniform3ui(webglGetUniformLocation(location),v0,v1,v2)}var _emscripten_glUniform3ui=_glUniform3ui;function _glUniform3uiv(location,count,value){count&&GLctx.uniform3uiv(webglGetUniformLocation(location),HEAPU32,value>>2,count*3)}var _emscripten_glUniform3uiv=_glUniform3uiv;function _glUniform4f(location,v0,v1,v2,v3){GLctx.uniform4f(webglGetUniformLocation(location),v0,v1,v2,v3)}var _emscripten_glUniform4f=_glUniform4f;function _glUniform4fv(location,count,value){if(GL.currentContext.version>=2){count&&GLctx.uniform4fv(webglGetUniformLocation(location),HEAPF32,value>>2,count*4);return}if(count<=72){var i,dst,view=miniTempWebGLFloatBuffers[4*count-1],heap=HEAPF32;value>>=2;for(i=0;i<4*count;i+=4)dst=value+i,view[i]=heap[dst],view[i+1]=heap[dst+1],view[i+2]=heap[dst+2],view[i+3]=heap[dst+3]}else var view=HEAPF32.subarray(value>>2,value+count*16>>2);GLctx.uniform4fv(webglGetUniformLocation(location),view)}var _emscripten_glUniform4fv=_glUniform4fv;function _glUniform4i(location,v0,v1,v2,v3){GLctx.uniform4i(webglGetUniformLocation(location),v0,v1,v2,v3)}var _emscripten_glUniform4i=_glUniform4i;function _glUniform4iv(location,count,value){if(GL.currentContext.version>=2){count&&GLctx.uniform4iv(webglGetUniformLocation(location),HEAP32,value>>2,count*4);return}if(count<=72)for(var view=miniTempWebGLIntBuffers[4*count-1],i=0;i<4*count;i+=4)view[i]=HEAP32[value+4*i>>2],view[i+1]=HEAP32[value+(4*i+4)>>2],view[i+2]=HEAP32[value+(4*i+8)>>2],view[i+3]=HEAP32[value+(4*i+12)>>2];else var view=HEAP32.subarray(value>>2,value+count*16>>2);GLctx.uniform4iv(webglGetUniformLocation(location),view)}var _emscripten_glUniform4iv=_glUniform4iv;function _glUniform4ui(location,v0,v1,v2,v3){GLctx.uniform4ui(webglGetUniformLocation(location),v0,v1,v2,v3)}var _emscripten_glUniform4ui=_glUniform4ui;function _glUniform4uiv(location,count,value){count&&GLctx.uniform4uiv(webglGetUniformLocation(location),HEAPU32,value>>2,count*4)}var _emscripten_glUniform4uiv=_glUniform4uiv;function _glUniformBlockBinding(program,uniformBlockIndex,uniformBlockBinding){program=GL.programs[program],GLctx.uniformBlockBinding(program,uniformBlockIndex,uniformBlockBinding)}var _emscripten_glUniformBlockBinding=_glUniformBlockBinding;function _glUniformMatrix2fv(location,count,transpose,value){if(GL.currentContext.version>=2){count&&GLctx.uniformMatrix2fv(webglGetUniformLocation(location),!!transpose,HEAPF32,value>>2,count*4);return}if(count<=72)for(var view=miniTempWebGLFloatBuffers[4*count-1],i=0;i<4*count;i+=4)view[i]=HEAPF32[value+4*i>>2],view[i+1]=HEAPF32[value+(4*i+4)>>2],view[i+2]=HEAPF32[value+(4*i+8)>>2],view[i+3]=HEAPF32[value+(4*i+12)>>2];else var view=HEAPF32.subarray(value>>2,value+count*16>>2);GLctx.uniformMatrix2fv(webglGetUniformLocation(location),!!transpose,view)}var _emscripten_glUniformMatrix2fv=_glUniformMatrix2fv;function _glUniformMatrix2x3fv(location,count,transpose,value){count&&GLctx.uniformMatrix2x3fv(webglGetUniformLocation(location),!!transpose,HEAPF32,value>>2,count*6)}var _emscripten_glUniformMatrix2x3fv=_glUniformMatrix2x3fv;function _glUniformMatrix2x4fv(location,count,transpose,value){count&&GLctx.uniformMatrix2x4fv(webglGetUniformLocation(location),!!transpose,HEAPF32,value>>2,count*8)}var _emscripten_glUniformMatrix2x4fv=_glUniformMatrix2x4fv;function _glUniformMatrix3fv(location,count,transpose,value){if(GL.currentContext.version>=2){count&&GLctx.uniformMatrix3fv(webglGetUniformLocation(location),!!transpose,HEAPF32,value>>2,count*9);return}if(count<=32)for(var view=miniTempWebGLFloatBuffers[9*count-1],i=0;i<9*count;i+=9)view[i]=HEAPF32[value+4*i>>2],view[i+1]=HEAPF32[value+(4*i+4)>>2],view[i+2]=HEAPF32[value+(4*i+8)>>2],view[i+3]=HEAPF32[value+(4*i+12)>>2],view[i+4]=HEAPF32[value+(4*i+16)>>2],view[i+5]=HEAPF32[value+(4*i+20)>>2],view[i+6]=HEAPF32[value+(4*i+24)>>2],view[i+7]=HEAPF32[value+(4*i+28)>>2],view[i+8]=HEAPF32[value+(4*i+32)>>2];else var view=HEAPF32.subarray(value>>2,value+count*36>>2);GLctx.uniformMatrix3fv(webglGetUniformLocation(location),!!transpose,view)}var _emscripten_glUniformMatrix3fv=_glUniformMatrix3fv;function _glUniformMatrix3x2fv(location,count,transpose,value){count&&GLctx.uniformMatrix3x2fv(webglGetUniformLocation(location),!!transpose,HEAPF32,value>>2,count*6)}var _emscripten_glUniformMatrix3x2fv=_glUniformMatrix3x2fv;function _glUniformMatrix3x4fv(location,count,transpose,value){count&&GLctx.uniformMatrix3x4fv(webglGetUniformLocation(location),!!transpose,HEAPF32,value>>2,count*12)}var _emscripten_glUniformMatrix3x4fv=_glUniformMatrix3x4fv;function _glUniformMatrix4fv(location,count,transpose,value){if(GL.currentContext.version>=2){count&&GLctx.uniformMatrix4fv(webglGetUniformLocation(location),!!transpose,HEAPF32,value>>2,count*16);return}if(count<=18){var i,dst,view=miniTempWebGLFloatBuffers[16*count-1],heap=HEAPF32;value>>=2;for(i=0;i<16*count;i+=16)dst=value+i,view[i]=heap[dst],view[i+1]=heap[dst+1],view[i+2]=heap[dst+2],view[i+3]=heap[dst+3],view[i+4]=heap[dst+4],view[i+5]=heap[dst+5],view[i+6]=heap[dst+6],view[i+7]=heap[dst+7],view[i+8]=heap[dst+8],view[i+9]=heap[dst+9],view[i+10]=heap[dst+10],view[i+11]=heap[dst+11],view[i+12]=heap[dst+12],view[i+13]=heap[dst+13],view[i+14]=heap[dst+14],view[i+15]=heap[dst+15]}else var view=HEAPF32.subarray(value>>2,value+count*64>>2);GLctx.uniformMatrix4fv(webglGetUniformLocation(location),!!transpose,view)}var _emscripten_glUniformMatrix4fv=_glUniformMatrix4fv;function _glUniformMatrix4x2fv(location,count,transpose,value){count&&GLctx.uniformMatrix4x2fv(webglGetUniformLocation(location),!!transpose,HEAPF32,value>>2,count*8)}var _emscripten_glUniformMatrix4x2fv=_glUniformMatrix4x2fv;function _glUniformMatrix4x3fv(location,count,transpose,value){count&&GLctx.uniformMatrix4x3fv(webglGetUniformLocation(location),!!transpose,HEAPF32,value>>2,count*12)}var _emscripten_glUniformMatrix4x3fv=_glUniformMatrix4x3fv;function _glUseProgram(program){program=GL.programs[program],GLctx.useProgram(program),GLctx.currentProgram=program}var _emscripten_glUseProgram=_glUseProgram;function _glValidateProgram(program){GLctx.validateProgram(GL.programs[program])}var _emscripten_glValidateProgram=_glValidateProgram;function _glVertexAttrib1f(x0,x1){GLctx.vertexAttrib1f(x0,x1)}var _emscripten_glVertexAttrib1f=_glVertexAttrib1f;function _glVertexAttrib1fv(index,v){GLctx.vertexAttrib1f(index,HEAPF32[v>>2])}var _emscripten_glVertexAttrib1fv=_glVertexAttrib1fv;function _glVertexAttrib2f(x0,x1,x2){GLctx.vertexAttrib2f(x0,x1,x2)}var _emscripten_glVertexAttrib2f=_glVertexAttrib2f;function _glVertexAttrib2fv(index,v){GLctx.vertexAttrib2f(index,HEAPF32[v>>2],HEAPF32[v+4>>2])}var _emscripten_glVertexAttrib2fv=_glVertexAttrib2fv;function _glVertexAttrib3f(x0,x1,x2,x3){GLctx.vertexAttrib3f(x0,x1,x2,x3)}var _emscripten_glVertexAttrib3f=_glVertexAttrib3f;function _glVertexAttrib3fv(index,v){GLctx.vertexAttrib3f(index,HEAPF32[v>>2],HEAPF32[v+4>>2],HEAPF32[v+8>>2])}var _emscripten_glVertexAttrib3fv=_glVertexAttrib3fv;function _glVertexAttrib4f(x0,x1,x2,x3,x4){GLctx.vertexAttrib4f(x0,x1,x2,x3,x4)}var _emscripten_glVertexAttrib4f=_glVertexAttrib4f;function _glVertexAttrib4fv(index,v){GLctx.vertexAttrib4f(index,HEAPF32[v>>2],HEAPF32[v+4>>2],HEAPF32[v+8>>2],HEAPF32[v+12>>2])}var _emscripten_glVertexAttrib4fv=_glVertexAttrib4fv;function _glVertexAttribDivisor(index,divisor){GLctx.vertexAttribDivisor(index,divisor)}var _emscripten_glVertexAttribDivisor=_glVertexAttribDivisor,_glVertexAttribDivisorANGLE=_glVertexAttribDivisor,_emscripten_glVertexAttribDivisorANGLE=_glVertexAttribDivisorANGLE,_glVertexAttribDivisorARB=_glVertexAttribDivisor,_emscripten_glVertexAttribDivisorARB=_glVertexAttribDivisorARB,_glVertexAttribDivisorEXT=_glVertexAttribDivisor,_emscripten_glVertexAttribDivisorEXT=_glVertexAttribDivisorEXT,_glVertexAttribDivisorNV=_glVertexAttribDivisor,_emscripten_glVertexAttribDivisorNV=_glVertexAttribDivisorNV;function _glVertexAttribI4i(x0,x1,x2,x3,x4){GLctx.vertexAttribI4i(x0,x1,x2,x3,x4)}var _emscripten_glVertexAttribI4i=_glVertexAttribI4i;function _glVertexAttribI4iv(index,v){GLctx.vertexAttribI4i(index,HEAP32[v>>2],HEAP32[v+4>>2],HEAP32[v+8>>2],HEAP32[v+12>>2])}var _emscripten_glVertexAttribI4iv=_glVertexAttribI4iv;function _glVertexAttribI4ui(x0,x1,x2,x3,x4){GLctx.vertexAttribI4ui(x0,x1,x2,x3,x4)}var _emscripten_glVertexAttribI4ui=_glVertexAttribI4ui;function _glVertexAttribI4uiv(index,v){GLctx.vertexAttribI4ui(index,HEAPU32[v>>2],HEAPU32[v+4>>2],HEAPU32[v+8>>2],HEAPU32[v+12>>2])}var _emscripten_glVertexAttribI4uiv=_glVertexAttribI4uiv;function _glVertexAttribIPointer(index,size,type,stride,ptr){GLctx.vertexAttribIPointer(index,size,type,stride,ptr)}var _emscripten_glVertexAttribIPointer=_glVertexAttribIPointer;function _glVertexAttribPointer(index,size,type,normalized,stride,ptr){GLctx.vertexAttribPointer(index,size,type,!!normalized,stride,ptr)}var _emscripten_glVertexAttribPointer=_glVertexAttribPointer;function _glViewport(x0,x1,x2,x3){GLctx.viewport(x0,x1,x2,x3)}var _emscripten_glViewport=_glViewport;function _glWaitSync(sync,flags,timeout_low,timeout_high){var timeout=convertI32PairToI53(timeout_low,timeout_high);GLctx.waitSync(GL.syncs[sync],flags,timeout)}var _emscripten_glWaitSync=_glWaitSync;function _emscripten_memcpy_big(dest,src,num){HEAPU8.copyWithin(dest,src,src+num)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(size){var b=wasmMemory.buffer;try{return wasmMemory.grow(size-b.byteLength+65535>>>16),updateMemoryViews(),1}catch{}}function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;requestedSize=requestedSize>>>0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize)return!1;for(var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple,cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown),overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296),newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536)),replacement=emscripten_realloc_buffer(newSize);if(replacement)return!0}return!1}function _emscripten_set_main_loop(func,fps,simulateInfiniteLoop){var browserIterationFunc=getWasmTableEntry(func);setMainLoop(browserIterationFunc,fps,simulateInfiniteLoop)}var JSEvents={inEventHandler:0,removeAllEventListeners:function(){for(var i=JSEvents.eventHandlers.length-1;i>=0;--i)JSEvents._removeHandler(i);JSEvents.eventHandlers=[],JSEvents.deferredCalls=[]},registerRemoveEventListeners:function(){JSEvents.removeEventListenersRegistered||(__ATEXIT__.push(JSEvents.removeAllEventListeners),JSEvents.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(targetFunction,precedence,argsList){function arraysHaveEqualContent(arrA,arrB){if(arrA.length!=arrB.length)return!1;for(var i in arrA)if(arrA[i]!=arrB[i])return!1;return!0}for(i in JSEvents.deferredCalls){var i,call=JSEvents.deferredCalls[i];if(call.targetFunction==targetFunction&&arraysHaveEqualContent(call.argsList,argsList))return}JSEvents.deferredCalls.push({targetFunction,precedence,argsList}),JSEvents.deferredCalls.sort(function(x,y){return x.precedence<y.precedence})},removeDeferredCalls:function(targetFunction){for(var i=0;i<JSEvents.deferredCalls.length;++i)JSEvents.deferredCalls[i].targetFunction==targetFunction&&(JSEvents.deferredCalls.splice(i,1),--i)},canPerformEventHandlerRequests:function(){return JSEvents.inEventHandler&&JSEvents.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(!JSEvents.canPerformEventHandlerRequests())return;for(i=0;i<JSEvents.deferredCalls.length;++i){var i,call=JSEvents.deferredCalls[i];JSEvents.deferredCalls.splice(i,1),--i,call.targetFunction.apply(null,call.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(target,eventTypeString){for(var i=0;i<JSEvents.eventHandlers.length;++i)JSEvents.eventHandlers[i].target==target&&(!eventTypeString||eventTypeString==JSEvents.eventHandlers[i].eventTypeString)&&JSEvents._removeHandler(i--)},_removeHandler:function(i){var h=JSEvents.eventHandlers[i];h.target.removeEventListener(h.eventTypeString,h.eventListenerFunc,h.useCapture),JSEvents.eventHandlers.splice(i,1)},registerOrRemoveHandler:function(eventHandler){if(!eventHandler.target)return-4;var i,jsEventHandler=function(event){++JSEvents.inEventHandler,JSEvents.currentEventHandler=eventHandler,JSEvents.runDeferredCalls(),eventHandler.handlerFunc(event),JSEvents.runDeferredCalls(),--JSEvents.inEventHandler};if(eventHandler.callbackfunc)eventHandler.eventListenerFunc=jsEventHandler,eventHandler.target.addEventListener(eventHandler.eventTypeString,jsEventHandler,eventHandler.useCapture),JSEvents.eventHandlers.push(eventHandler),JSEvents.registerRemoveEventListeners();else for(i=0;i<JSEvents.eventHandlers.length;++i)JSEvents.eventHandlers[i].target==eventHandler.target&&JSEvents.eventHandlers[i].eventTypeString==eventHandler.eventTypeString&&JSEvents._removeHandler(i--);return 0},getNodeNameForTarget:function(target){return target?target==window?"#window":target==screen?"#screen":target&&target.nodeName?target.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},emscripten_webgl_power_preferences=["default","low-power","high-performance"];function maybeCStringToJsString(cString){return cString>2?UTF8ToString(cString):cString}var specialHTMLTargets=[0,typeof document!="undefined"?document:0,typeof window!="undefined"?window:0];function findEventTarget(target){target=maybeCStringToJsString(target);var domElement=specialHTMLTargets[target]||(typeof document!="undefined"?document.querySelector(target):0[0]);return domElement}function findCanvasEventTarget(target){return findEventTarget(target)}function _emscripten_webgl_do_create_context(target,attributes){var a=attributes>>2,powerPreference=HEAP32[a+(24>>2)],contextAttributes={alpha:!!HEAP32[a+(0>>2)],depth:!!HEAP32[a+(4>>2)],stencil:!!HEAP32[a+(8>>2)],antialias:!!HEAP32[a+(12>>2)],premultipliedAlpha:!!HEAP32[a+(16>>2)],preserveDrawingBuffer:!!HEAP32[a+(20>>2)],powerPreference:emscripten_webgl_power_preferences[powerPreference],failIfMajorPerformanceCaveat:!!HEAP32[a+(28>>2)],majorVersion:HEAP32[a+(32>>2)],minorVersion:HEAP32[a+(36>>2)],enableExtensionsByDefault:HEAP32[a+(40>>2)],explicitSwapControl:HEAP32[a+(44>>2)],proxyContextToMainThread:HEAP32[a+(48>>2)],renderViaOffscreenBackBuffer:HEAP32[a+(52>>2)]},canvas=findCanvasEventTarget(target);if(!canvas)return 0;contextAttributes.explicitSwapControl&&!contextAttributes.renderViaOffscreenBackBuffer&&(contextAttributes.renderViaOffscreenBackBuffer=!0);var contextHandle=GL.createContext(canvas,contextAttributes);return contextHandle}var _emscripten_webgl_create_context=_emscripten_webgl_do_create_context;function _emscripten_webgl_destroy_context(contextHandle){GL.currentContext==contextHandle&&(GL.currentContext=0),GL.deleteContext(contextHandle)}function _emscripten_webgl_init_context_attributes(attributes){for(var a=attributes>>2,i=0;i<56>>2;++i)HEAP32[a+i]=0;HEAP32[a+(0>>2)]=HEAP32[a+(4>>2)]=HEAP32[a+(12>>2)]=HEAP32[a+(16>>2)]=HEAP32[a+(32>>2)]=HEAP32[a+(40>>2)]=1}function _emscripten_webgl_make_context_current(contextHandle){var success=GL.makeContextCurrent(contextHandle);return success?0:-5}ENV={};function getExecutableName(){return thisProgram||"./this.program"}function getEnvStrings(){if(!getEnvStrings.strings){var lang=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",env={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:lang,_:getExecutableName()};for(x in ENV)ENV[x]===0[0]?delete env[x]:env[x]=ENV[x];var x,strings=[];for(x in env)strings.push(x+"="+env[x]);getEnvStrings.strings=strings}return getEnvStrings.strings}function stringToAscii(str,buffer){for(var i=0;i<str.length;++i)HEAP8[buffer++>>0]=str.charCodeAt(i);HEAP8[buffer>>0]=0}function _environ_get(__environ,environ_buf){var bufSize=0;return getEnvStrings().forEach(function(string,i){var ptr=environ_buf+bufSize;HEAPU32[__environ+i*4>>2]=ptr,stringToAscii(string,ptr),bufSize+=string.length+1}),0}function _environ_sizes_get(penviron_count,penviron_buf_size){var strings=getEnvStrings();HEAPU32[penviron_count>>2]=strings.length;var bufSize=0;return strings.forEach(function(string){bufSize+=string.length+1}),HEAPU32[penviron_buf_size>>2]=bufSize,0}function _fd_close(fd){try{var stream=SYSCALLS.getStreamFromFD(fd);return FS.close(stream),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}function _fd_fdstat_get(fd,pbuf){try{var rightsBase=0,rightsInheriting=0,flags=0,stream=SYSCALLS.getStreamFromFD(fd),type=stream.tty?2:FS.isDir(stream.mode)?3:FS.isLink(stream.mode)?7:4;return HEAP8[pbuf>>0]=type,HEAP16[pbuf+2>>1]=flags,tempI64=[rightsBase>>>0,(tempDouble=rightsBase,+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[pbuf+8>>2]=tempI64[0],HEAP32[pbuf+12>>2]=tempI64[1],tempI64=[rightsInheriting>>>0,(tempDouble=rightsInheriting,+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[pbuf+16>>2]=tempI64[0],HEAP32[pbuf+20>>2]=tempI64[1],0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}function doReadv(stream,iov,iovcnt,offset){for(ret=0,i=0;i<iovcnt;i++){ptr=HEAPU32[iov>>2],len=HEAPU32[iov+4>>2],iov+=8;var ret,i,ptr,len,curr=FS.read(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;if(ret+=curr,curr<len)break;typeof offset!="undefined"&&(offset+=curr)}return ret}function _fd_read(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd),num=doReadv(stream,iov,iovcnt);return HEAPU32[pnum>>2]=num,0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}function convertI32PairToI53Checked(lo,hi){return hi+2097152>>>0<4194305-!!lo?(lo>>>0)+hi*4294967296:NaN}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){try{var offset=convertI32PairToI53Checked(offset_low,offset_high);if(offset!=offset)return 61;var stream=SYSCALLS.getStreamFromFD(fd);return FS.llseek(stream,offset,whence),tempI64=[stream.position>>>0,(tempDouble=stream.position,+Math.abs(tempDouble)>=1?tempDouble>0?+Math.floor(tempDouble/4294967296)>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[newOffset>>2]=tempI64[0],HEAP32[newOffset+4>>2]=tempI64[1],stream.getdents&&offset===0&&whence===0&&(stream.getdents=null),0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}function doWritev(stream,iov,iovcnt,offset){for(ret=0,i=0;i<iovcnt;i++){ptr=HEAPU32[iov>>2],len=HEAPU32[iov+4>>2],iov+=8;var ret,i,ptr,len,curr=FS.write(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr,typeof offset!="undefined"&&(offset+=curr)}return ret}function _fd_write(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd),num=doWritev(stream,iov,iovcnt);return HEAPU32[pnum>>2]=num,0}catch(e){if(typeof FS=="undefined"||e.name!=="ErrnoError")throw e;return e.errno}}function _getaddrinfo(node,service,hint,out){var ai,addr=0,port=0,flags=0,family=0,type=0,proto=0;function allocaddrinfo(family,type,proto,canon,addr,port){var sa,ai,errno,salen=family===10?28:16;return addr=family===10?inetNtop6(addr):inetNtop4(addr),sa=_malloc(salen),errno=writeSockaddr(sa,family,addr,port),assert(!errno),ai=_malloc(32),HEAP32[ai+4>>2]=family,HEAP32[ai+8>>2]=type,HEAP32[ai+12>>2]=proto,HEAPU32[ai+24>>2]=canon,HEAPU32[ai+20>>2]=sa,family===10?HEAP32[ai+16>>2]=28:HEAP32[ai+16>>2]=16,HEAP32[ai+28>>2]=0,ai}if(hint&&(flags=HEAP32[hint>>2],family=HEAP32[hint+4>>2],type=HEAP32[hint+8>>2],proto=HEAP32[hint+12>>2]),type&&!proto&&(proto=type===2?17:6),!type&&proto&&(type=proto===17?2:1),proto===0&&(proto=6),type===0&&(type=1),!node&&!service)return-2;if(flags&~(1|2|4|1024|8|16|32))return-1;if(hint!==0&&HEAP32[hint>>2]&2&&!node)return-1;if(flags&32)return-2;if(type!==0&&type!==1&&type!==2)return-7;if(family!==0&&family!==2&&family!==10)return-6;if(service&&(service=UTF8ToString(service),port=parseInt(service,10),port!=port))return flags&1024?-2:-8;if(!node)return family===0&&(family=2),(flags&1)===0&&(family===2?addr=_htonl(2130706433):addr=[0,0,0,1]),ai=allocaddrinfo(family,type,proto,null,addr,port),HEAPU32[out>>2]=ai,0;if(node=UTF8ToString(node),addr=inetPton4(node),addr!==null)if(family===0||family===2)family=2;else if(family===10&&flags&8)addr=[0,0,_htonl(65535),addr],family=10;else return-2;else if(addr=inetPton6(node),addr!==null)if(family===0||family===10)family=10;else return-2;return addr!=null?(ai=allocaddrinfo(family,type,proto,node,addr,port),HEAPU32[out>>2]=ai,0):flags&4?-2:(node=DNS.lookup_name(node),addr=inetPton4(node),family===0?family=2:family===10&&(addr=[0,0,_htonl(65535),addr]),ai=allocaddrinfo(family,type,proto,null,addr,port),HEAPU32[out>>2]=ai,0)}function _getnameinfo(sa,salen,node,nodelen,serv,servlen,flags){var info=readSockaddr(sa,salen);if(info.errno)return-6;var port=info.port,addr=info.addr,overflowed=!1;if(node&&nodelen){if(flags&1||!(lookup=DNS.lookup_addr(addr))){if(flags&8)return-2}else addr=lookup;var lookup,numBytesWrittenExclNull=stringToUTF8(addr,node,nodelen);numBytesWrittenExclNull+1>=nodelen&&(overflowed=!0)}if(serv&&servlen){port=""+port;var numBytesWrittenExclNull=stringToUTF8(port,serv,servlen);numBytesWrittenExclNull+1>=servlen&&(overflowed=!0)}return overflowed?-12:0}var GodotRuntime={get_func:function(ptr){return wasmTable.get(ptr)},error:function(){err.apply(null,Array.from(arguments))},print:function(){out.apply(null,Array.from(arguments))},malloc:function(p_size){return _malloc(p_size)},free:function(p_ptr){_free(p_ptr)},getHeapValue:function(p_ptr,p_type){return getValue(p_ptr,p_type)},setHeapValue:function(p_ptr,p_value,p_type){setValue(p_ptr,p_value,p_type)},heapSub:function(p_heap,p_ptr,p_len){const bytes=p_heap.BYTES_PER_ELEMENT;return p_heap.subarray(p_ptr/bytes,p_ptr/bytes+p_len)},heapSlice:function(p_heap,p_ptr,p_len){const bytes=p_heap.BYTES_PER_ELEMENT;return p_heap.slice(p_ptr/bytes,p_ptr/bytes+p_len)},heapCopy:function(p_dst,p_src,p_ptr){const bytes=p_src.BYTES_PER_ELEMENT;return p_dst.set(p_src,p_ptr/bytes)},parseString:function(p_ptr){return UTF8ToString(p_ptr)},parseStringArray:function(p_ptr,p_size){const strings=[],ptrs=GodotRuntime.heapSub(HEAP32,p_ptr,p_size);return ptrs.forEach(function(ptr){strings.push(GodotRuntime.parseString(ptr))}),strings},strlen:function(p_str){return lengthBytesUTF8(p_str)},allocString:function(p_str){const length=GodotRuntime.strlen(p_str)+1,c_str=GodotRuntime.malloc(length);return stringToUTF8(p_str,c_str,length),c_str},allocStringArray:function(p_strings){const size=p_strings.length,c_ptr=GodotRuntime.malloc(size*4);for(let i=0;i<size;i++)HEAP32[(c_ptr>>2)+i]=GodotRuntime.allocString(p_strings[i]);return c_ptr},freeStringArray:function(p_ptr,p_len){for(let i=0;i<p_len;i++)GodotRuntime.free(HEAP32[(p_ptr>>2)+i]);GodotRuntime.free(p_ptr)},stringToHeap:function(p_str,p_ptr,p_len){return stringToUTF8Array(p_str,HEAP8,p_ptr,p_len)}},GodotConfig={canvas:null,locale:"en",canvas_resize_policy:2,virtual_keyboard:!1,persistent_drops:!1,on_execute:null,on_exit:null,init_config:function(p_opts){GodotConfig.canvas_resize_policy=p_opts.canvasResizePolicy,GodotConfig.canvas=p_opts.canvas,GodotConfig.locale=p_opts.locale||GodotConfig.locale,GodotConfig.virtual_keyboard=p_opts.virtualKeyboard,GodotConfig.persistent_drops=!!p_opts.persistentDrops,GodotConfig.on_execute=p_opts.onExecute,GodotConfig.on_exit=p_opts.onExit,p_opts.focusCanvas&&GodotConfig.canvas.focus()},locate_file:function(file){return Module.locateFile(file)},clear:function(){GodotConfig.canvas=null,GodotConfig.locale="en",GodotConfig.canvas_resize_policy=2,GodotConfig.virtual_keyboard=!1,GodotConfig.persistent_drops=!1,GodotConfig.on_execute=null,GodotConfig.on_exit=null}},ERRNO_CODES={},GodotFS={_idbfs:!1,_syncing:!1,_mount_points:[],is_persistent:function(){return GodotFS._idbfs?1:0},init:function(persistentPaths){if(GodotFS._idbfs=!1,!Array.isArray(persistentPaths))return Promise.reject(new Error("Persistent paths must be an array"));if(!persistentPaths.length)return Promise.resolve();GodotFS._mount_points=persistentPaths.slice();function createRecursive(dir){try{FS.stat(dir)}catch(e){if(e.errno!==ERRNO_CODES.ENOENT)throw e;FS.mkdirTree(dir)}}return GodotFS._mount_points.forEach(function(path){createRecursive(path),FS.mount(IDBFS,{},path)}),new Promise(function(resolve){FS.syncfs(!0,function(err){err?(GodotFS._mount_points=[],GodotFS._idbfs=!1,GodotRuntime.print(`IndexedDB not available: ${err.message}`)):GodotFS._idbfs=!0,resolve(err)})})},deinit:function(){GodotFS._mount_points.forEach(function(path){try{FS.unmount(path)}catch(e){GodotRuntime.print("Already unmounted",e)}GodotFS._idbfs&&IDBFS.dbs[path]&&(IDBFS.dbs[path].close(),delete IDBFS.dbs[path])}),GodotFS._mount_points=[],GodotFS._idbfs=!1,GodotFS._syncing=!1},sync:function(){return GodotFS._syncing?(GodotRuntime.error("Already syncing!"),Promise.resolve()):(GodotFS._syncing=!0,new Promise(function(resolve){FS.syncfs(!1,function(error){error&&GodotRuntime.error(`Failed to save IDB file system: ${error.message}`),GodotFS._syncing=!1,resolve(error)})}))},copy_to_fs:function(path,buffer){const idx=path.lastIndexOf("/");let dir="/";idx>0&&(dir=path.slice(0,idx));try{FS.stat(dir)}catch(e){if(e.errno!==ERRNO_CODES.ENOENT)throw e;FS.mkdirTree(dir)}FS.writeFile(path,new Uint8Array(buffer))}},GodotOS={request_quit:function(){},_async_cbs:[],_fs_sync_promise:null,atexit:function(p_promise_cb){GodotOS._async_cbs.push(p_promise_cb)},cleanup:function(exit_code){const cb=GodotConfig.on_exit;GodotFS.deinit(),GodotConfig.clear(),cb&&cb(exit_code)},finish_async:function(callback){GodotOS._fs_sync_promise.then(function(){const promises=[];return GodotOS._async_cbs.forEach(function(cb){promises.push(new Promise(cb))}),Promise.all(promises)}).then(function(){return GodotFS.sync()}).then(function(){setTimeout(function(){callback()},0)})}},GodotAudio={ctx:null,input:null,driver:null,interval:0,init:function(mix_rate,latency,onstatechange,onlatencyupdate){const opts={};mix_rate&&(opts.sampleRate=mix_rate);const ctx=new(window.AudioContext||window.webkitAudioContext)(opts);return GodotAudio.ctx=ctx,ctx.onstatechange=function(){let state=0;switch(ctx.state){case"suspended":state=0;break;case"running":state=1;break;case"closed":state=2;break}onstatechange(state)},ctx.onstatechange(),GodotAudio.interval=setInterval(function(){let computed_latency=0;ctx.baseLatency&&(computed_latency+=GodotAudio.ctx.baseLatency),ctx.outputLatency&&(computed_latency+=GodotAudio.ctx.outputLatency),onlatencyupdate(computed_latency)},1e3),GodotOS.atexit(GodotAudio.close_async),ctx.destination.channelCount},create_input:function(callback){if(GodotAudio.input)return 0;function gotMediaInput(stream){try{GodotAudio.input=GodotAudio.ctx.createMediaStreamSource(stream),callback(GodotAudio.input)}catch(e){GodotRuntime.error("Failed creaating input.",e)}}if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0}).then(gotMediaInput,function(e){GodotRuntime.error("Error getting user media.",e)});else{if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),!navigator.getUserMedia)return GodotRuntime.error("getUserMedia not available."),1;navigator.getUserMedia({audio:!0},gotMediaInput,function(e){GodotRuntime.print(e)})}return 0},close_async:function(resolve){const ctx=GodotAudio.ctx;if(GodotAudio.ctx=null,!ctx){resolve();return}GodotAudio.interval&&(clearInterval(GodotAudio.interval),GodotAudio.interval=0),GodotAudio.input&&(GodotAudio.input.disconnect(),GodotAudio.input=null);let closed=Promise.resolve();GodotAudio.driver&&(closed=GodotAudio.driver.close()),closed.then(function(){return ctx.close()}).then(function(){ctx.onstatechange=null,resolve()}).catch(function(e){ctx.onstatechange=null,GodotRuntime.error("Error closing AudioContext",e),resolve()})}};function _godot_audio_capture_start(){return GodotAudio.create_input(function(input){input.connect(GodotAudio.driver.get_node())})}function _godot_audio_capture_stop(){if(GodotAudio.input){const tracks=GodotAudio.input.mediaStream.getTracks();for(let i=0;i<tracks.length;i++)tracks[i].stop();GodotAudio.input.disconnect(),GodotAudio.input=null}}function _godot_audio_has_script_processor(){return GodotAudio.ctx&&GodotAudio.ctx.createScriptProcessor?1:0}function _godot_audio_has_worklet(){return GodotAudio.ctx&&GodotAudio.ctx.audioWorklet?1:0}function _godot_audio_init(p_mix_rate,p_latency,p_state_change,p_latency_update){const statechange=GodotRuntime.get_func(p_state_change),latencyupdate=GodotRuntime.get_func(p_latency_update),mix_rate=GodotRuntime.getHeapValue(p_mix_rate,"i32"),channels=GodotAudio.init(mix_rate,p_latency,statechange,latencyupdate);return GodotRuntime.setHeapValue(p_mix_rate,GodotAudio.ctx.sampleRate,"i32"),channels}function _godot_audio_is_available(){return window.AudioContext||window.webkitAudioContext?1:0}function _godot_audio_resume(){GodotAudio.ctx&&GodotAudio.ctx.state!=="running"&&GodotAudio.ctx.resume()}var GodotAudioScript={script:null,create:function(buffer_length,channel_count){return GodotAudioScript.script=GodotAudio.ctx.createScriptProcessor(buffer_length,2,channel_count),GodotAudio.driver=GodotAudioScript,GodotAudioScript.script.bufferSize},start:function(p_in_buf,p_in_size,p_out_buf,p_out_size,onprocess){GodotAudioScript.script.onaudioprocess=function(event){const inb=GodotRuntime.heapSub(HEAPF32,p_in_buf,p_in_size),input=event.inputBuffer;if(GodotAudio.input){const inlen=input.getChannelData(0).length;for(let ch=0;ch<2;ch++){const data=input.getChannelData(ch);for(let s=0;s<inlen;s++)inb[s*2+ch]=data[s]}}onprocess();const outb=GodotRuntime.heapSub(HEAPF32,p_out_buf,p_out_size),output=event.outputBuffer,channels=output.numberOfChannels;for(let ch=0;ch<channels;ch++){const data=output.getChannelData(ch);for(let sample=0;sample<data.length;sample++)data[sample]=outb[sample*channels+ch]}},GodotAudioScript.script.connect(GodotAudio.ctx.destination)},get_node:function(){return GodotAudioScript.script},close:function(){return new Promise(function(resolve){GodotAudioScript.script.disconnect(),GodotAudioScript.script.onaudioprocess=null,GodotAudioScript.script=null,resolve()})}};function _godot_audio_script_create(buffer_length,channel_count){const buf_len=GodotRuntime.getHeapValue(buffer_length,"i32");try{const out_len=GodotAudioScript.create(buf_len,channel_count);GodotRuntime.setHeapValue(buffer_length,out_len,"i32")}catch(e){return GodotRuntime.error("Error starting AudioDriverScriptProcessor",e),1}return 0}function _godot_audio_script_start(p_in_buf,p_in_size,p_out_buf,p_out_size,p_cb){const onprocess=GodotRuntime.get_func(p_cb);GodotAudioScript.start(p_in_buf,p_in_size,p_out_buf,p_out_size,onprocess)}var GodotAudioWorklet={promise:null,worklet:null,ring_buffer:null,create:function(channels){const path=GodotConfig.locate_file("godot.audio.worklet.js");GodotAudioWorklet.promise=GodotAudio.ctx.audioWorklet.addModule(path).then(function(){return GodotAudioWorklet.worklet=new AudioWorkletNode(GodotAudio.ctx,"godot-processor",{outputChannelCount:[channels]}),Promise.resolve()}),GodotAudio.driver=GodotAudioWorklet},start:function(in_buf,out_buf,state){GodotAudioWorklet.promise.then(function(){const node=GodotAudioWorklet.worklet;node.connect(GodotAudio.ctx.destination),node.port.postMessage({cmd:"start",data:[state,in_buf,out_buf]}),node.port.onmessage=function(event){GodotRuntime.error(event.data)}})},start_no_threads:function(p_out_buf,p_out_size,out_callback,p_in_buf,p_in_size,in_callback){function RingBuffer(){let wpos=0,rpos=0,pending_samples=0;const wbuf=new Float32Array(p_out_size);function send(port){if(pending_samples===0)return;const buffer=GodotRuntime.heapSub(HEAPF32,p_out_buf,p_out_size),size=buffer.length,tot_sent=pending_samples;if(out_callback(wpos,pending_samples),wpos+pending_samples>=size){const high=size-wpos;wbuf.set(buffer.subarray(wpos,size)),pending_samples-=high,wpos=0}pending_samples>0&&wbuf.set(buffer.subarray(wpos,wpos+pending_samples),tot_sent-pending_samples),port.postMessage({cmd:"chunk",data:wbuf.subarray(0,tot_sent)}),wpos+=pending_samples,pending_samples=0}this.receive=function(recv_buf){const buffer=GodotRuntime.heapSub(HEAPF32,p_in_buf,p_in_size),from=rpos;let to_write=recv_buf.length,high=0;rpos+to_write>=p_in_size&&(high=p_in_size-rpos,buffer.set(recv_buf.subarray(0,high),rpos),to_write-=high,rpos=0),to_write&&buffer.set(recv_buf.subarray(high,to_write),rpos),in_callback(from,recv_buf.length),rpos+=to_write},this.consumed=function(size,port){pending_samples+=size,send(port)}}GodotAudioWorklet.ring_buffer=new RingBuffer,GodotAudioWorklet.promise.then(function(){const node=GodotAudioWorklet.worklet,buffer=GodotRuntime.heapSlice(HEAPF32,p_out_buf,p_out_size);node.connect(GodotAudio.ctx.destination),node.port.postMessage({cmd:"start_nothreads",data:[buffer,p_in_size]}),node.port.onmessage=function(event){if(!GodotAudioWorklet.worklet)return;if(event.data.cmd==="read"){const read=event.data.data;GodotAudioWorklet.ring_buffer.consumed(read,GodotAudioWorklet.worklet.port)}else if(event.data.cmd==="input"){const buf=event.data.data;if(buf.length>p_in_size){GodotRuntime.error("Input chunk is too big");return}GodotAudioWorklet.ring_buffer.receive(buf)}else GodotRuntime.error(event.data)}})},get_node:function(){return GodotAudioWorklet.worklet},close:function(){return new Promise(function(resolve){if(GodotAudioWorklet.promise===null)return;GodotAudioWorklet.promise.then(function(){GodotAudioWorklet.worklet.port.postMessage({cmd:"stop",data:null}),GodotAudioWorklet.worklet.disconnect(),GodotAudioWorklet.worklet=null,GodotAudioWorklet.promise=null,resolve()}).catch(function(){})})}};function _godot_audio_worklet_create(channels){try{GodotAudioWorklet.create(channels)}catch(e){return GodotRuntime.error("Error starting AudioDriverWorklet",e),1}return 0}function _godot_audio_worklet_start_no_threads(p_out_buf,p_out_size,p_out_callback,p_in_buf,p_in_size,p_in_callback){const out_callback=GodotRuntime.get_func(p_out_callback),in_callback=GodotRuntime.get_func(p_in_callback);GodotAudioWorklet.start_no_threads(p_out_buf,p_out_size,out_callback,p_in_buf,p_in_size,in_callback)}function _godot_js_config_canvas_id_get(p_ptr,p_ptr_max){GodotRuntime.stringToHeap(`#${GodotConfig.canvas.id}`,p_ptr,p_ptr_max)}function _godot_js_config_locale_get(p_ptr,p_ptr_max){GodotRuntime.stringToHeap(GodotConfig.locale,p_ptr,p_ptr_max)}var GodotDisplayCursor={shape:"default",visible:!0,cursors:{},set_style:function(style){GodotConfig.canvas.style.cursor=style},set_shape:function(shape){GodotDisplayCursor.shape=shape;let css=shape;if(shape in GodotDisplayCursor.cursors){const c=GodotDisplayCursor.cursors[shape];css=`url("${c.url}") ${c.x} ${c.y}, default`}GodotDisplayCursor.visible&&GodotDisplayCursor.set_style(css)},clear:function(){GodotDisplayCursor.set_style(""),GodotDisplayCursor.shape="default",GodotDisplayCursor.visible=!0,Object.keys(GodotDisplayCursor.cursors).forEach(function(key){URL.revokeObjectURL(GodotDisplayCursor.cursors[key]),delete GodotDisplayCursor.cursors[key]})},lockPointer:function(){const canvas=GodotConfig.canvas;canvas.requestPointerLock&&canvas.requestPointerLock()},releasePointer:function(){document.exitPointerLock&&document.exitPointerLock()},isPointerLocked:function(){return document.pointerLockElement===GodotConfig.canvas}},GodotEventListeners={handlers:[],has:function(target,event,method,capture){return GodotEventListeners.handlers.findIndex(function(e){return e.target===target&&e.event===event&&e.method===method&&e.capture===capture})!==-1},add:function(target,event,method,capture){if(GodotEventListeners.has(target,event,method,capture))return;function Handler(p_target,p_event,p_method,p_capture){this.target=p_target,this.event=p_event,this.method=p_method,this.capture=p_capture}GodotEventListeners.handlers.push(new Handler(target,event,method,capture)),target.addEventListener(event,method,capture)},clear:function(){GodotEventListeners.handlers.forEach(function(h){h.target.removeEventListener(h.event,h.method,h.capture)}),GodotEventListeners.handlers.length=0}};function _emscripten_webgl_do_get_current_context(){return GL.currentContext?GL.currentContext.handle:0}var _emscripten_webgl_get_current_context=_emscripten_webgl_do_get_current_context,GodotDisplayScreen={desired_size:[0,0],hidpi:!0,getPixelRatio:function(){return GodotDisplayScreen.hidpi?window.devicePixelRatio||1:1},isFullscreen:function(){const elem=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return elem?elem===GodotConfig.canvas:document.fullscreen||document.mozFullScreen||document.webkitIsFullscreen},hasFullscreen:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled},requestFullscreen:function(){if(!GodotDisplayScreen.hasFullscreen())return 1;const canvas=GodotConfig.canvas;try{const promise=(canvas.requestFullscreen||canvas.msRequestFullscreen||canvas.mozRequestFullScreen||canvas.mozRequestFullscreen||canvas.webkitRequestFullscreen).call(canvas);promise&&promise.catch(function(){})}catch{return 1}return 0},exitFullscreen:function(){if(!GodotDisplayScreen.isFullscreen())return 0;try{const promise=document.exitFullscreen();promise&&promise.catch(function(){})}catch{return 1}return 0},_updateGL:function(){const gl_context_handle=_emscripten_webgl_get_current_context(),gl=GL.getContext(gl_context_handle);gl&&GL.resizeOffscreenFramebuffer(gl)},updateSize:function(){const isFullscreen=GodotDisplayScreen.isFullscreen(),wantsFullWindow=GodotConfig.canvas_resize_policy===2,noResize=GodotConfig.canvas_resize_policy===0,wwidth=GodotDisplayScreen.desired_size[0],wheight=GodotDisplayScreen.desired_size[1],canvas=GodotConfig.canvas;let width=wwidth,height=wheight;if(noResize)return canvas.width!==width||canvas.height!==height?(GodotDisplayScreen.desired_size=[canvas.width,canvas.height],GodotDisplayScreen._updateGL(),1):0;const scale=GodotDisplayScreen.getPixelRatio();(isFullscreen||wantsFullWindow)&&(width=window.innerWidth*scale,height=window.innerHeight*scale);const csw=`${width/scale}px`,csh=`${height/scale}px`;return canvas.style.width!==csw||canvas.style.height!==csh||canvas.width!==width||canvas.height!==height?(canvas.width=width,canvas.height=height,canvas.style.width=csw,canvas.style.height=csh,GodotDisplayScreen._updateGL(),1):0}},GodotDisplayVK={textinput:null,textarea:null,available:function(){return GodotConfig.virtual_keyboard&&"ontouchstart"in window},init:function(input_cb){function create(what){const elem=document.createElement(what);return elem.style.display="none",elem.style.position="absolute",elem.style.zIndex="-1",elem.style.background="transparent",elem.style.padding="0px",elem.style.margin="0px",elem.style.overflow="hidden",elem.style.width="0px",elem.style.height="0px",elem.style.border="0px",elem.style.outline="none",elem.readonly=!0,elem.disabled=!0,GodotEventListeners.add(elem,"input",function(){const c_str=GodotRuntime.allocString(elem.value);input_cb(c_str,elem.selectionEnd),GodotRuntime.free(c_str)},!1),GodotEventListeners.add(elem,"blur",function(){elem.style.display="none",elem.readonly=!0,elem.disabled=!0},!1),GodotConfig.canvas.insertAdjacentElement("beforebegin",elem),elem}GodotDisplayVK.textinput=create("input"),GodotDisplayVK.textarea=create("textarea"),GodotDisplayVK.updateSize()},show:function(text,type,start,end){if(!GodotDisplayVK.textinput||!GodotDisplayVK.textarea)return;(GodotDisplayVK.textinput.style.display!==""||GodotDisplayVK.textarea.style.display!=="")&&GodotDisplayVK.hide(),GodotDisplayVK.updateSize();let elem=GodotDisplayVK.textinput;switch(type){case 0:elem.type="text",elem.inputmode="";break;case 1:elem=GodotDisplayVK.textarea;break;case 2:elem.type="text",elem.inputmode="numeric";break;case 3:elem.type="text",elem.inputmode="decimal";break;case 4:elem.type="tel",elem.inputmode="";break;case 5:elem.type="email",elem.inputmode="";break;case 6:elem.type="password",elem.inputmode="";break;case 7:elem.type="url",elem.inputmode="";break;default:elem.type="text",elem.inputmode="";break}elem.readonly=!1,elem.disabled=!1,elem.value=text,elem.style.display="block",elem.focus(),elem.setSelectionRange(start,end)},hide:function(){if(!GodotDisplayVK.textinput||!GodotDisplayVK.textarea)return;[GodotDisplayVK.textinput,GodotDisplayVK.textarea].forEach(function(elem){elem.blur(),elem.style.display="none",elem.value=""})},updateSize:function(){if(!GodotDisplayVK.textinput||!GodotDisplayVK.textarea)return;const rect=GodotConfig.canvas.getBoundingClientRect();function update(elem){elem.style.left=`${rect.left}px`,elem.style.top=`${rect.top}px`,elem.style.width=`${rect.width}px`,elem.style.height=`${rect.height}px`}update(GodotDisplayVK.textinput),update(GodotDisplayVK.textarea)},clear:function(){GodotDisplayVK.textinput&&(GodotDisplayVK.textinput.remove(),GodotDisplayVK.textinput=null),GodotDisplayVK.textarea&&(GodotDisplayVK.textarea.remove(),GodotDisplayVK.textarea=null)}},GodotDisplay={window_icon:"",getDPI:function(){const dpi=Math.round(window.devicePixelRatio*96);return dpi>=96?dpi:96}};function _godot_js_display_alert(p_text){window.alert(GodotRuntime.parseString(p_text))}function _godot_js_display_canvas_focus(){GodotConfig.canvas.focus()}function _godot_js_display_canvas_is_focused(){return document.activeElement===GodotConfig.canvas}function _godot_js_display_clipboard_get(callback){const func=GodotRuntime.get_func(callback);try{navigator.clipboard.readText().then(function(result){const ptr=GodotRuntime.allocString(result);func(ptr),GodotRuntime.free(ptr)}).catch(function(){})}catch{}}function _godot_js_display_clipboard_set(p_text){const text=GodotRuntime.parseString(p_text);return!navigator.clipboard||!navigator.clipboard.writeText?1:(navigator.clipboard.writeText(text).catch(function(e){GodotRuntime.error("Setting OS clipboard is only possible from an input callback for the HTML5 plafrom. Exception:",e)}),0)}function _godot_js_display_cursor_is_hidden(){return!GodotDisplayCursor.visible}function _godot_js_display_cursor_is_locked(){return GodotDisplayCursor.isPointerLocked()?1:0}function _godot_js_display_cursor_lock_set(p_lock){p_lock?GodotDisplayCursor.lockPointer():GodotDisplayCursor.releasePointer()}function _godot_js_display_cursor_set_custom_shape(p_shape,p_ptr,p_len,p_hotspot_x,p_hotspot_y){const shape=GodotRuntime.parseString(p_shape),old_shape=GodotDisplayCursor.cursors[shape];if(p_len>0){const png=new Blob([GodotRuntime.heapSlice(HEAPU8,p_ptr,p_len)],{type:"image/png"}),url=URL.createObjectURL(png);GodotDisplayCursor.cursors[shape]={url,x:p_hotspot_x,y:p_hotspot_y}}else delete GodotDisplayCursor.cursors[shape];shape===GodotDisplayCursor.shape&&GodotDisplayCursor.set_shape(GodotDisplayCursor.shape),old_shape&&URL.revokeObjectURL(old_shape.url)}function _godot_js_display_cursor_set_shape(p_string){GodotDisplayCursor.set_shape(GodotRuntime.parseString(p_string))}function _godot_js_display_cursor_set_visible(p_visible){const visible=p_visible!==0;if(visible===GodotDisplayCursor.visible)return;GodotDisplayCursor.visible=visible,visible?GodotDisplayCursor.set_shape(GodotDisplayCursor.shape):GodotDisplayCursor.set_style("none")}function _godot_js_display_desired_size_set(width,height){GodotDisplayScreen.desired_size=[width,height],GodotDisplayScreen.updateSize()}function _godot_js_display_fullscreen_cb(callback){const canvas=GodotConfig.canvas,func=GodotRuntime.get_func(callback);function change_cb(evt){evt.target===canvas&&func(GodotDisplayScreen.isFullscreen())}GodotEventListeners.add(document,"fullscreenchange",change_cb,!1),GodotEventListeners.add(document,"mozfullscreenchange",change_cb,!1),GodotEventListeners.add(document,"webkitfullscreenchange",change_cb,!1)}function _godot_js_display_fullscreen_exit(){return GodotDisplayScreen.exitFullscreen()}function _godot_js_display_fullscreen_request(){return GodotDisplayScreen.requestFullscreen()}function _godot_js_display_glGetBufferSubData(target,offset,size,data){const gl_context_handle=_emscripten_webgl_get_current_context(),gl=GL.getContext(gl_context_handle);gl&&gl.GLctx.getBufferSubData(target,offset,HEAPU8,data,size)}function _godot_js_display_has_webgl(p_version){if(p_version!==1&&p_version!==2)return!1;try{return!!document.createElement("canvas").getContext(p_version===2?"webgl2":"webgl")}catch{}return!1}function _godot_js_display_is_swap_ok_cancel(){const win=["Windows","Win64","Win32","WinCE"],plat=navigator.platform||"";return win.indexOf(plat)!==-1?1:0}function _godot_js_display_notification_cb(callback,p_enter,p_exit,p_in,p_out){const canvas=GodotConfig.canvas,func=GodotRuntime.get_func(callback),notif=[p_enter,p_exit,p_in,p_out];["mouseover","mouseleave","focus","blur"].forEach(function(evt_name,idx){GodotEventListeners.add(canvas,evt_name,function(){func(notif[idx])},!0)})}function _godot_js_display_pixel_ratio_get(){return GodotDisplayScreen.getPixelRatio()}function _godot_js_display_screen_dpi_get(){return GodotDisplay.getDPI()}function _godot_js_display_screen_size_get(width,height){const scale=GodotDisplayScreen.getPixelRatio();GodotRuntime.setHeapValue(width,window.screen.width*scale,"i32"),GodotRuntime.setHeapValue(height,window.screen.height*scale,"i32")}function _godot_js_display_setup_canvas(p_width,p_height,p_fullscreen,p_hidpi){const canvas=GodotConfig.canvas;switch(GodotEventListeners.add(canvas,"contextmenu",function(ev){ev.preventDefault()},!1),GodotEventListeners.add(canvas,"webglcontextlost",function(ev){alert("WebGL context lost, please reload the page"),ev.preventDefault()},!1),GodotDisplayScreen.hidpi=!!p_hidpi,GodotConfig.canvas_resize_policy){case 0:GodotDisplayScreen.desired_size=[canvas.width,canvas.height];break;case 1:GodotDisplayScreen.desired_size=[p_width,p_height];break;default:canvas.style.position="absolute",canvas.style.top=0,canvas.style.left=0;break}GodotDisplayScreen.updateSize(),p_fullscreen&&GodotDisplayScreen.requestFullscreen()}function _godot_js_display_size_update(){const updated=GodotDisplayScreen.updateSize();return updated&&GodotDisplayVK.updateSize(),updated}function _godot_js_display_touchscreen_is_available(){return"ontouchstart"in window}function _godot_js_display_vk_available(){return GodotDisplayVK.available()}function _godot_js_display_vk_cb(p_input_cb){const input_cb=GodotRuntime.get_func(p_input_cb);GodotDisplayVK.available()&&GodotDisplayVK.init(input_cb)}function _godot_js_display_vk_hide(){GodotDisplayVK.hide()}function _godot_js_display_vk_show(p_text,p_type,p_start,p_end){const text=GodotRuntime.parseString(p_text),start=p_start>0?p_start:0,end=p_end>0?p_end:start;GodotDisplayVK.show(text,p_type,start,end)}function _godot_js_display_window_blur_cb(callback){const func=GodotRuntime.get_func(callback);GodotEventListeners.add(window,"blur",function(){func()},!1)}function _godot_js_display_window_icon_set(p_ptr,p_len){let link=document.getElementById("-gd-engine-icon");link===null&&(link=document.createElement("link"),link.rel="icon",link.id="-gd-engine-icon",document.head.appendChild(link));const old_icon=GodotDisplay.window_icon,png=new Blob([GodotRuntime.heapSlice(HEAPU8,p_ptr,p_len)],{type:"image/png"});GodotDisplay.window_icon=URL.createObjectURL(png),link.href=GodotDisplay.window_icon,old_icon&&URL.revokeObjectURL(old_icon)}function _godot_js_display_window_size_get(p_width,p_height){GodotRuntime.setHeapValue(p_width,GodotConfig.canvas.width,"i32"),GodotRuntime.setHeapValue(p_height,GodotConfig.canvas.height,"i32")}function _godot_js_display_window_title_set(p_data){document.title=GodotRuntime.parseString(p_data)}function _godot_js_eval(p_js,p_use_global_ctx,p_union_ptr,p_byte_arr,p_byte_arr_write,p_callback){const js_code=GodotRuntime.parseString(p_js);let eval_ret=null;try{if(p_use_global_ctx){const global_eval=eval;eval_ret=global_eval(js_code)}else eval_ret=eval(js_code)}catch(e){GodotRuntime.error(e)}switch(typeof eval_ret){case"boolean":return GodotRuntime.setHeapValue(p_union_ptr,eval_ret,"i32"),1;case"number":return GodotRuntime.setHeapValue(p_union_ptr,eval_ret,"double"),3;case"string":return GodotRuntime.setHeapValue(p_union_ptr,GodotRuntime.allocString(eval_ret),"*"),4;case"object":if(eval_ret===null)break;if(ArrayBuffer.isView(eval_ret)&&!(eval_ret instanceof Uint8Array)?eval_ret=new Uint8Array(eval_ret.buffer):eval_ret instanceof ArrayBuffer&&(eval_ret=new Uint8Array(eval_ret)),eval_ret instanceof Uint8Array){const func=GodotRuntime.get_func(p_callback),bytes_ptr=func(p_byte_arr,p_byte_arr_write,eval_ret.length);return HEAPU8.set(eval_ret,bytes_ptr),20}break}return 0}var IDHandler={_last_id:0,_references:{},get:function(p_id){return IDHandler._references[p_id]},add:function(p_data){const id=++IDHandler._last_id;return IDHandler._references[id]=p_data,id},remove:function(p_id){delete IDHandler._references[p_id]}},GodotFetch={onread:function(id,result){const obj=IDHandler.get(id);if(!obj)return;result.value&&obj.chunks.push(result.value),obj.reading=!1,obj.done=result.done},onresponse:function(id,response){const obj=IDHandler.get(id);if(!obj)return;let chunked=!1;response.headers.forEach(function(value,header){const v=value.toLowerCase().trim(),h=header.toLowerCase().trim();h==="transfer-encoding"&&v==="chunked"&&(chunked=!0)}),obj.status=response.status,obj.response=response,obj.reader=response.body.getReader(),obj.chunked=chunked},onerror:function(id,err){GodotRuntime.error(err);const obj=IDHandler.get(id);if(!obj)return;obj.error=err},create:function(method,url,headers,body){const obj={request:null,response:null,reader:null,error:null,done:!1,reading:!1,status:0,chunks:[],bodySize:-1},id=IDHandler.add(obj),init={method,headers,body};return obj.request=fetch(url,init),obj.request.then(GodotFetch.onresponse.bind(null,id)).catch(GodotFetch.onerror.bind(null,id)),id},free:function(id){const obj=IDHandler.get(id);if(!obj)return;if(IDHandler.remove(id),!obj.request)return;obj.request.then(function(response){response.abort()}).catch(function(){})},read:function(id){const obj=IDHandler.get(id);if(!obj)return;if(obj.reader&&!obj.reading){if(obj.done){obj.reader=null;return}obj.reading=!0,obj.reader.read().then(GodotFetch.onread.bind(null,id)).catch(GodotFetch.onerror.bind(null,id))}}};function _godot_js_fetch_body_length_get(p_id){const obj=IDHandler.get(p_id);return!obj||!obj.response?-1:obj.bodySize}function _godot_js_fetch_create(p_method,p_url,p_headers,p_headers_size,p_body,p_body_size){const method=GodotRuntime.parseString(p_method),url=GodotRuntime.parseString(p_url),headers=GodotRuntime.parseStringArray(p_headers,p_headers_size),body=p_body_size?GodotRuntime.heapSlice(HEAP8,p_body,p_body_size):null;return GodotFetch.create(method,url,headers.map(function(hv){const idx=hv.indexOf(":");return idx<=0?[]:[hv.slice(0,idx).trim(),hv.slice(idx+1).trim()]}).filter(function(v){return v.length===2}),body)}function _godot_js_fetch_free(id){GodotFetch.free(id)}function _godot_js_fetch_http_status_get(p_id){const obj=IDHandler.get(p_id);return!obj||!obj.response?0:obj.status}function _godot_js_fetch_is_chunked(p_id){const obj=IDHandler.get(p_id);return!obj||!obj.response?-1:obj.chunked?1:0}function _godot_js_fetch_read_chunk(p_id,p_buf,p_buf_size){const obj=IDHandler.get(p_id);if(!obj||!obj.response)return 0;let to_read=p_buf_size;const chunks=obj.chunks;for(;to_read&&chunks.length;){const chunk=obj.chunks[0];chunk.length>to_read?(GodotRuntime.heapCopy(HEAP8,chunk.slice(0,to_read),p_buf),chunks[0]=chunk.slice(to_read),to_read=0):(GodotRuntime.heapCopy(HEAP8,chunk,p_buf),to_read-=chunk.length,chunks.pop())}return chunks.length||GodotFetch.read(p_id),p_buf_size-to_read}function _godot_js_fetch_read_headers(p_id,p_parse_cb,p_ref){const obj=IDHandler.get(p_id);if(!obj||!obj.response)return 1;const cb=GodotRuntime.get_func(p_parse_cb),arr=[];obj.response.headers.forEach(function(v,h){arr.push(`${h}:${v}`)});const c_ptr=GodotRuntime.allocStringArray(arr);return cb(arr.length,c_ptr,p_ref),GodotRuntime.freeStringArray(c_ptr,arr.length),0}function _godot_js_fetch_state_get(p_id){const obj=IDHandler.get(p_id);return obj?obj.error?-1:obj.response?obj.reader?1:obj.done?2:-1:0:-1}var GodotInputGamepads={samples:[],get_pads:function(){try{const pads=navigator.getGamepads();return pads||[]}catch{return[]}},get_samples:function(){return GodotInputGamepads.samples},get_sample:function(index){const samples=GodotInputGamepads.samples;return index<samples.length?samples[index]:null},sample:function(){const pads=GodotInputGamepads.get_pads(),samples=[];for(let i=0;i<pads.length;i++){const pad=pads[i];if(!pad){samples.push(null);continue}const s={standard:pad.mapping==="standard",buttons:[],axes:[],connected:pad.connected};for(let b=0;b<pad.buttons.length;b++)s.buttons.push(pad.buttons[b].value);for(let a=0;a<pad.axes.length;a++)s.axes.push(pad.axes[a]);samples.push(s)}GodotInputGamepads.samples=samples},init:function(onchange){GodotInputGamepads.samples=[];function add(pad){const guid=GodotInputGamepads.get_guid(pad),c_id=GodotRuntime.allocString(pad.id),c_guid=GodotRuntime.allocString(guid);onchange(pad.index,1,c_id,c_guid),GodotRuntime.free(c_id),GodotRuntime.free(c_guid)}const pads=GodotInputGamepads.get_pads();for(let i=0;i<pads.length;i++)pads[i]&&add(pads[i]);GodotEventListeners.add(window,"gamepadconnected",function(evt){evt.gamepad&&add(evt.gamepad)},!1),GodotEventListeners.add(window,"gamepaddisconnected",function(evt){evt.gamepad&&onchange(evt.gamepad.index,0)},!1)},get_guid:function(pad){if(pad.mapping)return pad.mapping;const ua=navigator.userAgent;let os="Unknown";ua.indexOf("Android")>=0?os="Android":ua.indexOf("Linux")>=0?os="Linux":ua.indexOf("iPhone")>=0?os="iOS":ua.indexOf("Macintosh")>=0?os="MacOSX":ua.indexOf("Windows")>=0&&(os="Windows");const id=pad.id,exp1=/vendor: ([0-9a-f]{4}) product: ([0-9a-f]{4})/i,exp2=/^([0-9a-f]+)-([0-9a-f]+)-/i;let vendor="",product="";if(exp1.test(id)){const match=exp1.exec(id);vendor=match[1].padStart(4,"0"),product=match[2].padStart(4,"0")}else if(exp2.test(id)){const match=exp2.exec(id);vendor=match[1].padStart(4,"0"),product=match[2].padStart(4,"0")}return!vendor||!product?`${os}Unknown`:os+vendor+product}},GodotInputDragDrop={promises:[],pending_files:[],add_entry:function(entry){entry.isDirectory?GodotInputDragDrop.add_dir(entry):entry.isFile?GodotInputDragDrop.add_file(entry):GodotRuntime.error("Unrecognized entry...",entry)},add_dir:function(entry){GodotInputDragDrop.promises.push(new Promise(function(resolve){const reader=entry.createReader();reader.readEntries(function(entries){for(let i=0;i<entries.length;i++)GodotInputDragDrop.add_entry(entries[i]);resolve()})}))},add_file:function(entry){GodotInputDragDrop.promises.push(new Promise(function(resolve,reject){entry.file(function(file){const reader=new FileReader;reader.onload=function(){const f={path:file.relativePath||file.webkitRelativePath,name:file.name,type:file.type,size:file.size,data:reader.result};f.path||(f.path=f.name),GodotInputDragDrop.pending_files.push(f),resolve()},reader.onerror=function(){GodotRuntime.print("Error reading file"),reject()},reader.readAsArrayBuffer(file)},function(){GodotRuntime.print("Error!"),reject()})}))},process:function(resolve,reject){if(GodotInputDragDrop.promises.length===0){resolve();return}GodotInputDragDrop.promises.pop().then(function(){setTimeout(function(){GodotInputDragDrop.process(resolve,reject)},0)})},_process_event:function(ev,callback){if(ev.preventDefault(),ev.dataTransfer.items)for(let i=0;i<ev.dataTransfer.items.length;i++){const item=ev.dataTransfer.items[i];let entry=null;"getAsEntry"in item?entry=item.getAsEntry():"webkitGetAsEntry"in item&&(entry=item.webkitGetAsEntry()),entry&&GodotInputDragDrop.add_entry(entry)}else GodotRuntime.error("File upload not supported");new Promise(GodotInputDragDrop.process).then(function(){const DROP=`/tmp/drop-${parseInt(Math.random()*(1<<30),10)}/`,drops=[],files=[];FS.mkdir(DROP.slice(0,-1)),GodotInputDragDrop.pending_files.forEach(elem=>{const path=elem.path;GodotFS.copy_to_fs(DROP+path,elem.data);let idx=path.indexOf("/");if(idx===-1)drops.push(DROP+path);else{const sub=path.substr(0,idx);idx=sub.indexOf("/"),idx<0&&drops.indexOf(DROP+sub)===-1&&drops.push(DROP+sub)}files.push(DROP+path)}),GodotInputDragDrop.promises=[],GodotInputDragDrop.pending_files=[],callback(drops),GodotConfig.persistent_drops?GodotOS.atexit(function(resolve){GodotInputDragDrop.remove_drop(files,DROP),resolve()}):GodotInputDragDrop.remove_drop(files,DROP)})},remove_drop:function(files,drop_path){const dirs=[drop_path.substr(0,drop_path.length-1)];files.forEach(function(file){FS.unlink(file);let dir=file.replace(drop_path,""),idx=dir.lastIndexOf("/");for(;idx>0;)dir=dir.substr(0,idx),dirs.indexOf(drop_path+dir)===-1&&dirs.push(drop_path+dir),idx=dir.lastIndexOf("/")}),dirs.sort(function(a,b){const al=(a.match(/\//g)||[]).length,bl=(b.match(/\//g)||[]).length;return al>bl?-1:al<bl?1:0}).forEach(function(dir){FS.rmdir(dir)})},handler:function(callback){return function(ev){GodotInputDragDrop._process_event(ev,callback)}}},GodotIME={ime:null,active:!1,getModifiers:function(evt){return evt.shiftKey+0+(evt.altKey+0<<1)+(evt.ctrlKey+0<<2)+(evt.metaKey+0<<3)},ime_active:function(active){function focus_timer(){GodotIME.active=!0,GodotIME.ime.focus()}GodotIME.ime&&(active?(GodotIME.ime.style.display="block",setInterval(focus_timer,100)):(GodotIME.ime.style.display="none",GodotConfig.canvas.focus(),GodotIME.active=!1))},ime_position:function(x,y){if(GodotIME.ime){const canvas=GodotConfig.canvas,rect=canvas.getBoundingClientRect(),rw=canvas.width/rect.width,rh=canvas.height/rect.height,clx=x/rw+rect.x,cly=y/rh+rect.y;GodotIME.ime.style.left=`${clx}px`,GodotIME.ime.style.top=`${cly}px`}},init:function(ime_cb,key_cb,code,key){function key_event_cb(pressed,evt){const modifiers=GodotIME.getModifiers(evt);GodotRuntime.stringToHeap(evt.code,code,32),GodotRuntime.stringToHeap(evt.key,key,32),key_cb(pressed,evt.repeat,modifiers),evt.preventDefault()}function ime_event_cb(event){if(GodotIME.ime)if(event.type==="compositionstart")ime_cb(0,null),GodotIME.ime.innerHTML="";else if(event.type==="compositionupdate"){const ptr=GodotRuntime.allocString(event.data);ime_cb(1,ptr),GodotRuntime.free(ptr)}else if(event.type==="compositionend"){const ptr=GodotRuntime.allocString(event.data);ime_cb(2,ptr),GodotRuntime.free(ptr),GodotIME.ime.innerHTML=""}}const ime=document.createElement("div");ime.className="ime",ime.style.background="none",ime.style.opacity=0,ime.style.position="fixed",ime.style.textAlign="left",ime.style.fontSize="1px",ime.style.left="0px",ime.style.top="0px",ime.style.width="100%",ime.style.height="40px",ime.style.display="none",ime.contentEditable="true",GodotEventListeners.add(ime,"compositionstart",ime_event_cb,!1),GodotEventListeners.add(ime,"compositionupdate",ime_event_cb,!1),GodotEventListeners.add(ime,"compositionend",ime_event_cb,!1),GodotEventListeners.add(ime,"keydown",key_event_cb.bind(null,1),!1),GodotEventListeners.add(ime,"keyup",key_event_cb.bind(null,0),!1),ime.onblur=function(){this.style.display="none",GodotConfig.canvas.focus(),GodotIME.active=!1},GodotConfig.canvas.parentElement.appendChild(ime),GodotIME.ime=ime},clear:function(){GodotIME.ime&&(GodotIME.ime.remove(),GodotIME.ime=null)}},GodotInput={getModifiers:function(evt){return evt.shiftKey+0+(evt.altKey+0<<1)+(evt.ctrlKey+0<<2)+(evt.metaKey+0<<3)},computePosition:function(evt,rect){const canvas=GodotConfig.canvas,rw=canvas.width/rect.width,rh=canvas.height/rect.height,x=(evt.clientX-rect.x)*rw,y=(evt.clientY-rect.y)*rh;return[x,y]}};function _godot_js_input_drop_files_cb(callback){const func=GodotRuntime.get_func(callback),dropFiles=function(files){const args=files||[];if(!args.length)return;const argc=args.length,argv=GodotRuntime.allocStringArray(args);func(argv,argc),GodotRuntime.freeStringArray(argv,argc)},canvas=GodotConfig.canvas;GodotEventListeners.add(canvas,"dragover",function(ev){ev.preventDefault()},!1),GodotEventListeners.add(canvas,"drop",GodotInputDragDrop.handler(dropFiles))}function _godot_js_input_gamepad_cb(change_cb){const onchange=GodotRuntime.get_func(change_cb);GodotInputGamepads.init(onchange)}function _godot_js_input_gamepad_sample(){return GodotInputGamepads.sample(),0}function _godot_js_input_gamepad_sample_count(){return GodotInputGamepads.get_samples().length}function _godot_js_input_gamepad_sample_get(p_index,r_btns,r_btns_num,r_axes,r_axes_num,r_standard){const sample=GodotInputGamepads.get_sample(p_index);if(!sample||!sample.connected)return 1;const btns=sample.buttons,btns_len=btns.length<16?btns.length:16;for(let i=0;i<btns_len;i++)GodotRuntime.setHeapValue(r_btns+(i<<2),btns[i],"float");GodotRuntime.setHeapValue(r_btns_num,btns_len,"i32");const axes=sample.axes,axes_len=axes.length<10?axes.length:10;for(let i=0;i<axes_len;i++)GodotRuntime.setHeapValue(r_axes+(i<<2),axes[i],"float");GodotRuntime.setHeapValue(r_axes_num,axes_len,"i32");const is_standard=sample.standard?1:0;return GodotRuntime.setHeapValue(r_standard,is_standard,"i32"),0}function _godot_js_input_key_cb(callback,code,key){const func=GodotRuntime.get_func(callback);function key_cb(pressed,evt){const modifiers=GodotInput.getModifiers(evt);GodotRuntime.stringToHeap(evt.code,code,32),GodotRuntime.stringToHeap(evt.key,key,32),func(pressed,evt.repeat,modifiers),evt.preventDefault()}GodotEventListeners.add(GodotConfig.canvas,"keydown",key_cb.bind(null,1),!1),GodotEventListeners.add(GodotConfig.canvas,"keyup",key_cb.bind(null,0),!1)}function _godot_js_input_mouse_button_cb(callback){const func=GodotRuntime.get_func(callback),canvas=GodotConfig.canvas;function button_cb(p_pressed,evt){const rect=canvas.getBoundingClientRect(),pos=GodotInput.computePosition(evt,rect),modifiers=GodotInput.getModifiers(evt);p_pressed&&GodotConfig.canvas.focus(),func(p_pressed,evt.button,pos[0],pos[1],modifiers)&&evt.preventDefault()}GodotEventListeners.add(canvas,"mousedown",button_cb.bind(null,1),!1),GodotEventListeners.add(window,"mouseup",button_cb.bind(null,0),!1)}function _godot_js_input_mouse_move_cb(callback){const func=GodotRuntime.get_func(callback),canvas=GodotConfig.canvas;function move_cb(evt){const rect=canvas.getBoundingClientRect(),pos=GodotInput.computePosition(evt,rect),rw=canvas.width/rect.width,rh=canvas.height/rect.height,rel_pos_x=evt.movementX*rw,rel_pos_y=evt.movementY*rh,modifiers=GodotInput.getModifiers(evt);func(pos[0],pos[1],rel_pos_x,rel_pos_y,modifiers)}GodotEventListeners.add(window,"mousemove",move_cb,!1)}function _godot_js_input_mouse_wheel_cb(callback){const func=GodotRuntime.get_func(callback);function wheel_cb(evt){func(evt.deltaX||0,evt.deltaY||0)&&evt.preventDefault()}GodotEventListeners.add(GodotConfig.canvas,"wheel",wheel_cb,!1)}function _godot_js_input_paste_cb(callback){const func=GodotRuntime.get_func(callback);GodotEventListeners.add(window,"paste",function(evt){const text=evt.clipboardData.getData("text"),ptr=GodotRuntime.allocString(text);func(ptr),GodotRuntime.free(ptr)},!1)}function _godot_js_input_touch_cb(callback,ids,coords){const func=GodotRuntime.get_func(callback),canvas=GodotConfig.canvas;function touch_cb(type,evt){type===0&&GodotConfig.canvas.focus();const rect=canvas.getBoundingClientRect(),touches=evt.changedTouches;for(let i=0;i<touches.length;i++){const touch=touches[i],pos=GodotInput.computePosition(touch,rect);GodotRuntime.setHeapValue(coords+i*2*8,pos[0],"double"),GodotRuntime.setHeapValue(coords+(i*2+1)*8,pos[1],"double"),GodotRuntime.setHeapValue(ids+i*4,touch.identifier,"i32")}func(type,touches.length),evt.cancelable&&evt.preventDefault()}GodotEventListeners.add(canvas,"touchstart",touch_cb.bind(null,0),!1),GodotEventListeners.add(canvas,"touchend",touch_cb.bind(null,1),!1),GodotEventListeners.add(canvas,"touchcancel",touch_cb.bind(null,1),!1),GodotEventListeners.add(canvas,"touchmove",touch_cb.bind(null,2),!1)}function _godot_js_input_vibrate_handheld(p_duration_ms){typeof navigator.vibrate!="function"?GodotRuntime.print("This browser does not support vibration."):navigator.vibrate(p_duration_ms)}function _godot_js_is_ime_focused(){return GodotIME.active}function _godot_js_os_download_buffer(p_ptr,p_size,p_name,p_mime){const buf=GodotRuntime.heapSlice(HEAP8,p_ptr,p_size),name=GodotRuntime.parseString(p_name),mime=GodotRuntime.parseString(p_mime),blob=new Blob([buf],{type:mime}),url=window.URL.createObjectURL(blob),a=document.createElement("a");a.href=url,a.download=name,a.style.display="none",document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(url)}function _godot_js_os_execute(p_json){const json_args=GodotRuntime.parseString(p_json),args=JSON.parse(json_args);return GodotConfig.on_execute?(GodotConfig.on_execute(args),0):1}function _godot_js_os_finish_async(p_callback){const func=GodotRuntime.get_func(p_callback);GodotOS.finish_async(func)}function _godot_js_os_fs_is_persistent(){return GodotFS.is_persistent()}function _godot_js_os_fs_sync(callback){const func=GodotRuntime.get_func(callback);GodotOS._fs_sync_promise=GodotFS.sync(),GodotOS._fs_sync_promise.then(function(){func()})}function _godot_js_os_hw_concurrency_get(){return navigator.hardwareConcurrency||1}function _godot_js_os_request_quit_cb(p_callback){GodotOS.request_quit=GodotRuntime.get_func(p_callback)}function _godot_js_os_shell_open(p_uri){window.open(GodotRuntime.parseString(p_uri),"_blank")}var GodotPWA={hasUpdate:!1,updateState:function(cb,reg){if(!reg)return;if(!reg.active)return;reg.waiting&&(GodotPWA.hasUpdate=!0,cb()),GodotEventListeners.add(reg,"updatefound",function(){const installing=reg.installing;GodotEventListeners.add(installing,"statechange",function(){installing.state==="installed"&&(GodotPWA.hasUpdate=!0,cb())})})}};function _godot_js_pwa_cb(p_update_cb){if("serviceWorker"in navigator){const cb=GodotRuntime.get_func(p_update_cb);navigator.serviceWorker.getRegistration().then(GodotPWA.updateState.bind(null,cb))}}function _godot_js_pwa_update(){return"serviceWorker"in navigator&&GodotPWA.hasUpdate?(navigator.serviceWorker.getRegistration().then(function(reg){if(!reg||!reg.waiting)return;reg.waiting.postMessage("update")}),0):1}var GodotRTCDataChannel={connect:function(p_id,p_on_open,p_on_message,p_on_error,p_on_close){const ref=IDHandler.get(p_id);if(!ref)return;ref.binaryType="arraybuffer",ref.onopen=function(){p_on_open()},ref.onclose=function(){p_on_close()},ref.onerror=function(){p_on_error()},ref.onmessage=function(event){let buffer,is_string=0;if(event.data instanceof ArrayBuffer)buffer=new Uint8Array(event.data);else if(event.data instanceof Blob){GodotRuntime.error("Blob type not supported");return}else if(typeof event.data=="string"){is_string=1;const enc=new TextEncoder("utf-8");buffer=new Uint8Array(enc.encode(event.data))}else{GodotRuntime.error("Unknown message type");return}const len=buffer.length*buffer.BYTES_PER_ELEMENT,out=GodotRuntime.malloc(len);HEAPU8.set(buffer,out),p_on_message(out,len,is_string),GodotRuntime.free(out)}},close:function(p_id){const ref=IDHandler.get(p_id);if(!ref)return;ref.onopen=null,ref.onmessage=null,ref.onerror=null,ref.onclose=null,ref.close()},get_prop:function(p_id,p_prop,p_def){const ref=IDHandler.get(p_id);return ref&&ref[p_prop]!==0[0]?ref[p_prop]:p_def}};function _godot_js_rtc_datachannel_close(p_id){const ref=IDHandler.get(p_id);if(!ref)return;GodotRTCDataChannel.close(p_id)}function _godot_js_rtc_datachannel_connect(p_id,p_ref,p_on_open,p_on_message,p_on_error,p_on_close){const onopen=GodotRuntime.get_func(p_on_open).bind(null,p_ref),onmessage=GodotRuntime.get_func(p_on_message).bind(null,p_ref),onerror=GodotRuntime.get_func(p_on_error).bind(null,p_ref),onclose=GodotRuntime.get_func(p_on_close).bind(null,p_ref);GodotRTCDataChannel.connect(p_id,onopen,onmessage,onerror,onclose)}function _godot_js_rtc_datachannel_destroy(p_id){GodotRTCDataChannel.close(p_id),IDHandler.remove(p_id)}function _godot_js_rtc_datachannel_get_buffered_amount(p_id){return GodotRTCDataChannel.get_prop(p_id,"bufferedAmount",0)}function _godot_js_rtc_datachannel_id_get(p_id){return GodotRTCDataChannel.get_prop(p_id,"id",65535)}function _godot_js_rtc_datachannel_is_negotiated(p_id){return GodotRTCDataChannel.get_prop(p_id,"negotiated",65535)}function _godot_js_rtc_datachannel_is_ordered(p_id){return GodotRTCDataChannel.get_prop(p_id,"ordered",!0)}function _godot_js_rtc_datachannel_label_get(p_id){const ref=IDHandler.get(p_id);return!ref||!ref.label?0:GodotRuntime.allocString(ref.label)}function _godot_js_rtc_datachannel_max_packet_lifetime_get(p_id){const ref=IDHandler.get(p_id);return ref?ref.maxPacketLifeTime!==0[0]?ref.maxPacketLifeTime:ref.maxRetransmitTime!==0[0]?ref.maxRetransmitTime:65535:65535}function _godot_js_rtc_datachannel_max_retransmits_get(p_id){return GodotRTCDataChannel.get_prop(p_id,"maxRetransmits",65535)}function _godot_js_rtc_datachannel_protocol_get(p_id){const ref=IDHandler.get(p_id);return!ref||!ref.protocol?0:GodotRuntime.allocString(ref.protocol)}function _godot_js_rtc_datachannel_ready_state_get(p_id){const ref=IDHandler.get(p_id);if(!ref)return 3;switch(ref.readyState){case"connecting":return 0;case"open":return 1;case"closing":return 2;case"closed":default:return 3}}function _godot_js_rtc_datachannel_send(p_id,p_buffer,p_length,p_raw){const ref=IDHandler.get(p_id);if(!ref)return 1;const bytes_array=new Uint8Array(p_length);for(let i=0;i<p_length;i++)bytes_array[i]=GodotRuntime.getHeapValue(p_buffer+i,"i8");if(p_raw)ref.send(bytes_array.buffer);else{const string=new TextDecoder("utf-8").decode(bytes_array);ref.send(string)}return 0}var GodotRTCPeerConnection={onstatechange:function(p_id,p_conn,callback){const ref=IDHandler.get(p_id);if(!ref)return;let state;switch(p_conn.iceConnectionState){case"new":state=0;break;case"checking":state=1;break;case"connected":case"completed":state=2;break;case"disconnected":state=3;break;case"failed":state=4;break;case"closed":default:state=5;break}callback(state)},onicecandidate:function(p_id,callback,event){const ref=IDHandler.get(p_id);if(!ref||!event.candidate)return;const c=event.candidate,candidate_str=GodotRuntime.allocString(c.candidate),mid_str=GodotRuntime.allocString(c.sdpMid);callback(mid_str,c.sdpMLineIndex,candidate_str),GodotRuntime.free(candidate_str),GodotRuntime.free(mid_str)},ondatachannel:function(p_id,callback,event){const ref=IDHandler.get(p_id);if(!ref)return;const cid=IDHandler.add(event.channel);callback(cid)},onsession:function(p_id,callback,session){const ref=IDHandler.get(p_id);if(!ref)return;const type_str=GodotRuntime.allocString(session.type),sdp_str=GodotRuntime.allocString(session.sdp);callback(type_str,sdp_str),GodotRuntime.free(type_str),GodotRuntime.free(sdp_str)},onerror:function(p_id,callback,error){const ref=IDHandler.get(p_id);if(!ref)return;GodotRuntime.error(error),callback()}};function _godot_js_rtc_pc_close(p_id){const ref=IDHandler.get(p_id);if(!ref)return;ref.close()}function _godot_js_rtc_pc_create(p_config,p_ref,p_on_state_change,p_on_candidate,p_on_datachannel){const onstatechange=GodotRuntime.get_func(p_on_state_change).bind(null,p_ref),oncandidate=GodotRuntime.get_func(p_on_candidate).bind(null,p_ref),ondatachannel=GodotRuntime.get_func(p_on_datachannel).bind(null,p_ref),config=JSON.parse(GodotRuntime.parseString(p_config));let conn=null;try{conn=new RTCPeerConnection(config)}catch(e){return GodotRuntime.error(e),0}const base=GodotRTCPeerConnection,id=IDHandler.add(conn);return conn.oniceconnectionstatechange=base.onstatechange.bind(null,id,conn,onstatechange),conn.onicecandidate=base.onicecandidate.bind(null,id,oncandidate),conn.ondatachannel=base.ondatachannel.bind(null,id,ondatachannel),id}function _godot_js_rtc_pc_datachannel_create(p_id,p_label,p_config){try{const ref=IDHandler.get(p_id);if(!ref)return 0;const label=GodotRuntime.parseString(p_label),config=JSON.parse(GodotRuntime.parseString(p_config)),channel=ref.createDataChannel(label,config);return IDHandler.add(channel)}catch(e){return GodotRuntime.error(e),0}}function _godot_js_rtc_pc_destroy(p_id){const ref=IDHandler.get(p_id);if(!ref)return;ref.oniceconnectionstatechange=null,ref.onicecandidate=null,ref.ondatachannel=null,IDHandler.remove(p_id)}function _godot_js_rtc_pc_ice_candidate_add(p_id,p_mid_name,p_mline_idx,p_sdp){const ref=IDHandler.get(p_id);if(!ref)return;const sdpMidName=GodotRuntime.parseString(p_mid_name),sdpName=GodotRuntime.parseString(p_sdp);ref.addIceCandidate(new RTCIceCandidate({candidate:sdpName,sdpMid:sdpMidName,sdpMlineIndex:p_mline_idx}))}function _godot_js_rtc_pc_local_description_set(p_id,p_type,p_sdp,p_obj,p_on_error){const ref=IDHandler.get(p_id);if(!ref)return;const type=GodotRuntime.parseString(p_type),sdp=GodotRuntime.parseString(p_sdp),onerror=GodotRuntime.get_func(p_on_error).bind(null,p_obj);ref.setLocalDescription({sdp,type}).catch(function(error){GodotRTCPeerConnection.onerror(p_id,onerror,error)})}function _godot_js_rtc_pc_offer_create(p_id,p_obj,p_on_session,p_on_error){const ref=IDHandler.get(p_id);if(!ref)return;const onsession=GodotRuntime.get_func(p_on_session).bind(null,p_obj),onerror=GodotRuntime.get_func(p_on_error).bind(null,p_obj);ref.createOffer().then(function(session){GodotRTCPeerConnection.onsession(p_id,onsession,session)}).catch(function(error){GodotRTCPeerConnection.onerror(p_id,onerror,error)})}function _godot_js_rtc_pc_remote_description_set(p_id,p_type,p_sdp,p_obj,p_session_created,p_on_error){const ref=IDHandler.get(p_id);if(!ref)return;const type=GodotRuntime.parseString(p_type),sdp=GodotRuntime.parseString(p_sdp),onerror=GodotRuntime.get_func(p_on_error).bind(null,p_obj),onsession=GodotRuntime.get_func(p_session_created).bind(null,p_obj);ref.setRemoteDescription({sdp,type}).then(function(){return type!=="offer"?Promise.resolve():ref.createAnswer().then(function(session){GodotRTCPeerConnection.onsession(p_id,onsession,session)})}).catch(function(error){GodotRTCPeerConnection.onerror(p_id,onerror,error)})}function _godot_js_set_ime_active(p_active){GodotIME.ime_active(p_active)}function _godot_js_set_ime_cb(p_ime_cb,p_key_cb,code,key){const ime_cb=GodotRuntime.get_func(p_ime_cb),key_cb=GodotRuntime.get_func(p_key_cb);GodotIME.init(ime_cb,key_cb,code,key)}function _godot_js_set_ime_position(p_x,p_y){GodotIME.ime_position(p_x,p_y)}function _godot_js_tts_get_voices(p_callback){const func=GodotRuntime.get_func(p_callback);try{const arr=[],voices=window.speechSynthesis.getVoices();for(let i=0;i<voices.length;i++)arr.push(`${voices[i].lang};${voices[i].name}`);const c_ptr=GodotRuntime.allocStringArray(arr);func(arr.length,c_ptr),GodotRuntime.freeStringArray(c_ptr,arr.length)}catch{}}function _godot_js_tts_is_paused(){return window.speechSynthesis.paused}function _godot_js_tts_is_speaking(){return window.speechSynthesis.speaking}function _godot_js_tts_pause(){window.speechSynthesis.pause()}function _godot_js_tts_resume(){window.speechSynthesis.resume()}function _godot_js_tts_speak(p_text,p_voice,p_volume,p_pitch,p_rate,p_utterance_id,p_callback){const func=GodotRuntime.get_func(p_callback);function listener_end(evt){evt.currentTarget.cb(1,evt.currentTarget.id,0)}function listener_start(evt){evt.currentTarget.cb(0,evt.currentTarget.id,0)}function listener_error(evt){evt.currentTarget.cb(2,evt.currentTarget.id,0)}function listener_bound(evt){evt.currentTarget.cb(3,evt.currentTarget.id,evt.charIndex)}const utterance=new SpeechSynthesisUtterance(GodotRuntime.parseString(p_text));utterance.rate=p_rate,utterance.pitch=p_pitch,utterance.volume=p_volume/100,utterance.addEventListener("end",listener_end),utterance.addEventListener("start",listener_start),utterance.addEventListener("error",listener_error),utterance.addEventListener("boundary",listener_bound),utterance.id=p_utterance_id,utterance.cb=func;const voice=GodotRuntime.parseString(p_voice),voices=window.speechSynthesis.getVoices();for(let i=0;i<voices.length;i++)if(voices[i].name===voice){utterance.voice=voices[i];break}window.speechSynthesis.resume(),window.speechSynthesis.speak(utterance)}function _godot_js_tts_stop(){window.speechSynthesis.cancel(),window.speechSynthesis.resume()}var GodotWebSocket={_onopen:function(p_id,callback){const ref=IDHandler.get(p_id);if(!ref)return;const c_str=GodotRuntime.allocString(ref.protocol);callback(c_str),GodotRuntime.free(c_str)},_onmessage:function(p_id,callback,event){const ref=IDHandler.get(p_id);if(!ref)return;let buffer,is_string=0;if(event.data instanceof ArrayBuffer)buffer=new Uint8Array(event.data);else if(event.data instanceof Blob){GodotRuntime.error("Blob type not supported");return}else if(typeof event.data=="string"){is_string=1;const enc=new TextEncoder("utf-8");buffer=new Uint8Array(enc.encode(event.data))}else{GodotRuntime.error("Unknown message type");return}const len=buffer.length*buffer.BYTES_PER_ELEMENT,out=GodotRuntime.malloc(len);HEAPU8.set(buffer,out),callback(out,len,is_string),GodotRuntime.free(out)},_onerror:function(p_id,callback){const ref=IDHandler.get(p_id);if(!ref)return;callback()},_onclose:function(p_id,callback,event){const ref=IDHandler.get(p_id);if(!ref)return;const c_str=GodotRuntime.allocString(event.reason);callback(event.code,c_str,event.wasClean?1:0),GodotRuntime.free(c_str)},send:function(p_id,p_data){const ref=IDHandler.get(p_id);return!ref||ref.readyState!==ref.OPEN?1:(ref.send(p_data),0)},bufferedAmount:function(p_id){const ref=IDHandler.get(p_id);return ref?ref.bufferedAmount:0},create:function(socket,p_on_open,p_on_message,p_on_error,p_on_close){const id=IDHandler.add(socket);return socket.onopen=GodotWebSocket._onopen.bind(null,id,p_on_open),socket.onmessage=GodotWebSocket._onmessage.bind(null,id,p_on_message),socket.onerror=GodotWebSocket._onerror.bind(null,id,p_on_error),socket.onclose=GodotWebSocket._onclose.bind(null,id,p_on_close),id},close:function(p_id,p_code,p_reason){const ref=IDHandler.get(p_id);if(ref&&ref.readyState<ref.CLOSING){const code=p_code,reason=GodotRuntime.parseString(p_reason);ref.close(code,reason)}},destroy:function(p_id){const ref=IDHandler.get(p_id);if(!ref)return;GodotWebSocket.close(p_id,3001,"destroyed"),IDHandler.remove(p_id),ref.onopen=null,ref.onmessage=null,ref.onerror=null,ref.onclose=null}};function _godot_js_websocket_buffered_amount(p_id){return GodotWebSocket.bufferedAmount(p_id)}function _godot_js_websocket_close(p_id,p_code,p_reason){const code=p_code,reason=GodotRuntime.parseString(p_reason);GodotWebSocket.close(p_id,code,reason)}function _godot_js_websocket_create(p_ref,p_url,p_proto,p_on_open,p_on_message,p_on_error,p_on_close){const on_open=GodotRuntime.get_func(p_on_open).bind(null,p_ref),on_message=GodotRuntime.get_func(p_on_message).bind(null,p_ref),on_error=GodotRuntime.get_func(p_on_error).bind(null,p_ref),on_close=GodotRuntime.get_func(p_on_close).bind(null,p_ref),url=GodotRuntime.parseString(p_url),protos=GodotRuntime.parseString(p_proto);let socket=null;try{protos?socket=new WebSocket(url,protos.split(",")):socket=new WebSocket(url)}catch{return 0}return socket.binaryType="arraybuffer",GodotWebSocket.create(socket,on_open,on_message,on_error,on_close)}function _godot_js_websocket_destroy(p_id){GodotWebSocket.destroy(p_id)}function _godot_js_websocket_send(p_id,p_buf,p_buf_len,p_raw){const bytes_array=new Uint8Array(p_buf_len);let i=0;for(i=0;i<p_buf_len;i++)bytes_array[i]=GodotRuntime.getHeapValue(p_buf+i,"i8");let out=bytes_array.buffer;return p_raw||(out=new TextDecoder("utf-8").decode(bytes_array)),GodotWebSocket.send(p_id,out)}var GodotJSWrapper={proxies:null,MyProxy:function(val){const id=IDHandler.add(this);GodotJSWrapper.proxies.set(val,id);let refs=1;this.ref=function(){refs++},this.unref=function(){refs--,refs===0&&(IDHandler.remove(id),GodotJSWrapper.proxies.delete(val))},this.get_val=function(){return val},this.get_id=function(){return id}},get_proxied:function(val){const id=GodotJSWrapper.proxies.get(val);if(id===0[0]){const proxy=new GodotJSWrapper.MyProxy(val);return proxy.get_id()}return IDHandler.get(id).ref(),id},get_proxied_value:function(id){const proxy=IDHandler.get(id);return proxy===0[0]?0[0]:proxy.get_val()},variant2js:function(type,val){switch(type){case 0:return null;case 1:return!!GodotRuntime.getHeapValue(val,"i64");case 2:return GodotRuntime.getHeapValue(val,"i64");case 3:return GodotRuntime.getHeapValue(val,"double");case 4:return GodotRuntime.parseString(GodotRuntime.getHeapValue(val,"*"));case 17:return GodotJSWrapper.get_proxied_value(GodotRuntime.getHeapValue(val,"i64"));default:return 0[0]}},js2variant:function(p_val,p_exchange){if(p_val==null)return 0;const type=typeof p_val;if(type==="boolean")return GodotRuntime.setHeapValue(p_exchange,p_val,"i64"),1;if(type==="number")return Number.isInteger(p_val)?(GodotRuntime.setHeapValue(p_exchange,p_val,"i64"),2):(GodotRuntime.setHeapValue(p_exchange,p_val,"double"),3);if(type==="string"){const c_str=GodotRuntime.allocString(p_val);return GodotRuntime.setHeapValue(p_exchange,c_str,"*"),4}const id=GodotJSWrapper.get_proxied(p_val);return GodotRuntime.setHeapValue(p_exchange,id,"i64"),17}};function _godot_js_wrapper_create_cb(p_ref,p_func){const func=GodotRuntime.get_func(p_func);let id=0;const cb=function(){if(!GodotJSWrapper.get_proxied_value(id))return;const args=Array.from(arguments),argsProxy=new GodotJSWrapper.MyProxy(args);func(p_ref,argsProxy.get_id(),args.length),argsProxy.unref()};return id=GodotJSWrapper.get_proxied(cb),id}function _godot_js_wrapper_create_object(p_object,p_args,p_argc,p_convert_callback,p_exchange,p_lock,p_free_lock_callback){const name=GodotRuntime.parseString(p_object);if(typeof window[name]=="undefined")return-1;const convert=GodotRuntime.get_func(p_convert_callback),freeLock=GodotRuntime.get_func(p_free_lock_callback),args=new Array(p_argc);for(let i=0;i<p_argc;i++){const type=convert(p_args,i,p_exchange,p_lock),lock=GodotRuntime.getHeapValue(p_lock,"*");args[i]=GodotJSWrapper.variant2js(type,p_exchange),lock&&freeLock(p_lock,type)}try{const res=new window[name](...args);return GodotJSWrapper.js2variant(res,p_exchange)}catch(e){return GodotRuntime.error(`Error calling constructor ${name} with args:`,args,"error:",e),-1}}function _godot_js_wrapper_interface_get(p_name){const name=GodotRuntime.parseString(p_name);return typeof window[name]!="undefined"?GodotJSWrapper.get_proxied(window[name]):0}function _godot_js_wrapper_object_call(p_id,p_method,p_args,p_argc,p_convert_callback,p_exchange,p_lock,p_free_lock_callback){const obj=GodotJSWrapper.get_proxied_value(p_id);if(obj===0[0])return-1;const method=GodotRuntime.parseString(p_method),convert=GodotRuntime.get_func(p_convert_callback),freeLock=GodotRuntime.get_func(p_free_lock_callback),args=new Array(p_argc);for(let i=0;i<p_argc;i++){const type=convert(p_args,i,p_exchange,p_lock),lock=GodotRuntime.getHeapValue(p_lock,"*");args[i]=GodotJSWrapper.variant2js(type,p_exchange),lock&&freeLock(p_lock,type)}try{const res=obj[method](...args);return GodotJSWrapper.js2variant(res,p_exchange)}catch(e){return GodotRuntime.error(`Error calling method ${method} on:`,obj,"error:",e),-1}}function _godot_js_wrapper_object_get(p_id,p_exchange,p_prop){const obj=GodotJSWrapper.get_proxied_value(p_id);if(obj===0[0])return 0;if(p_prop){const prop=GodotRuntime.parseString(p_prop);try{return GodotJSWrapper.js2variant(obj[prop],p_exchange)}catch{return GodotRuntime.error(`Error getting variable ${prop} on object`,obj),0}}return GodotJSWrapper.js2variant(obj,p_exchange)}function _godot_js_wrapper_object_getvar(p_id,p_type,p_exchange){const obj=GodotJSWrapper.get_proxied_value(p_id);if(obj===0[0])return-1;const prop=GodotJSWrapper.variant2js(p_type,p_exchange);if(prop==null)return-1;try{return GodotJSWrapper.js2variant(obj[prop],p_exchange)}catch(e){return GodotRuntime.error(`Error getting variable ${prop} on object`,obj,e),-1}}function _godot_js_wrapper_object_set(p_id,p_name,p_type,p_exchange){const obj=GodotJSWrapper.get_proxied_value(p_id);if(obj===0[0])return;const name=GodotRuntime.parseString(p_name);try{obj[name]=GodotJSWrapper.variant2js(p_type,p_exchange)}catch{GodotRuntime.error(`Error setting variable ${name} on object`,obj)}}function _godot_js_wrapper_object_setvar(p_id,p_key_type,p_key_ex,p_val_type,p_val_ex){const obj=GodotJSWrapper.get_proxied_value(p_id);if(obj===0[0])return-1;const key=GodotJSWrapper.variant2js(p_key_type,p_key_ex);try{return obj[key]=GodotJSWrapper.variant2js(p_val_type,p_val_ex),0}catch{return GodotRuntime.error(`Error setting variable ${key} on object`,obj),-1}}function _godot_js_wrapper_object_unref(p_id){const proxy=IDHandler.get(p_id);proxy!==0[0]&&proxy.unref()}var GodotWebXR={gl:null,session:null,space:null,frame:null,pose:null,orig_requestAnimationFrame:null,requestAnimationFrame:callback=>{if(GodotWebXR.session&&GodotWebXR.space){const onFrame=function(time,frame){GodotWebXR.frame=frame,GodotWebXR.pose=frame.getViewerPose(GodotWebXR.space),callback(time),GodotWebXR.frame=null,GodotWebXR.pose=null};GodotWebXR.session.requestAnimationFrame(onFrame)}else GodotWebXR.orig_requestAnimationFrame(callback)},monkeyPatchRequestAnimationFrame:enable=>{GodotWebXR.orig_requestAnimationFrame===null&&(GodotWebXR.orig_requestAnimationFrame=Browser.requestAnimationFrame),Browser.requestAnimationFrame=enable?GodotWebXR.requestAnimationFrame:GodotWebXR.orig_requestAnimationFrame},pauseResumeMainLoop:()=>{Browser.mainLoop.pause(),window.setTimeout(function(){Browser.mainLoop.resume()},0)},shaderProgram:null,programInfo:null,buffer:null,vsSource:`
			const vec2 scale = vec2(0.5, 0.5);
			attribute vec4 aVertexPosition;

			varying highp vec2 vTextureCoord;

			void main () {
				gl_Position = aVertexPosition;
				vTextureCoord = aVertexPosition.xy * scale + scale;
			}
		`,fsSource:`
			varying highp vec2 vTextureCoord;

			uniform sampler2D uSampler;

			void main() {
				gl_FragColor = texture2D(uSampler, vTextureCoord);
			}
		`,initShaderProgram:(gl,vsSource,fsSource)=>{const vertexShader=GodotWebXR.loadShader(gl,gl.VERTEX_SHADER,vsSource),fragmentShader=GodotWebXR.loadShader(gl,gl.FRAGMENT_SHADER,fsSource),shaderProgram=gl.createProgram();return gl.attachShader(shaderProgram,vertexShader),gl.attachShader(shaderProgram,fragmentShader),gl.linkProgram(shaderProgram),gl.getProgramParameter(shaderProgram,gl.LINK_STATUS)?shaderProgram:(GodotRuntime.error(`Unable to initialize the shader program: ${gl.getProgramInfoLog(shaderProgram)}`),null)},loadShader:(gl,type,source)=>{const shader=gl.createShader(type);return gl.shaderSource(shader,source),gl.compileShader(shader),gl.getShaderParameter(shader,gl.COMPILE_STATUS)?shader:(GodotRuntime.error(`An error occurred compiling the shader: ${gl.getShaderInfoLog(shader)}`),gl.deleteShader(shader),null)},initBuffer:gl=>{const positionBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,positionBuffer);const positions=[-1,-1,1,-1,-1,1,1,1];return gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(positions),gl.STATIC_DRAW),positionBuffer},blitTexture:(gl,texture)=>{GodotWebXR.shaderProgram===null&&(GodotWebXR.shaderProgram=GodotWebXR.initShaderProgram(gl,GodotWebXR.vsSource,GodotWebXR.fsSource),GodotWebXR.programInfo={program:GodotWebXR.shaderProgram,attribLocations:{vertexPosition:gl.getAttribLocation(GodotWebXR.shaderProgram,"aVertexPosition")},uniformLocations:{uSampler:gl.getUniformLocation(GodotWebXR.shaderProgram,"uSampler")}},GodotWebXR.buffer=GodotWebXR.initBuffer(gl));const orig_program=gl.getParameter(gl.CURRENT_PROGRAM);gl.useProgram(GodotWebXR.shaderProgram),gl.bindBuffer(gl.ARRAY_BUFFER,GodotWebXR.buffer),gl.vertexAttribPointer(GodotWebXR.programInfo.attribLocations.vertexPosition,2,gl.FLOAT,!1,0,0),gl.enableVertexAttribArray(GodotWebXR.programInfo.attribLocations.vertexPosition),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,texture),gl.uniform1i(GodotWebXR.programInfo.uniformLocations.uSampler,0);const blend_enabled=gl.getParameter(gl.BLEND);blend_enabled&&gl.disable(gl.BLEND),gl.drawArrays(gl.TRIANGLE_STRIP,0,4),gl.bindTexture(gl.TEXTURE_2D,null),gl.disableVertexAttribArray(GodotWebXR.programInfo.attribLocations.vertexPosition),gl.bindBuffer(gl.ARRAY_BUFFER,null),gl.useProgram(orig_program),blend_enabled&&gl.enable(gl.BLEND)},controllers:[],sampleControllers:()=>{if(!GodotWebXR.session)return;let other_index=2;const controllers=[];GodotWebXR.session.inputSources.forEach(input_source=>{input_source.targetRayMode==="tracked-pointer"?input_source.handedness==="right"?controllers[1]=input_source:(input_source.handedness==="left"||!controllers[0])&&(controllers[0]=input_source):controllers[other_index++]=input_source}),GodotWebXR.controllers=controllers},getControllerId:input_source=>GodotWebXR.controllers.indexOf(input_source)};function _godot_webxr_commit_for_eye(p_eye,p_texture_id){if(!GodotWebXR.session||!GodotWebXR.pose)return;const view_index=p_eye===2?1:0,glLayer=GodotWebXR.session.renderState.baseLayer,view=GodotWebXR.pose.views[view_index],viewport=glLayer.getViewport(view),gl=GodotWebXR.gl,orig_framebuffer=gl.getParameter(gl.FRAMEBUFFER_BINDING),orig_viewport=gl.getParameter(gl.VIEWPORT);gl.bindFramebuffer(gl.FRAMEBUFFER,glLayer.framebuffer),gl.viewport(viewport.x,viewport.y,viewport.width,viewport.height),GodotWebXR.blitTexture(gl,GL.textures[p_texture_id]),gl.bindFramebuffer(gl.FRAMEBUFFER,orig_framebuffer),gl.viewport(orig_viewport[0],orig_viewport[1],orig_viewport[2],orig_viewport[3])}function _godot_webxr_get_bounds_geometry(){if(!GodotWebXR.space||!GodotWebXR.space.boundsGeometry)return 0;const point_count=GodotWebXR.space.boundsGeometry.length;if(point_count===0)return 0;const buf=GodotRuntime.malloc((point_count*3+1)*4);GodotRuntime.setHeapValue(buf,point_count,"i32");for(let i=0;i<point_count;i++){const point=GodotWebXR.space.boundsGeometry[i];GodotRuntime.setHeapValue(buf+(i*3+1)*4,point.x,"float"),GodotRuntime.setHeapValue(buf+(i*3+2)*4,point.y,"float"),GodotRuntime.setHeapValue(buf+(i*3+3)*4,point.z,"float")}return buf}function _godot_webxr_get_controller_axes(p_controller,p_xr_standard_mapping){if(GodotWebXR.controllers.length===0)return 0;const controller=GodotWebXR.controllers[p_controller];if(!controller||!controller.gamepad)return 0;let axes=controller.gamepad.axes;if(controller.gamepad.mapping==="xr-standard")if(p_xr_standard_mapping){const trigger_axis=controller.gamepad.buttons[0].value,grip_axis=controller.gamepad.buttons[1].value;axes=[axes[2],axes[3]*-1,trigger_axis,grip_axis,grip_axis,0,axes[0],axes[1]*-1]}else axes[1]*=-1,axes[3]*=-1;const buf=GodotRuntime.malloc((axes.length+1)*4);GodotRuntime.setHeapValue(buf,axes.length,"i32");for(let i=0;i<axes.length;i++)GodotRuntime.setHeapValue(buf+4+i*4,axes[i],"float");return buf}function _godot_webxr_get_controller_buttons(p_controller,p_xr_standard_mapping){if(GodotWebXR.controllers.length===0)return 0;const controller=GodotWebXR.controllers[p_controller];if(!controller||!controller.gamepad)return 0;let buttons=controller.gamepad.buttons;controller.gamepad.mapping==="xr-standard"&&p_xr_standard_mapping&&(buttons=[0,buttons[5],buttons[1],buttons[3],buttons[6],buttons[7],buttons[8],buttons[4],buttons[9],buttons[10],buttons[11],buttons[12],buttons[13],buttons[14],buttons[2],buttons[0]]);const buf=GodotRuntime.malloc((buttons.length+1)*4);GodotRuntime.setHeapValue(buf,buttons.length,"i32");for(let i=0;i<buttons.length;i++)GodotRuntime.setHeapValue(buf+4+i*4,buttons[i]?buttons[i].value:0,"float");return buf}function _godot_webxr_get_controller_count(){return!GodotWebXR.session||!GodotWebXR.frame?0:GodotWebXR.controllers.length}function _godot_webxr_get_controller_target_ray_mode(p_controller){if(p_controller<0||p_controller>=GodotWebXR.controllers.length)return 0;const controller=GodotWebXR.controllers[p_controller];if(!controller)return 0;switch(controller.targetRayMode){case"gaze":return 1;case"tracked-pointer":return 2;case"screen":return 3;default:break}return 0}function _godot_webxr_get_controller_transform(p_controller){if(!GodotWebXR.session||!GodotWebXR.frame)return 0;const controller=GodotWebXR.controllers[p_controller];if(!controller)return 0;const frame=GodotWebXR.frame,space=GodotWebXR.space,pose=frame.getPose(controller.targetRaySpace,space);if(!pose)return 0;const matrix=pose.transform.matrix,buf=GodotRuntime.malloc(16*4);for(let i=0;i<16;i++)GodotRuntime.setHeapValue(buf+i*4,matrix[i],"float");return buf}function _godot_webxr_get_projection_for_eye(p_eye){if(!GodotWebXR.session||!GodotWebXR.pose)return 0;const view_index=p_eye===2?1:0,matrix=GodotWebXR.pose.views[view_index].projectionMatrix,buf=GodotRuntime.malloc(16*4);for(let i=0;i<16;i++)GodotRuntime.setHeapValue(buf+i*4,matrix[i],"float");return buf}function _godot_webxr_get_render_targetsize(){if(!GodotWebXR.session||!GodotWebXR.pose)return 0;const glLayer=GodotWebXR.session.renderState.baseLayer,view=GodotWebXR.pose.views[0],viewport=glLayer.getViewport(view),buf=GodotRuntime.malloc(2*4);return GodotRuntime.setHeapValue(buf+0,viewport.width,"i32"),GodotRuntime.setHeapValue(buf+4,viewport.height,"i32"),buf}function _godot_webxr_get_transform_for_eye(p_eye){if(!GodotWebXR.session||!GodotWebXR.pose)return 0;const views=GodotWebXR.pose.views;let matrix;p_eye===0?matrix=GodotWebXR.pose.transform.matrix:matrix=views[p_eye-1].transform.matrix;const buf=GodotRuntime.malloc(16*4);for(let i=0;i<16;i++)GodotRuntime.setHeapValue(buf+i*4,matrix[i],"float");return buf}function _godot_webxr_get_view_count(){return!GodotWebXR.session||!GodotWebXR.pose?0:GodotWebXR.pose.views.length}function _godot_webxr_get_visibility_state(){return!GodotWebXR.session||!GodotWebXR.session.visibilityState?0:GodotRuntime.allocString(GodotWebXR.session.visibilityState)}function _godot_webxr_initialize(p_session_mode,p_required_features,p_optional_features,p_requested_reference_spaces,p_on_session_started,p_on_session_ended,p_on_session_failed,p_on_controller_changed,p_on_input_event,p_on_simple_event){GodotWebXR.monkeyPatchRequestAnimationFrame(!0);const session_mode=GodotRuntime.parseString(p_session_mode),required_features=GodotRuntime.parseString(p_required_features).split(",").map(s=>s.trim()).filter(s=>s!==""),optional_features=GodotRuntime.parseString(p_optional_features).split(",").map(s=>s.trim()).filter(s=>s!==""),requested_reference_space_types=GodotRuntime.parseString(p_requested_reference_spaces).split(",").map(s=>s.trim()),onstarted=GodotRuntime.get_func(p_on_session_started),onended=GodotRuntime.get_func(p_on_session_ended),onfailed=GodotRuntime.get_func(p_on_session_failed),oncontroller=GodotRuntime.get_func(p_on_controller_changed),oninputevent=GodotRuntime.get_func(p_on_input_event),onsimpleevent=GodotRuntime.get_func(p_on_simple_event),session_init={};required_features.length>0&&(session_init.requiredFeatures=required_features),optional_features.length>0&&(session_init.optionalFeatures=optional_features),navigator.xr.requestSession(session_mode,session_init).then(function(session){GodotWebXR.session=session,session.addEventListener("end",function(){onended()}),session.addEventListener("inputsourceschange",function(evt){let controller_changed=!1;[evt.added,evt.removed].forEach(lst=>{lst.forEach(input_source=>{input_source.targetRayMode==="tracked-pointer"&&(controller_changed=!0)})}),controller_changed&&oncontroller()}),["selectstart","selectend","select","squeezestart","squeezeend","squeeze"].forEach((input_event,index)=>{session.addEventListener(input_event,function(evt){GodotWebXR.sampleControllers(),oninputevent(index,GodotWebXR.getControllerId(evt.inputSource))})}),session.addEventListener("visibilitychange",function(){const c_str=GodotRuntime.allocString("visibility_state_changed");onsimpleevent(c_str),GodotRuntime.free(c_str)});const gl_context_handle=_emscripten_webgl_get_current_context(),gl=GL.getContext(gl_context_handle).GLctx;GodotWebXR.gl=gl,gl.makeXRCompatible().then(function(){session.updateRenderState({baseLayer:new XRWebGLLayer(session,gl)});function onReferenceSpaceSuccess(reference_space,reference_space_type){GodotWebXR.space=reference_space,reference_space.onreset=function(){const c_str=GodotRuntime.allocString("reference_space_reset");onsimpleevent(c_str),GodotRuntime.free(c_str)},GodotWebXR.pauseResumeMainLoop(),window.setTimeout(function(){const c_str=GodotRuntime.allocString(reference_space_type);onstarted(c_str),GodotRuntime.free(c_str)},0)}function requestReferenceSpace(){const reference_space_type=requested_reference_space_types.shift();session.requestReferenceSpace(reference_space_type).then(refSpace=>{onReferenceSpaceSuccess(refSpace,reference_space_type)}).catch(()=>{if(requested_reference_space_types.length===0){const c_str=GodotRuntime.allocString("Unable to get any of the requested reference space types");onfailed(c_str),GodotRuntime.free(c_str)}else requestReferenceSpace()})}requestReferenceSpace()}).catch(function(error){const c_str=GodotRuntime.allocString(`Unable to make WebGL context compatible with WebXR: ${error}`);onfailed(c_str),GodotRuntime.free(c_str)})}).catch(function(error){const c_str=GodotRuntime.allocString(`Unable to start session: ${error}`);onfailed(c_str),GodotRuntime.free(c_str)})}function _godot_webxr_is_controller_connected(p_controller){return!!GodotWebXR.session&&!!GodotWebXR.frame&&!!GodotWebXR.controllers[p_controller]}function _godot_webxr_is_session_supported(p_session_mode,p_callback){const session_mode=GodotRuntime.parseString(p_session_mode),cb=GodotRuntime.get_func(p_callback);if(navigator.xr)navigator.xr.isSessionSupported(session_mode).then(function(supported){const c_str=GodotRuntime.allocString(session_mode);cb(c_str,supported?1:0),GodotRuntime.free(c_str)});else{const c_str=GodotRuntime.allocString(session_mode);cb(c_str,0),GodotRuntime.free(c_str)}}function _godot_webxr_is_supported(){return!!navigator.xr}function _godot_webxr_sample_controller_data(){GodotWebXR.sampleControllers()}function _godot_webxr_uninitialize(){GodotWebXR.session&&GodotWebXR.session.end().catch(e=>{}),GodotWebXR.session=null,GodotWebXR.space=null,GodotWebXR.frame=null,GodotWebXR.pose=null,GodotWebXR.monkeyPatchRequestAnimationFrame(!1),GodotWebXR.pauseResumeMainLoop()}function arraySum(array,index){for(var sum=0,i=0;i<=index;sum+=array[i++]);return sum}var MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31],MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31];function addDays(date,days){for(var newDate=new Date(date.getTime());days>0;){var leap=isLeapYear(newDate.getFullYear()),currentMonth=newDate.getMonth(),daysInCurrentMonth=(leap?MONTH_DAYS_LEAP:MONTH_DAYS_REGULAR)[currentMonth];if(days>daysInCurrentMonth-newDate.getDate())days-=daysInCurrentMonth-newDate.getDate()+1,newDate.setDate(1),currentMonth<11?newDate.setMonth(currentMonth+1):(newDate.setMonth(0),newDate.setFullYear(newDate.getFullYear()+1));else return newDate.setDate(newDate.getDate()+days),newDate}return newDate}function writeArrayToMemory(array,buffer){HEAP8.set(array,buffer)}function _strftime(s,maxsize,format,tm){var rule,tm_zone=HEAP32[tm+40>>2],date={tm_sec:HEAP32[tm>>2],tm_min:HEAP32[tm+4>>2],tm_hour:HEAP32[tm+8>>2],tm_mday:HEAP32[tm+12>>2],tm_mon:HEAP32[tm+16>>2],tm_year:HEAP32[tm+20>>2],tm_wday:HEAP32[tm+24>>2],tm_yday:HEAP32[tm+28>>2],tm_isdst:HEAP32[tm+32>>2],tm_gmtoff:HEAP32[tm+36>>2],tm_zone:tm_zone?UTF8ToString(tm_zone):""},pattern=UTF8ToString(format),EXPANSION_RULES_1={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(rule in EXPANSION_RULES_1)pattern=pattern.replace(new RegExp(rule,"g"),EXPANSION_RULES_1[rule]);var WEEKDAYS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"];function leadingSomething(value,digits,character){for(var str=typeof value=="number"?value.toString():value||"";str.length<digits;)str=character[0]+str;return str}function leadingNulls(value,digits){return leadingSomething(value,digits,"0")}function compareByDay(date1,date2){function sgn(value){return value<0?-1:value>0?1:0}var compare;return(compare=sgn(date1.getFullYear()-date2.getFullYear()))===0&&(compare=sgn(date1.getMonth()-date2.getMonth()))===0&&(compare=sgn(date1.getDate()-date2.getDate())),compare}function getFirstWeekStartDate(janFourth){switch(janFourth.getDay()){case 0:return new Date(janFourth.getFullYear()-1,11,29);case 1:return janFourth;case 2:return new Date(janFourth.getFullYear(),0,3);case 3:return new Date(janFourth.getFullYear(),0,2);case 4:return new Date(janFourth.getFullYear(),0,1);case 5:return new Date(janFourth.getFullYear()-1,11,31);case 6:return new Date(janFourth.getFullYear()-1,11,30)}}function getWeekBasedYear(date){var thisDate=addDays(new Date(date.tm_year+1900,0,1),date.tm_yday),janFourthThisYear=new Date(thisDate.getFullYear(),0,4),janFourthNextYear=new Date(thisDate.getFullYear()+1,0,4),firstWeekStartThisYear=getFirstWeekStartDate(janFourthThisYear),firstWeekStartNextYear=getFirstWeekStartDate(janFourthNextYear);return compareByDay(firstWeekStartThisYear,thisDate)<=0?compareByDay(firstWeekStartNextYear,thisDate)<=0?thisDate.getFullYear()+1:thisDate.getFullYear():thisDate.getFullYear()-1}var EXPANSION_RULES_2={"%a":function(date){return WEEKDAYS[date.tm_wday].substring(0,3)},"%A":function(date){return WEEKDAYS[date.tm_wday]},"%b":function(date){return MONTHS[date.tm_mon].substring(0,3)},"%B":function(date){return MONTHS[date.tm_mon]},"%C":function(date){var year=date.tm_year+1900;return leadingNulls(year/100|0,2)},"%d":function(date){return leadingNulls(date.tm_mday,2)},"%e":function(date){return leadingSomething(date.tm_mday,2," ")},"%g":function(date){return getWeekBasedYear(date).toString().substring(2)},"%G":function(date){return getWeekBasedYear(date)},"%H":function(date){return leadingNulls(date.tm_hour,2)},"%I":function(date){var twelveHour=date.tm_hour;return twelveHour==0?twelveHour=12:twelveHour>12&&(twelveHour-=12),leadingNulls(twelveHour,2)},"%j":function(date){return leadingNulls(date.tm_mday+arraySum(isLeapYear(date.tm_year+1900)?MONTH_DAYS_LEAP:MONTH_DAYS_REGULAR,date.tm_mon-1),3)},"%m":function(date){return leadingNulls(date.tm_mon+1,2)},"%M":function(date){return leadingNulls(date.tm_min,2)},"%n":function(){return`
`},"%p":function(date){return date.tm_hour>=0&&date.tm_hour<12?"AM":"PM"},"%S":function(date){return leadingNulls(date.tm_sec,2)},"%t":function(){return"	"},"%u":function(date){return date.tm_wday||7},"%U":function(date){var days=date.tm_yday+7-date.tm_wday;return leadingNulls(Math.floor(days/7),2)},"%V":function(date){if(val=Math.floor((date.tm_yday+7-(date.tm_wday+6)%7)/7),(date.tm_wday+371-date.tm_yday-2)%7<=2&&val++,val){if(val==53){var jan1=(date.tm_wday+371-date.tm_yday)%7;jan1!=4&&(jan1!=3||!isLeapYear(date.tm_year))&&(val=1)}}else{val=52;var val,dec31=(date.tm_wday+7-date.tm_yday-1)%7;(dec31==4||dec31==5&&isLeapYear(date.tm_year%400-1))&&val++}return leadingNulls(val,2)},"%w":function(date){return date.tm_wday},"%W":function(date){var days=date.tm_yday+7-(date.tm_wday+6)%7;return leadingNulls(Math.floor(days/7),2)},"%y":function(date){return(date.tm_year+1900).toString().substring(2)},"%Y":function(date){return date.tm_year+1900},"%z":function(date){var off=date.tm_gmtoff,ahead=off>=0,off=Math.abs(off)/60,off=off/60*100+off%60;return(ahead?"+":"-")+String("0000"+off).slice(-4)},"%Z":function(date){return date.tm_zone},"%%":function(){return"%"}},pattern=pattern.replace(/%%/g,"\0\0");for(rule in EXPANSION_RULES_2)pattern.includes(rule)&&(pattern=pattern.replace(new RegExp(rule,"g"),EXPANSION_RULES_2[rule](date)));var pattern=pattern.replace(/\0\0/g,"%"),bytes=intArrayFromString(pattern,!1);return bytes.length>maxsize?0:(writeArrayToMemory(bytes,s),bytes.length-1)}function _strftime_l(s,maxsize,format,tm){return _strftime(s,maxsize,format,tm)}function stringToUTF8OnStack(str){var size=lengthBytesUTF8(str)+1,ret=stackAlloc(size);return stringToUTF8(str,ret,size),ret}function getCFunc(ident){var func=Module["_"+ident];return func}function ccall(ident,returnType,argTypes,args){toC={string:str=>{var ret=0;return str!=null&&str!==0&&(ret=stringToUTF8OnStack(str)),ret},array:arr=>{var ret=stackAlloc(arr.length);return writeArrayToMemory(arr,ret),ret}};function convertReturnValue(ret){return returnType==="string"?UTF8ToString(ret):returnType==="boolean"?Boolean(ret):ret}var func=getCFunc(ident),cArgs=[],stack=0;if(args)for(i=0;i<args.length;i++){var toC,i,ret,converter=toC[argTypes[i]];converter?(stack===0&&(stack=stackSave()),cArgs[i]=converter(args[i])):cArgs[i]=args[i]}ret=func.apply(null,cArgs);function onDone(ret){return stack!==0&&stackRestore(stack),convertReturnValue(ret)}return ret=onDone(ret),ret}function cwrap(ident,returnType,argTypes,opts){var numericArgs=!argTypes||argTypes.every(type=>type==="number"||type==="boolean"),numericRet=returnType!=="string";return numericRet&&numericArgs&&!opts?getCFunc(ident):function(){return ccall(ident,returnType,argTypes,arguments,opts)}}var FSNode=function(parent,name,mode,rdev){parent||(parent=this),this.parent=parent,this.mount=parent.mount,this.mounted=null,this.id=FS.nextInode++,this.name=name,this.mode=mode,this.node_ops={},this.stream_ops={},this.rdev=rdev},readMode=292|73,writeMode=146;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}}),FS.FSNode=FSNode,FS.createPreloadedFile=FS_createPreloadedFile,FS.staticInit(),Module.requestFullscreen=function(lockPointer,resizeCanvas){Browser.requestFullscreen(lockPointer,resizeCanvas)},Module.requestAnimationFrame=function(func){Browser.requestAnimationFrame(func)},Module.setCanvasSize=function(width,height,noUpdates){Browser.setCanvasSize(width,height,noUpdates)},Module.pauseMainLoop=function(){Browser.mainLoop.pause()},Module.resumeMainLoop=function(){Browser.mainLoop.resume()},Module.getUserMedia=function(){Browser.getUserMedia()},Module.createContext=function(canvas,useWebGL,setInModule,webGLContextAttributes){return Browser.createContext(canvas,useWebGL,setInModule,webGLContextAttributes)};for(var preloadedImages={},preloadedAudios={},i=0;i<32;++i)tempFixedLengthArray.push(new Array(i));for(var miniTempWebGLFloatBuffersStorage=new Float32Array(288),i=0;i<288;++i)miniTempWebGLFloatBuffers[i]=miniTempWebGLFloatBuffersStorage.subarray(0,i+1);for(var miniTempWebGLIntBuffersStorage=new Int32Array(288),i=0;i<288;++i)miniTempWebGLIntBuffers[i]=miniTempWebGLIntBuffersStorage.subarray(0,i+1);Module.request_quit=function(){GodotOS.request_quit()},Module.onExit=GodotOS.cleanup,GodotOS._fs_sync_promise=Promise.resolve(),Module.initConfig=GodotConfig.init_config,Module.initFS=GodotFS.init,Module.copyToFS=GodotFS.copy_to_fs,ERRNO_CODES={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},GodotOS.atexit(function(resolve){GodotDisplayCursor.clear(),resolve()}),GodotOS.atexit(function(resolve){GodotEventListeners.clear(),resolve()}),GodotOS.atexit(function(resolve){GodotDisplayVK.clear(),resolve()}),GodotOS.atexit(function(resolve){GodotIME.clear(),resolve()}),GodotJSWrapper.proxies=new Map;var wasmImports={mk:___call_sighandler,lk:___dlsym,kk:___syscall__newselect,jk:___syscall_accept4,ik:___syscall_bind,hk:___syscall_chdir,gk:___syscall_chmod,fk:___syscall_connect,ek:___syscall_faccessat,Ma:___syscall_fcntl64,dk:___syscall_getcwd,ck:___syscall_getdents64,bk:___syscall_getsockname,ak:___syscall_getsockopt,Vb:___syscall_ioctl,$j:___syscall_listen,_j:___syscall_lstat64,Zj:___syscall_mkdirat,Yj:___syscall_newfstatat,Ub:___syscall_openat,Xj:___syscall_poll,Wj:___syscall_readlinkat,Vj:___syscall_recvfrom,Uj:___syscall_renameat,Tb:___syscall_rmdir,Tj:___syscall_sendto,Sb:___syscall_socket,Sj:___syscall_stat64,Rj:___syscall_statfs64,Qj:___syscall_symlink,Rb:___syscall_unlinkat,Mj:__emscripten_get_now_is_monotonic,Lj:__emscripten_throw_longjmp,Kj:__gmtime_js,Jj:__localtime_js,Ij:__tzset_js,H:_abort,Ob:_dlopen,Nb:_emscripten_cancel_main_loop,hb:_emscripten_date_now,Hj:_emscripten_force_exit,gb:_emscripten_get_now,Gj:_emscripten_glActiveTexture,Fj:_emscripten_glAttachShader,Ej:_emscripten_glBeginQuery,Dj:_emscripten_glBeginQueryEXT,Cj:_emscripten_glBeginTransformFeedback,Bj:_emscripten_glBindAttribLocation,Aj:_emscripten_glBindBuffer,zj:_emscripten_glBindBufferBase,yj:_emscripten_glBindBufferRange,xj:_emscripten_glBindFramebuffer,wj:_emscripten_glBindRenderbuffer,vj:_emscripten_glBindSampler,uj:_emscripten_glBindTexture,tj:_emscripten_glBindTransformFeedback,sj:_emscripten_glBindVertexArray,rj:_emscripten_glBindVertexArrayOES,qj:_emscripten_glBlendColor,pj:_emscripten_glBlendEquation,oj:_emscripten_glBlendEquationSeparate,nj:_emscripten_glBlendFunc,mj:_emscripten_glBlendFuncSeparate,lj:_emscripten_glBlitFramebuffer,kj:_emscripten_glBufferData,jj:_emscripten_glBufferSubData,ij:_emscripten_glCheckFramebufferStatus,hj:_emscripten_glClear,gj:_emscripten_glClearBufferfi,fj:_emscripten_glClearBufferfv,ej:_emscripten_glClearBufferiv,dj:_emscripten_glClearBufferuiv,cj:_emscripten_glClearColor,bj:_emscripten_glClearDepthf,aj:_emscripten_glClearStencil,$i:_emscripten_glClientWaitSync,_i:_emscripten_glColorMask,Zi:_emscripten_glCompileShader,Yi:_emscripten_glCompressedTexImage2D,Xi:_emscripten_glCompressedTexImage3D,Wi:_emscripten_glCompressedTexSubImage2D,Vi:_emscripten_glCompressedTexSubImage3D,Ui:_emscripten_glCopyBufferSubData,Ti:_emscripten_glCopyTexImage2D,Si:_emscripten_glCopyTexSubImage2D,Ri:_emscripten_glCopyTexSubImage3D,Qi:_emscripten_glCreateProgram,Pi:_emscripten_glCreateShader,Oi:_emscripten_glCullFace,Ni:_emscripten_glDeleteBuffers,Mi:_emscripten_glDeleteFramebuffers,Li:_emscripten_glDeleteProgram,Ki:_emscripten_glDeleteQueries,Ji:_emscripten_glDeleteQueriesEXT,Ii:_emscripten_glDeleteRenderbuffers,Hi:_emscripten_glDeleteSamplers,Gi:_emscripten_glDeleteShader,Fi:_emscripten_glDeleteSync,Ei:_emscripten_glDeleteTextures,Di:_emscripten_glDeleteTransformFeedbacks,Ci:_emscripten_glDeleteVertexArrays,Bi:_emscripten_glDeleteVertexArraysOES,Ai:_emscripten_glDepthFunc,zi:_emscripten_glDepthMask,yi:_emscripten_glDepthRangef,xi:_emscripten_glDetachShader,wi:_emscripten_glDisable,vi:_emscripten_glDisableVertexAttribArray,ui:_emscripten_glDrawArrays,ti:_emscripten_glDrawArraysInstanced,si:_emscripten_glDrawArraysInstancedANGLE,ri:_emscripten_glDrawArraysInstancedARB,qi:_emscripten_glDrawArraysInstancedEXT,pi:_emscripten_glDrawArraysInstancedNV,oi:_emscripten_glDrawBuffers,ni:_emscripten_glDrawBuffersEXT,mi:_emscripten_glDrawBuffersWEBGL,li:_emscripten_glDrawElements,ki:_emscripten_glDrawElementsInstanced,ji:_emscripten_glDrawElementsInstancedANGLE,ii:_emscripten_glDrawElementsInstancedARB,hi:_emscripten_glDrawElementsInstancedEXT,gi:_emscripten_glDrawElementsInstancedNV,fi:_emscripten_glDrawRangeElements,ei:_emscripten_glEnable,di:_emscripten_glEnableVertexAttribArray,ci:_emscripten_glEndQuery,bi:_emscripten_glEndQueryEXT,ai:_emscripten_glEndTransformFeedback,$h:_emscripten_glFenceSync,_h:_emscripten_glFinish,Zh:_emscripten_glFlush,Yh:_emscripten_glFramebufferRenderbuffer,Xh:_emscripten_glFramebufferTexture2D,Wh:_emscripten_glFramebufferTextureLayer,Vh:_emscripten_glFrontFace,Uh:_emscripten_glGenBuffers,Th:_emscripten_glGenFramebuffers,Sh:_emscripten_glGenQueries,Rh:_emscripten_glGenQueriesEXT,Qh:_emscripten_glGenRenderbuffers,Ph:_emscripten_glGenSamplers,Oh:_emscripten_glGenTextures,Nh:_emscripten_glGenTransformFeedbacks,Mh:_emscripten_glGenVertexArrays,Lh:_emscripten_glGenVertexArraysOES,Kh:_emscripten_glGenerateMipmap,Jh:_emscripten_glGetActiveAttrib,Ih:_emscripten_glGetActiveUniform,Hh:_emscripten_glGetActiveUniformBlockName,Gh:_emscripten_glGetActiveUniformBlockiv,Fh:_emscripten_glGetActiveUniformsiv,Eh:_emscripten_glGetAttachedShaders,Dh:_emscripten_glGetAttribLocation,Ch:_emscripten_glGetBooleanv,Bh:_emscripten_glGetBufferParameteri64v,Ah:_emscripten_glGetBufferParameteriv,zh:_emscripten_glGetError,yh:_emscripten_glGetFloatv,xh:_emscripten_glGetFragDataLocation,wh:_emscripten_glGetFramebufferAttachmentParameteriv,vh:_emscripten_glGetInteger64i_v,uh:_emscripten_glGetInteger64v,th:_emscripten_glGetIntegeri_v,sh:_emscripten_glGetIntegerv,rh:_emscripten_glGetInternalformativ,qh:_emscripten_glGetProgramBinary,ph:_emscripten_glGetProgramInfoLog,oh:_emscripten_glGetProgramiv,nh:_emscripten_glGetQueryObjecti64vEXT,mh:_emscripten_glGetQueryObjectivEXT,lh:_emscripten_glGetQueryObjectui64vEXT,kh:_emscripten_glGetQueryObjectuiv,jh:_emscripten_glGetQueryObjectuivEXT,ih:_emscripten_glGetQueryiv,hh:_emscripten_glGetQueryivEXT,gh:_emscripten_glGetRenderbufferParameteriv,fh:_emscripten_glGetSamplerParameterfv,eh:_emscripten_glGetSamplerParameteriv,dh:_emscripten_glGetShaderInfoLog,ch:_emscripten_glGetShaderPrecisionFormat,bh:_emscripten_glGetShaderSource,ah:_emscripten_glGetShaderiv,$g:_emscripten_glGetString,_g:_emscripten_glGetStringi,Zg:_emscripten_glGetSynciv,Yg:_emscripten_glGetTexParameterfv,Xg:_emscripten_glGetTexParameteriv,Wg:_emscripten_glGetTransformFeedbackVarying,Vg:_emscripten_glGetUniformBlockIndex,Ug:_emscripten_glGetUniformIndices,Tg:_emscripten_glGetUniformLocation,Sg:_emscripten_glGetUniformfv,Rg:_emscripten_glGetUniformiv,Qg:_emscripten_glGetUniformuiv,Pg:_emscripten_glGetVertexAttribIiv,Og:_emscripten_glGetVertexAttribIuiv,Ng:_emscripten_glGetVertexAttribPointerv,Mg:_emscripten_glGetVertexAttribfv,Lg:_emscripten_glGetVertexAttribiv,Kg:_emscripten_glHint,Jg:_emscripten_glInvalidateFramebuffer,Ig:_emscripten_glInvalidateSubFramebuffer,Hg:_emscripten_glIsBuffer,Gg:_emscripten_glIsEnabled,Fg:_emscripten_glIsFramebuffer,Eg:_emscripten_glIsProgram,Dg:_emscripten_glIsQuery,Cg:_emscripten_glIsQueryEXT,Bg:_emscripten_glIsRenderbuffer,Ag:_emscripten_glIsSampler,zg:_emscripten_glIsShader,yg:_emscripten_glIsSync,xg:_emscripten_glIsTexture,wg:_emscripten_glIsTransformFeedback,vg:_emscripten_glIsVertexArray,ug:_emscripten_glIsVertexArrayOES,tg:_emscripten_glLineWidth,sg:_emscripten_glLinkProgram,rg:_emscripten_glPauseTransformFeedback,qg:_emscripten_glPixelStorei,pg:_emscripten_glPolygonOffset,og:_emscripten_glProgramBinary,ng:_emscripten_glProgramParameteri,mg:_emscripten_glQueryCounterEXT,lg:_emscripten_glReadBuffer,kg:_emscripten_glReadPixels,jg:_emscripten_glReleaseShaderCompiler,ig:_emscripten_glRenderbufferStorage,hg:_emscripten_glRenderbufferStorageMultisample,gg:_emscripten_glResumeTransformFeedback,fg:_emscripten_glSampleCoverage,eg:_emscripten_glSamplerParameterf,dg:_emscripten_glSamplerParameterfv,cg:_emscripten_glSamplerParameteri,bg:_emscripten_glSamplerParameteriv,ag:_emscripten_glScissor,$f:_emscripten_glShaderBinary,_f:_emscripten_glShaderSource,Zf:_emscripten_glStencilFunc,Yf:_emscripten_glStencilFuncSeparate,Xf:_emscripten_glStencilMask,Wf:_emscripten_glStencilMaskSeparate,Vf:_emscripten_glStencilOp,Uf:_emscripten_glStencilOpSeparate,Tf:_emscripten_glTexImage2D,Sf:_emscripten_glTexImage3D,Rf:_emscripten_glTexParameterf,Qf:_emscripten_glTexParameterfv,Pf:_emscripten_glTexParameteri,Of:_emscripten_glTexParameteriv,Nf:_emscripten_glTexStorage2D,Mf:_emscripten_glTexStorage3D,Lf:_emscripten_glTexSubImage2D,Kf:_emscripten_glTexSubImage3D,Jf:_emscripten_glTransformFeedbackVaryings,If:_emscripten_glUniform1f,Hf:_emscripten_glUniform1fv,Gf:_emscripten_glUniform1i,Ff:_emscripten_glUniform1iv,Ef:_emscripten_glUniform1ui,Df:_emscripten_glUniform1uiv,Cf:_emscripten_glUniform2f,Bf:_emscripten_glUniform2fv,Af:_emscripten_glUniform2i,zf:_emscripten_glUniform2iv,yf:_emscripten_glUniform2ui,xf:_emscripten_glUniform2uiv,wf:_emscripten_glUniform3f,vf:_emscripten_glUniform3fv,uf:_emscripten_glUniform3i,tf:_emscripten_glUniform3iv,sf:_emscripten_glUniform3ui,rf:_emscripten_glUniform3uiv,qf:_emscripten_glUniform4f,pf:_emscripten_glUniform4fv,of:_emscripten_glUniform4i,nf:_emscripten_glUniform4iv,mf:_emscripten_glUniform4ui,lf:_emscripten_glUniform4uiv,kf:_emscripten_glUniformBlockBinding,jf:_emscripten_glUniformMatrix2fv,hf:_emscripten_glUniformMatrix2x3fv,gf:_emscripten_glUniformMatrix2x4fv,ff:_emscripten_glUniformMatrix3fv,ef:_emscripten_glUniformMatrix3x2fv,df:_emscripten_glUniformMatrix3x4fv,cf:_emscripten_glUniformMatrix4fv,bf:_emscripten_glUniformMatrix4x2fv,af:_emscripten_glUniformMatrix4x3fv,$e:_emscripten_glUseProgram,_e:_emscripten_glValidateProgram,Ze:_emscripten_glVertexAttrib1f,Ye:_emscripten_glVertexAttrib1fv,Xe:_emscripten_glVertexAttrib2f,We:_emscripten_glVertexAttrib2fv,Ve:_emscripten_glVertexAttrib3f,Ue:_emscripten_glVertexAttrib3fv,Te:_emscripten_glVertexAttrib4f,Se:_emscripten_glVertexAttrib4fv,Re:_emscripten_glVertexAttribDivisor,Qe:_emscripten_glVertexAttribDivisorANGLE,Pe:_emscripten_glVertexAttribDivisorARB,Oe:_emscripten_glVertexAttribDivisorEXT,Ne:_emscripten_glVertexAttribDivisorNV,Me:_emscripten_glVertexAttribI4i,Le:_emscripten_glVertexAttribI4iv,Ke:_emscripten_glVertexAttribI4ui,Je:_emscripten_glVertexAttribI4uiv,Ie:_emscripten_glVertexAttribIPointer,He:_emscripten_glVertexAttribPointer,Ge:_emscripten_glViewport,Fe:_emscripten_glWaitSync,Ee:_emscripten_memcpy_big,De:_emscripten_resize_heap,Mb:_emscripten_set_main_loop,Lb:_emscripten_webgl_commit_frame,Ce:_emscripten_webgl_create_context,Be:_emscripten_webgl_destroy_context,Ae:_emscripten_webgl_init_context_attributes,ze:_emscripten_webgl_make_context_current,Pj:_environ_get,Oj:_environ_sizes_get,ya:_fd_close,Nj:_fd_fdstat_get,Qb:_fd_read,Yb:_fd_seek,Pb:_fd_write,fb:_getaddrinfo,ye:_getnameinfo,Ra:_glActiveTexture,Qa:_glAttachShader,eb:_glBeginTransformFeedback,Kb:_glBindAttribLocation,b:_glBindBuffer,P:_glBindBufferBase,d:_glBindFramebuffer,ba:_glBindRenderbuffer,a:_glBindTexture,k:_glBindVertexArray,D:_glBlendEquation,Z:_glBlendFunc,B:_glBlendFuncSeparate,ha:_glBlitFramebuffer,j:_glBufferData,C:_glBufferSubData,L:_glCheckFramebufferStatus,K:_glClear,qa:_glClearBufferfv,O:_glClearColor,aa:_glClearDepthf,N:_glColorMask,la:_glCompileShader,Jb:_glCompressedTexImage2D,xe:_glCompressedTexSubImage2D,Ib:_glCompressedTexSubImage3D,we:_glCopyBufferSubData,db:_glCopyTexSubImage2D,cb:_glCreateProgram,Ha:_glCreateShader,pa:_glCullFace,M:_glDeleteBuffers,F:_glDeleteFramebuffers,T:_glDeleteProgram,U:_glDeleteRenderbuffers,J:_glDeleteShader,y:_glDeleteTextures,da:_glDeleteVertexArrays,Y:_glDepthFunc,I:_glDepthMask,h:_glDisable,n:_glDisableVertexAttribArray,t:_glDrawArrays,xa:_glDrawArraysInstanced,Ga:_glDrawBuffers,W:_glDrawElements,na:_glDrawElementsInstanced,p:_glEnable,i:_glEnableVertexAttribArray,bb:_glEndTransformFeedback,Hb:_glFinish,$:_glFramebufferRenderbuffer,u:_glFramebufferTexture2D,ve:_glFramebufferTextureLayer,Gb:_glFrontFace,x:_glGenBuffers,E:_glGenFramebuffers,ga:_glGenRenderbuffers,s:_glGenTextures,V:_glGenVertexArrays,Q:_glGenerateMipmap,Fb:_glGetError,Eb:_glGetFloatv,Fa:_glGetInteger64v,wa:_glGetIntegerv,Db:_glGetProgramBinary,Cb:_glGetProgramInfoLog,Ea:_glGetProgramiv,Pa:_glGetShaderInfoLog,ue:_glGetShaderSource,ca:_glGetShaderiv,va:_glGetString,te:_glGetStringi,se:_glGetUniformBlockIndex,ua:_glGetUniformLocation,re:_glInvalidateFramebuffer,Bb:_glLinkProgram,ka:_glPixelStorei,Ab:_glProgramBinary,qe:_glProgramParameteri,fa:_glReadBuffer,ab:_glReadPixels,ea:_glRenderbufferStorage,La:_glRenderbufferStorageMultisample,R:_glScissor,Da:_glShaderSource,o:_glTexImage2D,Ka:_glTexImage3D,f:_glTexParameterf,c:_glTexParameteri,$a:_glTexStorage2D,Ja:_glTexSubImage2D,Oa:_glTexSubImage3D,pe:_glTransformFeedbackVaryings,e:_glUniform1f,r:_glUniform1i,_a:_glUniform1iv,zb:_glUniform1ui,Za:_glUniform2f,l:_glUniform2fv,Ca:_glUniform2i,ja:_glUniform2iv,Ya:_glUniform3f,X:_glUniform3fv,Ba:_glUniform3i,ta:_glUniform4f,w:_glUniform4fv,Aa:_glUniform4i,oe:_glUniformBlockBinding,ne:_glUniformMatrix2fv,yb:_glUniformMatrix3fv,m:_glUniformMatrix4fv,ia:_glUseProgram,A:_glVertexAttrib4f,S:_glVertexAttrib4fv,G:_glVertexAttribDivisor,me:_glVertexAttribI4ui,za:_glVertexAttribIPointer,g:_glVertexAttribPointer,q:_glViewport,le:_godot_audio_capture_start,ke:_godot_audio_capture_stop,je:_godot_audio_has_script_processor,ie:_godot_audio_has_worklet,he:_godot_audio_init,ge:_godot_audio_is_available,Na:_godot_audio_resume,fe:_godot_audio_script_create,ee:_godot_audio_script_start,de:_godot_audio_worklet_create,ce:_godot_audio_worklet_start_no_threads,be:_godot_js_config_canvas_id_get,ae:_godot_js_config_locale_get,$d:_godot_js_display_alert,_d:_godot_js_display_canvas_focus,Zd:_godot_js_display_canvas_is_focused,Yd:_godot_js_display_clipboard_get,Xd:_godot_js_display_clipboard_set,Wd:_godot_js_display_cursor_is_hidden,Vd:_godot_js_display_cursor_is_locked,Xa:_godot_js_display_cursor_lock_set,xb:_godot_js_display_cursor_set_custom_shape,Ud:_godot_js_display_cursor_set_shape,Wa:_godot_js_display_cursor_set_visible,Td:_godot_js_display_desired_size_set,Sd:_godot_js_display_fullscreen_cb,Rd:_godot_js_display_fullscreen_exit,Qd:_godot_js_display_fullscreen_request,sa:_godot_js_display_glGetBufferSubData,wb:_godot_js_display_has_webgl,Pd:_godot_js_display_is_swap_ok_cancel,Od:_godot_js_display_notification_cb,Nd:_godot_js_display_pixel_ratio_get,Md:_godot_js_display_screen_dpi_get,Ld:_godot_js_display_screen_size_get,Kd:_godot_js_display_setup_canvas,Jd:_godot_js_display_size_update,Id:_godot_js_display_touchscreen_is_available,Hd:_godot_js_display_vk_available,Gd:_godot_js_display_vk_cb,Fd:_godot_js_display_vk_hide,Ed:_godot_js_display_vk_show,Dd:_godot_js_display_window_blur_cb,Cd:_godot_js_display_window_icon_set,Bd:_godot_js_display_window_size_get,Ad:_godot_js_display_window_title_set,zd:_godot_js_eval,Va:_godot_js_fetch_body_length_get,yd:_godot_js_fetch_create,vb:_godot_js_fetch_free,xd:_godot_js_fetch_http_status_get,ub:_godot_js_fetch_is_chunked,wd:_godot_js_fetch_read_chunk,vd:_godot_js_fetch_read_headers,Ua:_godot_js_fetch_state_get,ud:_godot_js_input_drop_files_cb,td:_godot_js_input_gamepad_cb,sd:_godot_js_input_gamepad_sample,rd:_godot_js_input_gamepad_sample_count,qd:_godot_js_input_gamepad_sample_get,pd:_godot_js_input_key_cb,od:_godot_js_input_mouse_button_cb,nd:_godot_js_input_mouse_move_cb,md:_godot_js_input_mouse_wheel_cb,ld:_godot_js_input_paste_cb,kd:_godot_js_input_touch_cb,jd:_godot_js_input_vibrate_handheld,tb:_godot_js_is_ime_focused,id:_godot_js_os_download_buffer,hd:_godot_js_os_execute,gd:_godot_js_os_finish_async,fd:_godot_js_os_fs_is_persistent,ed:_godot_js_os_fs_sync,dd:_godot_js_os_hw_concurrency_get,cd:_godot_js_os_request_quit_cb,bd:_godot_js_os_shell_open,ad:_godot_js_pwa_cb,$c:_godot_js_pwa_update,sb:_godot_js_rtc_datachannel_close,_c:_godot_js_rtc_datachannel_connect,Zc:_godot_js_rtc_datachannel_destroy,Yc:_godot_js_rtc_datachannel_get_buffered_amount,Xc:_godot_js_rtc_datachannel_id_get,Wc:_godot_js_rtc_datachannel_is_negotiated,Vc:_godot_js_rtc_datachannel_is_ordered,Uc:_godot_js_rtc_datachannel_label_get,Tc:_godot_js_rtc_datachannel_max_packet_lifetime_get,Sc:_godot_js_rtc_datachannel_max_retransmits_get,Rc:_godot_js_rtc_datachannel_protocol_get,Qc:_godot_js_rtc_datachannel_ready_state_get,Pc:_godot_js_rtc_datachannel_send,rb:_godot_js_rtc_pc_close,Oc:_godot_js_rtc_pc_create,Nc:_godot_js_rtc_pc_datachannel_create,qb:_godot_js_rtc_pc_destroy,Mc:_godot_js_rtc_pc_ice_candidate_add,Lc:_godot_js_rtc_pc_local_description_set,Kc:_godot_js_rtc_pc_offer_create,Jc:_godot_js_rtc_pc_remote_description_set,Ic:_godot_js_set_ime_active,Hc:_godot_js_set_ime_cb,Gc:_godot_js_set_ime_position,Fc:_godot_js_tts_get_voices,Ec:_godot_js_tts_is_paused,Dc:_godot_js_tts_is_speaking,Cc:_godot_js_tts_pause,Bc:_godot_js_tts_resume,Ac:_godot_js_tts_speak,zc:_godot_js_tts_stop,pb:_godot_js_websocket_buffered_amount,yc:_godot_js_websocket_close,xc:_godot_js_websocket_create,ob:_godot_js_websocket_destroy,wc:_godot_js_websocket_send,vc:_godot_js_wrapper_create_cb,uc:_godot_js_wrapper_create_object,tc:_godot_js_wrapper_interface_get,sc:_godot_js_wrapper_object_call,rc:_godot_js_wrapper_object_get,nb:_godot_js_wrapper_object_getvar,qc:_godot_js_wrapper_object_set,pc:_godot_js_wrapper_object_setvar,oc:_godot_js_wrapper_object_unref,nc:_godot_webxr_commit_for_eye,mc:_godot_webxr_get_bounds_geometry,mb:_godot_webxr_get_controller_axes,lc:_godot_webxr_get_controller_buttons,kc:_godot_webxr_get_controller_count,Ia:_godot_webxr_get_controller_target_ray_mode,jc:_godot_webxr_get_controller_transform,ic:_godot_webxr_get_projection_for_eye,hc:_godot_webxr_get_render_targetsize,gc:_godot_webxr_get_transform_for_eye,fc:_godot_webxr_get_view_count,ec:_godot_webxr_get_visibility_state,dc:_godot_webxr_initialize,lb:_godot_webxr_is_controller_connected,cc:_godot_webxr_is_session_supported,bc:_godot_webxr_is_supported,kb:_godot_webxr_sample_controller_data,ac:_godot_webxr_uninitialize,$b:invoke_i,ra:invoke_ii,_:invoke_iii,ma:invoke_iiii,jb:invoke_iiiii,Ta:invoke_iiiiii,Xb:invoke_iij,z:invoke_vi,v:invoke_vii,_b:invoke_viii,oa:invoke_viiii,Sa:invoke_viiiiiii,Zb:invoke_viiiiiiii,ib:_strftime,Wb:_strftime_l},asm=createWasm(),___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.asm.ok).apply(null,arguments)},_free=function(){return(_free=Module.asm.pk).apply(null,arguments)},__Z13godot_js_mainiPPc=Module.__Z13godot_js_mainiPPc=function(){return(__Z13godot_js_mainiPPc=Module.__Z13godot_js_mainiPPc=Module.asm.qk).apply(null,arguments)},_main=Module._main=function(){return(_main=Module._main=Module.asm.rk).apply(null,arguments)},_malloc=function(){return(_malloc=Module.asm.sk).apply(null,arguments)},_htonl=function(){return(_htonl=Module.asm.tk).apply(null,arguments)},_htons=function(){return(_htons=Module.asm.uk).apply(null,arguments)},_ntohs=function(){return(_ntohs=Module.asm.vk).apply(null,arguments)},___errno_location=function(){return(___errno_location=Module.asm.wk).apply(null,arguments)},_fflush=Module._fflush=function(){return(_fflush=Module._fflush=Module.asm.xk).apply(null,arguments)},__emwebxr_on_input_event=Module.__emwebxr_on_input_event=function(){return(__emwebxr_on_input_event=Module.__emwebxr_on_input_event=Module.asm.yk).apply(null,arguments)},__emwebxr_on_simple_event=Module.__emwebxr_on_simple_event=function(){return(__emwebxr_on_simple_event=Module.__emwebxr_on_simple_event=Module.asm.zk).apply(null,arguments)},___funcs_on_exit=function(){return(___funcs_on_exit=Module.asm.Bk).apply(null,arguments)},_setThrew=function(){return(_setThrew=Module.asm.Ck).apply(null,arguments)},stackSave=function(){return(stackSave=Module.asm.Dk).apply(null,arguments)},stackRestore=function(){return(stackRestore=Module.asm.Ek).apply(null,arguments)},stackAlloc=function(){return(stackAlloc=Module.asm.Fk).apply(null,arguments)},___cxa_increment_exception_refcount=function(){return(___cxa_increment_exception_refcount=Module.asm.__cxa_increment_exception_refcount).apply(null,arguments)},___cxa_is_pointer_type=function(){return(___cxa_is_pointer_type=Module.asm.__cxa_is_pointer_type).apply(null,arguments)},dynCall_iij=Module.dynCall_iij=function(){return(dynCall_iij=Module.dynCall_iij=Module.asm.Gk).apply(null,arguments)};function invoke_vii(index,a1,a2){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_vi(index,a1){var sp=stackSave();try{getWasmTableEntry(index)(a1)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_iiii(index,a1,a2,a3){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_ii(index,a1){var sp=stackSave();try{return getWasmTableEntry(index)(a1)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_iiiiii(index,a1,a2,a3,a4,a5){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3,a4,a5)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_viiii(index,a1,a2,a3,a4){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3,a4)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_i(index){var sp=stackSave();try{return getWasmTableEntry(index)()}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_viiiiiii(index,a1,a2,a3,a4,a5,a6,a7){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3,a4,a5,a6,a7)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_iii(index,a1,a2){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_iiiii(index,a1,a2,a3,a4){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3,a4)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_viiiiiiii(index,a1,a2,a3,a4,a5,a6,a7,a8){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3,a4,a5,a6,a7,a8)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_viii(index,a1,a2,a3){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_iij(index,a1,a2,a3){var sp=stackSave();try{return dynCall_iij(index,a1,a2,a3)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}Module.callMain=callMain,Module.cwrap=cwrap,dependenciesFulfilled=function runCaller(){calledRun||run(),calledRun||(dependenciesFulfilled=runCaller)};function callMain(args=[]){var ret,entryFunction=_main;args.unshift(thisProgram);var argc=args.length,argv=stackAlloc((argc+1)*4),argv_ptr=argv>>2;args.forEach(arg=>{HEAP32[argv_ptr++]=stringToUTF8OnStack(arg)}),HEAP32[argv_ptr]=0;try{return ret=entryFunction(argc,argv),exitJS(ret,!0),ret}catch(e){return handleException(e)}}function run(args=arguments_){if(runDependencies>0)return;if(preRun(),runDependencies>0)return;function doRun(){if(calledRun)return;if(calledRun=!0,Module.calledRun=!0,ABORT)return;initRuntime(),preMain(),readyPromiseResolve(Module),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(args),postRun()}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),doRun()},1)):doRun()}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!1;return Module.noInitialRun&&(shouldRunNow=!1),run(),Godot.ready}})();typeof exports=="object"&&typeof module=="object"?module.exports=Godot:typeof define=="function"&&define.amd?define([],function(){return Godot}):typeof exports=="object"&&(exports.Godot=Godot);const Preloader=function(){function getTrackedResponse(response,load_status){function onloadprogress(reader,controller){return reader.read().then(function(result){return load_status.done?Promise.resolve():(result.value&&(controller.enqueue(result.value),load_status.loaded+=result.value.length),result.done?(load_status.done=!0,Promise.resolve()):onloadprogress(reader,controller))})}const reader=response.body.getReader();return new Response(new ReadableStream({start:function(controller){onloadprogress(reader,controller).then(function(){controller.close()})}}),{headers:response.headers})}function loadFetch(file,tracker,fileSize,raw){return tracker[file]={total:fileSize||0,loaded:0,done:!1},fetch(file).then(function(response){if(!response.ok)return Promise.reject(new Error(`Failed loading file '${file}'`));const tr=getTrackedResponse(response,tracker[file]);return raw?Promise.resolve(tr):tr.arrayBuffer()})}function retry(func,attempts=1){function onerror(err){return attempts<=1?Promise.reject(err):new Promise(function(resolve,reject){setTimeout(function(){retry(func,attempts-1).then(resolve).catch(reject)},1e3)})}return func().catch(onerror)}const DOWNLOAD_ATTEMPTS_MAX=4,loadingFiles={},lastProgress={loaded:0,total:0};let progressFunc=null;const animateProgress=function(){let loaded=0,total=0,totalIsValid=!0,progressIsFinal=!0;Object.keys(loadingFiles).forEach(function(file){const stat=loadingFiles[file];stat.done||(progressIsFinal=!1),!totalIsValid||stat.total===0?(totalIsValid=!1,total=0):total+=stat.total,loaded+=stat.loaded}),(loaded!==lastProgress.loaded||total!==lastProgress.total)&&(lastProgress.loaded=loaded,lastProgress.total=total,typeof progressFunc=="function"&&progressFunc(loaded,total)),progressIsFinal||requestAnimationFrame(animateProgress)};this.animateProgress=animateProgress,this.setProgressFunc=function(callback){progressFunc=callback},this.loadPromise=function(file,fileSize,raw=!1){return retry(loadFetch.bind(null,file,loadingFiles,fileSize,raw),DOWNLOAD_ATTEMPTS_MAX)},this.preloadedFiles=[],this.preload=function(pathOrBuffer,destPath,fileSize){let buffer=null;if(typeof pathOrBuffer=="string"){const me=this;return this.loadPromise(pathOrBuffer,fileSize).then(function(buf){return me.preloadedFiles.push({path:destPath||pathOrBuffer,buffer:buf}),Promise.resolve()})}return pathOrBuffer instanceof ArrayBuffer?buffer=new Uint8Array(pathOrBuffer):ArrayBuffer.isView(pathOrBuffer)&&(buffer=new Uint8Array(pathOrBuffer.buffer)),buffer?(this.preloadedFiles.push({path:destPath,buffer:pathOrBuffer}),Promise.resolve()):Promise.reject(new Error("Invalid object for preloading"))}},EngineConfig={},InternalConfig=function(initConfig){const cfg={unloadAfterInit:!0,canvas:null,executable:"",mainPack:null,locale:null,canvasResizePolicy:2,args:[],focusCanvas:!0,experimentalVK:!1,serviceWorker:"",persistentPaths:["/userfs"],persistentDrops:!1,gdnativeLibs:[],fileSizes:[],onExecute:null,onExit:null,onProgress:null,onPrint:function(){console.log.apply(console,Array.from(arguments))},onPrintError:function(){console.error.apply(console,Array.from(arguments))}};function Config(opts){this.update(opts)}return Config.prototype=cfg,Config.prototype.update=function(opts){const config=opts||{};function parse(key,def){return typeof config[key]=="undefined"?def:config[key]}this.unloadAfterInit=parse("unloadAfterInit",this.unloadAfterInit),this.onPrintError=parse("onPrintError",this.onPrintError),this.onPrint=parse("onPrint",this.onPrint),this.onProgress=parse("onProgress",this.onProgress),this.canvas=parse("canvas",this.canvas),this.executable=parse("executable",this.executable),this.mainPack=parse("mainPack",this.mainPack),this.locale=parse("locale",this.locale),this.canvasResizePolicy=parse("canvasResizePolicy",this.canvasResizePolicy),this.persistentPaths=parse("persistentPaths",this.persistentPaths),this.persistentDrops=parse("persistentDrops",this.persistentDrops),this.experimentalVK=parse("experimentalVK",this.experimentalVK),this.focusCanvas=parse("focusCanvas",this.focusCanvas),this.serviceWorker=parse("serviceWorker",this.serviceWorker),this.gdnativeLibs=parse("gdnativeLibs",this.gdnativeLibs),this.fileSizes=parse("fileSizes",this.fileSizes),this.args=parse("args",this.args),this.onExecute=parse("onExecute",this.onExecute),this.onExit=parse("onExit",this.onExit)},Config.prototype.getModuleConfig=function(loadPath,response){let r=response;return{print:this.onPrint,printErr:this.onPrintError,thisProgram:this.executable,noExitRuntime:!0,dynamicLibraries:[`${loadPath}.side.wasm`],instantiateWasm:function(imports,onSuccess){function done(result){onSuccess(result.instance,result.module)}return typeof WebAssembly.instantiateStreaming!="undefined"?WebAssembly.instantiateStreaming(Promise.resolve(r),imports).then(done):r.arrayBuffer().then(function(buffer){WebAssembly.instantiate(buffer,imports).then(done)}),r=null,{}},locateFile:function(path){return path.endsWith(".worker.js")?`${loadPath}.worker.js`:path.endsWith(".audio.worklet.js")?`${loadPath}.audio.worklet.js`:path.endsWith(".js")?`${loadPath}.js`:path.endsWith(".side.wasm")?`${loadPath}.side.wasm`:path.endsWith(".wasm")?`${loadPath}.wasm`:path}}},Config.prototype.getGodotConfig=function(cleanup){if(!(this.canvas instanceof HTMLCanvasElement)){const nodes=document.getElementsByTagName("canvas");if(nodes.length&&nodes[0]instanceof HTMLCanvasElement&&(this.canvas=nodes[0]),!this.canvas)throw new Error("No canvas found in page")}this.canvas.tabIndex<0&&(this.canvas.tabIndex=0);let locale=this.locale;locale||(locale=navigator.languages?navigator.languages[0]:navigator.language,locale=locale.split(".")[0]),locale=locale.replace("-","_");const onExit=this.onExit;return{canvas:this.canvas,canvasResizePolicy:this.canvasResizePolicy,locale,persistentDrops:this.persistentDrops,virtualKeyboard:this.experimentalVK,focusCanvas:this.focusCanvas,onExecute:this.onExecute,onExit:function(p_code){cleanup(),typeof onExit=="function"&&onExit(p_code)}}},new Config(initConfig)},Engine=function(){const preloader=new Preloader;let loadPromise=null,loadPath="",initPromise=null;function Engine(initConfig){this.config=new InternalConfig(initConfig),this.rtenv=null}Engine.load=function(basePath,size){return loadPromise==null&&(loadPath=basePath,loadPromise=preloader.loadPromise(`${loadPath}.wasm`,size,!0),requestAnimationFrame(preloader.animateProgress)),loadPromise},Engine.unload=function(){loadPromise=null},Engine.isWebGLAvailable=function(majorVersion=1){try{return!!document.createElement("canvas").getContext(["webgl","webgl2"][majorVersion-1])}catch{}return!1};function SafeEngine(initConfig){const proto={init:function(basePath){if(initPromise)return initPromise;if(loadPromise==null){if(!basePath)return initPromise=Promise.reject(new Error("A base path must be provided when calling `init` and the engine is not loaded.")),initPromise;Engine.load(basePath,this.config.fileSizes[`${basePath}.wasm`])}const me=this;function doInit(promise){return new Promise(function(resolve){promise.then(function(response){const cloned=new Response(response.clone().body,{headers:[["content-type","application/wasm"]]});Godot(me.config.getModuleConfig(loadPath,cloned)).then(function(module){const paths=me.config.persistentPaths;module.initFS(paths).then(function(){me.rtenv=module,me.config.unloadAfterInit&&Engine.unload(),resolve()})})})})}return preloader.setProgressFunc(this.config.onProgress),initPromise=doInit(loadPromise),initPromise},preloadFile:function(file,path){return preloader.preload(file,path,this.config.fileSizes[file])},start:function(override){this.config.update(override);const me=this;return me.init().then(function(){if(!me.rtenv)return Promise.reject(new Error("The engine must be initialized before it can be started"));let config={};try{config=me.config.getGodotConfig(function(){me.rtenv=null})}catch(e){return Promise.reject(e)}me.rtenv.initConfig(config);const libs=[];return me.config.gdnativeLibs.forEach(function(lib){libs.push(me.rtenv.loadDynamicLibrary(lib,{loadAsync:!0}))}),Promise.all(libs).then(function(){return new Promise(function(resolve){preloader.preloadedFiles.forEach(function(file){me.rtenv.copyToFS(file.path,file.buffer)}),preloader.preloadedFiles.length=0,me.rtenv.callMain(me.config.args),initPromise=null,me.config.serviceWorker&&"serviceWorker"in navigator&&navigator.serviceWorker.register(me.config.serviceWorker),resolve()})})})},startGame:function(override){this.config.update(override);const exe=this.config.executable,pack=this.config.mainPack||`${exe}.pck`;this.config.args=["--main-pack",pack].concat(this.config.args);const me=this;return Promise.all([this.init(exe),this.preloadFile(pack,pack)]).then(function(){return me.start.apply(me)})},copyToFS:function(path,buffer){if(this.rtenv==null)throw new Error("Engine must be inited before copying files");this.rtenv.copyToFS(path,buffer)},requestQuit:function(){this.rtenv&&this.rtenv.request_quit()}};return Engine.prototype=proto,Engine.prototype.init=Engine.prototype.init,Engine.prototype.preloadFile=Engine.prototype.preloadFile,Engine.prototype.start=Engine.prototype.start,Engine.prototype.startGame=Engine.prototype.startGame,Engine.prototype.copyToFS=Engine.prototype.copyToFS,Engine.prototype.requestQuit=Engine.prototype.requestQuit,Engine.prototype.load=Engine.load,Engine.prototype.unload=Engine.unload,Engine.prototype.isWebGLAvailable=Engine.isWebGLAvailable,new Engine(initConfig)}return SafeEngine.load=Engine.load,SafeEngine.unload=Engine.unload,SafeEngine.isWebGLAvailable=Engine.isWebGLAvailable,SafeEngine}();typeof window!="undefined"&&(window.Engine=Engine)